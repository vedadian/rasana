const atob=e=>Buffer.from(e).toString("base64"),btoa=e=>Buffer.from(e,"base64").toString();let exports={};function characters(e){return e.split("")}function member(e,n){return 0<=n.indexOf(e)}function find_if(e,n){for(var t=n.length;0<=--t;)if(e(n[t]))return n[t]}function repeat_string(e,n){if(n<=0)return"";if(1==n)return e;var t=repeat_string(e,n>>1);return t+=t,1&n?t+e:t}function configure_error_stack(e){Object.defineProperty(e.prototype,"stack",{get:function(){var e=new Error(this.message);e.name=this.name;try{throw e}catch(e){return e.stack}}})}function DefaultsError(e,n){this.message=e,this.defs=n}function defaults(e,n,t){if(t)for(var r in e)if(HOP(e,r)&&!HOP(n,r))throw new DefaultsError("`"+r+"` is not a supported option",n);for(var r in e)HOP(e,r)&&(n[r]=e[r]);return n}function merge(e,n){var t,r=0;for(t in n)HOP(n,t)&&(e[t]=n[t],r++);return r}function noop(){}function return_false(){return!1}function return_true(){return!0}function return_this(){return this}function return_null(){return null}DefaultsError.prototype=Object.create(Error.prototype),(DefaultsError.prototype.constructor=DefaultsError).prototype.name="DefaultsError",configure_error_stack(DefaultsError);var List=function(){function e(e,n){for(var t=[],r=0;r<e.length;r++){var i=n(e[r],r);i!==o&&(i instanceof a?t.push.apply(t,i.v):t.push(i))}return t}e.is_op=function(e){return e===o||e instanceof a},e.splice=function(e){return new a(e)};var o=e.skip={};function a(e){this.v=e}return e}();function push_uniq(e,n){if(e.indexOf(n)<0)return e.push(n)}function string_template(e,t){return e.replace(/\{([^{}]+)\}/g,function(e,n){n=t[n];return n instanceof AST_Node?n.print_to_string():n})}function remove(e,n){n=e.indexOf(n);0<=n&&e.splice(n,1)}function makePredicate(e){Array.isArray(e)||(e=e.split(" "));var n=Object.create(null);return e.forEach(function(e){n[e]=!0}),n}function all(e,n){for(var t=e.length;0<=--t;)if(!n(e[t],t))return!1;return!0}function Dictionary(){this._values=Object.create(null),this._size=0}function HOP(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function first_in_statement(e,n,t){for(var r,i=e.parent(-1),o=0;r=e.parent(o++);i=r){if(is_arrow(r))return n&&r.value===i;if(r instanceof AST_Binary){if(r.left===i)continue}else if("Call"==r.TYPE){if(r.expression===i)continue}else if(r instanceof AST_Conditional){if(r.condition===i)continue}else{if(r instanceof AST_ExportDefault)return t;if(r instanceof AST_PropAccess){if(r.expression===i)continue}else if(r instanceof AST_Sequence){if(r.expressions[0]===i)continue}else{if(r instanceof AST_SimpleStatement)return!0;if(r instanceof AST_Template){if(r.tag===i)continue}else if(r instanceof AST_UnaryPostfix&&r.expression===i)continue}}return!1}}function DEFNODE(e,n,t,r){void 0===r&&(r=AST_Node);var i=n=n?n.split(/\s+/):[];r&&r.PROPS&&(n=n.concat(r.PROPS));var o=["return function AST_",e,"(props){","if(props){"];n.forEach(function(e){o.push("this.",e,"=props.",e,";")}),o.push("}");var a=Object.create(r&&r.prototype);(t.initialize||a.initialize)&&o.push("this.initialize();"),o.push("};");var s,f=new Function(o.join(""))();for(s in f.prototype=a,(f.prototype.CTOR=f).prototype.TYPE=f.TYPE=e,r&&(f.BASE=r).SUBCLASSES.push(f),f.DEFMETHOD=function(e,n){this.prototype[e]=n},f.PROPS=n,f.SELF_PROPS=i,f.SUBCLASSES=[],t)HOP(t,s)&&(/^\$/.test(s)?f[s.substr(1)]=t[s]:f.DEFMETHOD(s,t[s]));return void 0!==exports&&(exports["AST_"+e]=f),f}Dictionary.prototype={set:function(e,n){return this.has(e)||++this._size,this._values["$"+e]=n,this},add:function(e,n){return this.has(e)?this.get(e).push(n):this.set(e,[n]),this},get:function(e){return this._values["$"+e]},del:function(e){return this.has(e)&&(--this._size,delete this._values["$"+e]),this},has:function(e){return"$"+e in this._values},all:function(e){for(var n in this._values)if(!e(this._values[n],n.substr(1)))return!1;return!0},each:function(e){for(var n in this._values)e(this._values[n],n.substr(1))},size:function(){return this._size},map:function(e){var n,t=[];for(n in this._values)t.push(e(this._values[n],n.substr(1)));return t},clone:function(){var e,n=new Dictionary;for(e in this._values)n._values[e]=this._values[e];return n._size=this._size,n},toObject:function(){return this._values}},Dictionary.fromObject=function(e){var n=new Dictionary;return n._size=merge(n._values,e),n};var AST_Token=DEFNODE("Token","type value line col pos endline endcol endpos nlb comments_before comments_after file raw",{},null),AST_Node=DEFNODE("Node","start end",{_clone:function(e){if(e){var n=this.clone();return n.transform(new TreeTransformer(function(e){if(e!==n)return e.clone(!0)}))}return new this.CTOR(this)},clone:function(e){return this._clone(e)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},walk:function(e){e.visit(this)},_validate:function(){if("Node"==this.TYPE)throw new Error("should not instantiate AST_Node")},validate:function(){for(var e=this.CTOR;e.prototype._validate.call(this),e=e.BASE;);},validate_ast:function(){var n={};this.walk(new TreeWalker(function(e){if(e.validate_visited===n)throw new Error(string_template("cannot reuse {type} from [{file}:{line},{col}]",{type:"AST_"+e.TYPE,file:e.start.file,line:e.start.line,col:e.start.col}));e.validate_visited=n}))}},null);(AST_Node.log_function=function(n,e){var t;function r(e){t[e]||(t[e]=!0,n(e))}"function"==typeof n?(t=Object.create(null),AST_Node.info=e?function(e,n){r("INFO: "+string_template(e,n))}:noop,AST_Node.warn=function(e,n){r("WARN: "+string_template(e,n))}):AST_Node.info=AST_Node.warn=noop})();var restore_transforms=[];AST_Node.enable_validation=function(){AST_Node.disable_validation(),function e(n){var t;n.SUBCLASSES.forEach(e),HOP(n.prototype,"transform")&&(t=n.prototype.transform,n.prototype.transform=function(e,n){e=t.call(this,e,n);if(e instanceof AST_Node)e.validate();else if(!(null===e||n&&List.is_op(e)))throw new Error("invalid transformed value: "+e);return e},restore_transforms.push(function(){n.prototype.transform=t}))}(this)},AST_Node.disable_validation=function(){for(var e;e=restore_transforms.pop();)e()};var AST_Statement=DEFNODE("Statement",null,{$documentation:"Base class of all statements",_validate:function(){if("Statement"==this.TYPE)throw new Error("should not instantiate AST_Statement")}}),AST_Debugger=DEFNODE("Debugger",null,{$documentation:"Represents a debugger statement"},AST_Statement),AST_Directive=DEFNODE("Directive","quote value",{$documentation:'Represents a directive, like "use strict";',$propdoc:{quote:"[string?] the original quote character",value:"[string] The value of this directive as a plain string (it's not an AST_String!)"},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},AST_Statement),AST_EmptyStatement=DEFNODE("EmptyStatement",null,{$documentation:"The empty statement (empty block or simply a semicolon)"},AST_Statement);function is_statement(e){return e instanceof AST_Statement&&!(e instanceof AST_ClassExpression)&&!(e instanceof AST_LambdaExpression)}function validate_expression(e,n,t,r,i){if(t=t?"contain":"be",!(e instanceof AST_Node))throw new Error(n+" must "+t+" AST_Node");if(e instanceof AST_DefaultValue)throw new Error(n+" cannot "+t+" AST_DefaultValue");if(e instanceof AST_Destructured)throw new Error(n+" cannot "+t+" AST_Destructured");if(e instanceof AST_Hole&&!i)throw new Error(n+" cannot "+t+" AST_Hole");if(e instanceof AST_Spread&&!r)throw new Error(n+" cannot "+t+" AST_Spread");if(is_statement(e))throw new Error(n+" cannot "+t+" AST_Statement");if(e instanceof AST_SymbolDeclaration)throw new Error(n+" cannot "+t+" AST_SymbolDeclaration")}function must_be_expression(e,n){validate_expression(e[n],n)}var AST_SimpleStatement=DEFNODE("SimpleStatement","body",{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){must_be_expression(this,"body")}},AST_Statement),AST_BlockScope=DEFNODE("BlockScope","enclosed functions make_def parent_scope variables",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any subscopes",functions:"[Dictionary/S] like `variables`, but only lists function declarations",parent_scope:"[AST_Scope?/S] link to the parent scope",variables:"[Dictionary/S] a map of name ---\x3e SymbolDef for all variables/functions defined in this scope"},clone:function(e){e=this._clone(e);return this.enclosed&&(e.enclosed=this.enclosed.slice()),this.functions&&(e.functions=this.functions.clone()),this.variables&&(e.variables=this.variables.clone()),e},pinned:function(){return this.resolve().pinned()},resolve:function(){return this.parent_scope.resolve()},_validate:function(){if("BlockScope"==this.TYPE)throw new Error("should not instantiate AST_BlockScope");if(null!=this.parent_scope){if(!(this.parent_scope instanceof AST_BlockScope))throw new Error("parent_scope must be AST_BlockScope");if(!(this.resolve()instanceof AST_Scope))throw new Error("must be contained within AST_Scope")}}},AST_Statement);function walk_body(e,n){e.body.forEach(function(e){e.walk(n)})}var AST_Block=DEFNODE("Block","body",{$documentation:"A body of statements (usually braced)",$propdoc:{body:"[AST_Statement*] an array of statements"},walk:function(e){var n=this;e.visit(n,function(){walk_body(n,e)})},_validate:function(){if("Block"==this.TYPE)throw new Error("should not instantiate AST_Block");this.body.forEach(function(e){if(!is_statement(e))throw new Error("body must contain AST_Statement")})}},AST_BlockScope),AST_BlockStatement=DEFNODE("BlockStatement",null,{$documentation:"A block statement"},AST_Block),AST_StatementWithBody=DEFNODE("StatementWithBody","body",{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"},_validate:function(){if("StatementWithBody"==this.TYPE)throw new Error("should not instantiate AST_StatementWithBody");if(!is_statement(this.body))throw new Error("body must be AST_Statement")}},AST_BlockScope),AST_LabeledStatement=DEFNODE("LabeledStatement","label",{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},walk:function(e){var n=this;e.visit(n,function(){n.label.walk(e),n.body.walk(e)})},clone:function(e){var n,t,r=this._clone(e);return e&&(n=r.label,t=this.label,r.walk(new TreeWalker(function(e){return e instanceof AST_LoopControl?e.label&&e.label.thedef===t?((e.label.thedef=n).references.push(e),!0):void 0:e instanceof AST_Scope||void 0}))),r},_validate:function(){if(!(this.label instanceof AST_Label))throw new Error("label must be AST_Label")}},AST_StatementWithBody),AST_IterationStatement=DEFNODE("IterationStatement",null,{$documentation:"Internal class.  All loops inherit from it.",_validate:function(){if("IterationStatement"==this.TYPE)throw new Error("should not instantiate AST_IterationStatement")}},AST_StatementWithBody),AST_DWLoop=DEFNODE("DWLoop","condition",{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"},_validate:function(){if("DWLoop"==this.TYPE)throw new Error("should not instantiate AST_DWLoop");must_be_expression(this,"condition")}},AST_IterationStatement),AST_Do=DEFNODE("Do",null,{$documentation:"A `do` statement",walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e),n.condition.walk(e)})}},AST_DWLoop),AST_While=DEFNODE("While",null,{$documentation:"A `while` statement",walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.body.walk(e)})}},AST_DWLoop),AST_For=DEFNODE("For","init condition step",{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},walk:function(e){var n=this;e.visit(n,function(){n.init&&n.init.walk(e),n.condition&&n.condition.walk(e),n.step&&n.step.walk(e),n.body.walk(e)})},_validate:function(){if(null!=this.init){if(!(this.init instanceof AST_Node))throw new Error("init must be AST_Node");if(is_statement(this.init)&&!(this.init instanceof AST_Definitions))throw new Error("init cannot be AST_Statement")}null!=this.condition&&must_be_expression(this,"condition"),null!=this.step&&must_be_expression(this,"step")}},AST_IterationStatement),AST_ForEnumeration=DEFNODE("ForEnumeration","init object",{$documentation:"Base class for enumeration loops, i.e. `for ... in`, `for ... of` & `for await ... of`",$propdoc:{init:"[AST_Node] the assignment target during iteration",object:"[AST_Node] the object to iterate over"},walk:function(e){var n=this;e.visit(n,function(){n.init.walk(e),n.object.walk(e),n.body.walk(e)})},_validate:function(){if("ForEnumeration"==this.TYPE)throw new Error("should not instantiate AST_ForEnumeration");if(this.init instanceof AST_Definitions){if(1!=this.init.definitions.length)throw new Error("init must have single declaration")}else validate_destructured(this.init,function(e){if(!(e instanceof AST_PropAccess||e instanceof AST_SymbolRef))throw new Error("init must be assignable: "+e.TYPE)});must_be_expression(this,"object")}},AST_IterationStatement),AST_ForIn=DEFNODE("ForIn",null,{$documentation:"A `for ... in` statement"},AST_ForEnumeration),AST_ForOf=DEFNODE("ForOf",null,{$documentation:"A `for ... of` statement"},AST_ForEnumeration),AST_ForAwaitOf=DEFNODE("ForAwaitOf",null,{$documentation:"A `for await ... of` statement"},AST_ForOf),AST_With=DEFNODE("With","expression",{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),n.body.walk(e)})},_validate:function(){must_be_expression(this,"expression")}},AST_StatementWithBody),AST_Scope=DEFNODE("Scope","uses_eval uses_with",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",uses_with:"[boolean/S] tells whether this scope uses the `with` statement"},pinned:function(){return this.uses_eval||this.uses_with},resolve:return_this,_validate:function(){if("Scope"==this.TYPE)throw new Error("should not instantiate AST_Scope")}},AST_Block),AST_Toplevel=DEFNODE("Toplevel","globals",{$documentation:"The toplevel scope",$propdoc:{globals:"[Dictionary/S] a map of name ---\x3e SymbolDef for all undeclared names"},wrap:function(e){var n=this.body;return parse(["(function(exports){'$ORIG';})(typeof ",e,"=='undefined'?(",e,"={}):",e,");"].join(""),{filename:"wrap="+JSON.stringify(e)}).transform(new TreeTransformer(function(e){if(e instanceof AST_Directive&&"$ORIG"==e.value)return List.splice(n)}))},enclose:function(e){var n=(e="string"!=typeof e?"":e).indexOf(":");n<0&&(n=e.length);var t=this.body;return parse(["(function(",e.slice(0,n),'){"$ORIG"})(',e.slice(n+1),")"].join(""),{filename:"enclose="+JSON.stringify(e)}).transform(new TreeTransformer(function(e){if(e instanceof AST_Directive&&"$ORIG"==e.value)return List.splice(t)}))}},AST_Scope),AST_Lambda=DEFNODE("Lambda","argnames length_read rest uses_arguments",{$documentation:"Base class for functions",$propdoc:{argnames:"[(AST_DefaultValue|AST_Destructured|AST_SymbolFunarg)*] array of function arguments and/or destructured literals",length_read:"[boolean/S] whether length property of this function is accessed",rest:"[(AST_Destructured|AST_SymbolFunarg)?] rest parameter, or null if absent",uses_arguments:"[boolean/S] whether this function accesses the arguments array"},each_argname:function(n){var t=new TreeWalker(function(e){return e instanceof AST_DefaultValue?(e.name.walk(t),!0):e instanceof AST_DestructuredKeyVal?(e.value.walk(t),!0):void(e instanceof AST_SymbolFunarg&&n(e))});this.argnames.forEach(function(e){e.walk(t)}),this.rest&&this.rest.walk(t)},walk:function(n){var e=this;n.visit(e,function(){e.name&&e.name.walk(n),e.argnames.forEach(function(e){e.walk(n)}),e.rest&&e.rest.walk(n),walk_body(e,n)})},_validate:function(){if("Lambda"==this.TYPE)throw new Error("should not instantiate AST_Lambda");this.argnames.forEach(function(e){validate_destructured(e,function(e){if(!(e instanceof AST_SymbolFunarg))throw new Error("argnames must be AST_SymbolFunarg[]")},!0)}),null!=this.rest&&validate_destructured(this.rest,function(e){if(!(e instanceof AST_SymbolFunarg))throw new Error("rest must be AST_SymbolFunarg")})}},AST_Scope),AST_Accessor=DEFNODE("Accessor",null,{$documentation:"A getter/setter function",_validate:function(){if(null!=this.name)throw new Error("name must be null")}},AST_Lambda),AST_LambdaExpression=DEFNODE("LambdaExpression","inlined",{$documentation:"Base class for function expressions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined"},_validate:function(){if("LambdaExpression"==this.TYPE)throw new Error("should not instantiate AST_LambdaExpression")}},AST_Lambda);function is_arrow(e){return e instanceof AST_Arrow||e instanceof AST_AsyncArrow}function is_async(e){return e instanceof AST_AsyncArrow||e instanceof AST_AsyncDefun||e instanceof AST_AsyncFunction||e instanceof AST_AsyncGeneratorDefun||e instanceof AST_AsyncGeneratorFunction}function is_generator(e){return e instanceof AST_AsyncGeneratorDefun||e instanceof AST_AsyncGeneratorFunction||e instanceof AST_GeneratorDefun||e instanceof AST_GeneratorFunction}function walk_lambda(e,n){is_arrow(e)&&e.value?e.value.walk(n):walk_body(e,n)}var AST_Arrow=DEFNODE("Arrow","value",{$documentation:"An arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(n){var e=this;n.visit(e,function(){e.argnames.forEach(function(e){e.walk(n)}),e.rest&&e.rest.walk(n),e.value?e.value.walk(n):walk_body(e,n)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(must_be_expression(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},AST_LambdaExpression),AST_AsyncArrow=DEFNODE("AsyncArrow","value",{$documentation:"An asynchronous arrow function expression",$propdoc:{value:"[AST_Node?] simple return expression, or null if using function body."},walk:function(n){var e=this;n.visit(e,function(){e.argnames.forEach(function(e){e.walk(n)}),e.rest&&e.rest.walk(n),e.value?e.value.walk(n):walk_body(e,n)})},_validate:function(){if(null!=this.name)throw new Error("name must be null");if(this.uses_arguments)throw new Error("uses_arguments must be false");if(null!=this.value&&(must_be_expression(this,"value"),this.body.length))throw new Error("body must be empty if value exists")}},AST_LambdaExpression),AST_AsyncFunction=DEFNODE("AsyncFunction","name",{$documentation:"An asynchronous function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof AST_SymbolLambda))throw new Error("name must be AST_SymbolLambda")}},AST_LambdaExpression),AST_AsyncGeneratorFunction=DEFNODE("AsyncGeneratorFunction","name",{$documentation:"An asynchronous generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof AST_SymbolLambda))throw new Error("name must be AST_SymbolLambda")}},AST_LambdaExpression),AST_Function=DEFNODE("Function","name",{$documentation:"A function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof AST_SymbolLambda))throw new Error("name must be AST_SymbolLambda")}},AST_LambdaExpression),AST_GeneratorFunction=DEFNODE("GeneratorFunction","name",{$documentation:"A generator function expression",$propdoc:{name:"[AST_SymbolLambda?] the name of this function, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof AST_SymbolLambda))throw new Error("name must be AST_SymbolLambda")}},AST_LambdaExpression),AST_LambdaDefinition=DEFNODE("LambdaDefinition","inlined name",{$documentation:"Base class for function definitions",$propdoc:{inlined:"[boolean/S] whether this function has been inlined",name:"[AST_SymbolDefun] the name of this function"},_validate:function(){if("LambdaDefinition"==this.TYPE)throw new Error("should not instantiate AST_LambdaDefinition");if(!(this.name instanceof AST_SymbolDefun))throw new Error("name must be AST_SymbolDefun")}},AST_Lambda),AST_AsyncDefun=DEFNODE("AsyncDefun",null,{$documentation:"An asynchronous function definition"},AST_LambdaDefinition),AST_AsyncGeneratorDefun=DEFNODE("AsyncGeneratorDefun",null,{$documentation:"An asynchronous generator function definition"},AST_LambdaDefinition),AST_Defun=DEFNODE("Defun",null,{$documentation:"A function definition"},AST_LambdaDefinition),AST_GeneratorDefun=DEFNODE("GeneratorDefun",null,{$documentation:"A generator function definition"},AST_LambdaDefinition),AST_Class=DEFNODE("Class","extends name properties",{$documentation:"Base class for class literals",$propdoc:{extends:"[AST_Node?] the super class, or null if not specified",properties:"[AST_ClassProperty*] array of class properties"},walk:function(n){var e=this;n.visit(e,function(){e.name&&e.name.walk(n),e.extends&&e.extends.walk(n),e.properties.forEach(function(e){e.walk(n)})})},_validate:function(){if("Class"==this.TYPE)throw new Error("should not instantiate AST_Class");null!=this.extends&&must_be_expression(this,"extends"),this.properties.forEach(function(e){if(!(e instanceof AST_ClassProperty))throw new Error("properties must contain AST_ClassProperty")})}},AST_BlockScope),AST_DefClass=DEFNODE("DefClass",null,{$documentation:"A class definition",$propdoc:{name:"[AST_SymbolDefClass] the name of this class"},_validate:function(){if(!(this.name instanceof AST_SymbolDefClass))throw new Error("name must be AST_SymbolDefClass")}},AST_Class),AST_ClassExpression=DEFNODE("ClassExpression",null,{$documentation:"A class expression",$propdoc:{name:"[AST_SymbolClass?] the name of this class, or null if not specified"},_validate:function(){if(null!=this.name&&!(this.name instanceof AST_SymbolClass))throw new Error("name must be AST_SymbolClass")}},AST_Class),AST_ClassProperty=DEFNODE("ClassProperty","key private static value",{$documentation:"Base class for `class` properties",$propdoc:{key:"[string|AST_Node] property name (AST_Node for computed property)",private:"[boolean] whether this is a private property",static:"[boolean] whether this is a static property",value:"[AST_Node?] property value (AST_Accessor for getters/setters, AST_LambdaExpression for methods, null if not specified for fields)"},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof AST_Node&&n.key.walk(e),n.value&&n.value.walk(e)})},_validate:function(){if("ClassProperty"==this.TYPE)throw new Error("should not instantiate AST_ClassProperty");if("string"!=typeof this.key){if(!(this.key instanceof AST_Node))throw new Error("key must be string or AST_Node");must_be_expression(this,"key")}if(null!=this.value&&!(this.value instanceof AST_Node))throw new Error("value must be AST_Node")}}),AST_ClassField=DEFNODE("ClassField",null,{$documentation:"A `class` field",_validate:function(){null!=this.value&&must_be_expression(this,"value")}},AST_ClassProperty),AST_ClassGetter=DEFNODE("ClassGetter",null,{$documentation:"A `class` getter",_validate:function(){if(!(this.value instanceof AST_Accessor))throw new Error("value must be AST_Accessor")}},AST_ClassProperty),AST_ClassSetter=DEFNODE("ClassSetter",null,{$documentation:"A `class` setter",_validate:function(){if(!(this.value instanceof AST_Accessor))throw new Error("value must be AST_Accessor")}},AST_ClassProperty),AST_ClassMethod=DEFNODE("ClassMethod",null,{$documentation:"A `class` method",_validate:function(){if(!(this.value instanceof AST_LambdaExpression))throw new Error("value must be AST_LambdaExpression");if(is_arrow(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of class method's lambda must be null")}},AST_ClassProperty),AST_Jump=DEFNODE("Jump",null,{$documentation:"Base class for “jumps” (for now that's `return`, `throw`, `break` and `continue`)",_validate:function(){if("Jump"==this.TYPE)throw new Error("should not instantiate AST_Jump")}},AST_Statement),AST_Exit=DEFNODE("Exit","value",{$documentation:"Base class for “exits” (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},walk:function(e){var n=this;e.visit(n,function(){n.value&&n.value.walk(e)})},_validate:function(){if("Exit"==this.TYPE)throw new Error("should not instantiate AST_Exit")}},AST_Jump),AST_Return=DEFNODE("Return",null,{$documentation:"A `return` statement",_validate:function(){null!=this.value&&must_be_expression(this,"value")}},AST_Exit),AST_Throw=DEFNODE("Throw",null,{$documentation:"A `throw` statement",_validate:function(){must_be_expression(this,"value")}},AST_Exit),AST_LoopControl=DEFNODE("LoopControl","label",{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},walk:function(e){var n=this;e.visit(n,function(){n.label&&n.label.walk(e)})},_validate:function(){if("LoopControl"==this.TYPE)throw new Error("should not instantiate AST_LoopControl");if(null!=this.label&&!(this.label instanceof AST_LabelRef))throw new Error("label must be AST_LabelRef")}},AST_Jump),AST_Break=DEFNODE("Break",null,{$documentation:"A `break` statement"},AST_LoopControl),AST_Continue=DEFNODE("Continue",null,{$documentation:"A `continue` statement"},AST_LoopControl),AST_If=DEFNODE("If","condition alternative",{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.body.walk(e),n.alternative&&n.alternative.walk(e)})},_validate:function(){if(must_be_expression(this,"condition"),null!=this.alternative&&!is_statement(this.alternative))throw new Error("alternative must be AST_Statement")}},AST_StatementWithBody),AST_Switch=DEFNODE("Switch","expression",{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` “discriminant”"},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),walk_body(n,e)})},_validate:function(){must_be_expression(this,"expression"),this.body.forEach(function(e){if(!(e instanceof AST_SwitchBranch))throw new Error("body must be AST_SwitchBranch[]")})}},AST_Block),AST_SwitchBranch=DEFNODE("SwitchBranch",null,{$documentation:"Base class for `switch` branches",_validate:function(){if("SwitchBranch"==this.TYPE)throw new Error("should not instantiate AST_SwitchBranch")}},AST_Block),AST_Default=DEFNODE("Default",null,{$documentation:"A `default` switch branch"},AST_SwitchBranch),AST_Case=DEFNODE("Case","expression",{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),walk_body(n,e)})},_validate:function(){must_be_expression(this,"expression")}},AST_SwitchBranch),AST_Try=DEFNODE("Try","bcatch bfinally",{$documentation:"A `try` statement",$propdoc:{bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},walk:function(e){var n=this;e.visit(n,function(){walk_body(n,e),n.bcatch&&n.bcatch.walk(e),n.bfinally&&n.bfinally.walk(e)})},_validate:function(){if(null!=this.bcatch&&!(this.bcatch instanceof AST_Catch))throw new Error("bcatch must be AST_Catch");if(null!=this.bfinally&&!(this.bfinally instanceof AST_Finally))throw new Error("bfinally must be AST_Finally")}},AST_Block),AST_Catch=DEFNODE("Catch","argname",{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[(AST_Destructured|AST_SymbolCatch)?] symbol for the exception, or null if not present"},walk:function(e){var n=this;e.visit(n,function(){n.argname&&n.argname.walk(e),walk_body(n,e)})},_validate:function(){null!=this.argname&&validate_destructured(this.argname,function(e){if(!(e instanceof AST_SymbolCatch))throw new Error("argname must be AST_SymbolCatch")})}},AST_Block),AST_Finally=DEFNODE("Finally",null,{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},AST_Block),AST_Definitions=DEFNODE("Definitions","definitions",{$documentation:"Base class for `var` nodes (variable declarations/initializations)",$propdoc:{definitions:"[AST_VarDef*] array of variable definitions"},walk:function(n){var e=this;n.visit(e,function(){e.definitions.forEach(function(e){e.walk(n)})})},_validate:function(){if("Definitions"==this.TYPE)throw new Error("should not instantiate AST_Definitions");if(this.definitions.length<1)throw new Error("must have at least one definition")}},AST_Statement),AST_Const=DEFNODE("Const",null,{$documentation:"A `const` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof AST_VarDef))throw new Error("definitions must be AST_VarDef[]");validate_destructured(e.name,function(e){if(!(e instanceof AST_SymbolConst))throw new Error("name must be AST_SymbolConst")})})}},AST_Definitions),AST_Let=DEFNODE("Let",null,{$documentation:"A `let` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof AST_VarDef))throw new Error("definitions must be AST_VarDef[]");validate_destructured(e.name,function(e){if(!(e instanceof AST_SymbolLet))throw new Error("name must be AST_SymbolLet")})})}},AST_Definitions),AST_Var=DEFNODE("Var",null,{$documentation:"A `var` statement",_validate:function(){this.definitions.forEach(function(e){if(!(e instanceof AST_VarDef))throw new Error("definitions must be AST_VarDef[]");validate_destructured(e.name,function(e){if(!(e instanceof AST_SymbolVar))throw new Error("name must be AST_SymbolVar")})})}},AST_Definitions),AST_VarDef=DEFNODE("VarDef","name value",{$documentation:"A variable declaration; only appears in a AST_Definitions node",$propdoc:{name:"[AST_Destructured|AST_SymbolVar] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},walk:function(e){var n=this;e.visit(n,function(){n.name.walk(e),n.value&&n.value.walk(e)})},_validate:function(){null!=this.value&&must_be_expression(this,"value")}}),AST_ExportDeclaration=DEFNODE("ExportDeclaration","body",{$documentation:"An `export` statement",$propdoc:{body:"[AST_DefClass|AST_Definitions|AST_LambdaDefinition] the statement to export"},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){if(!(this.body instanceof AST_DefClass||this.body instanceof AST_Definitions||this.body instanceof AST_LambdaDefinition))throw new Error("body must be AST_DefClass, AST_Definitions or AST_LambdaDefinition")}},AST_Statement),AST_ExportDefault=DEFNODE("ExportDefault","body",{$documentation:"An `export default` statement",$propdoc:{body:"[AST_Node] the default export"},walk:function(e){var n=this;e.visit(n,function(){n.body.walk(e)})},_validate:function(){this.body instanceof AST_DefClass||this.body instanceof AST_LambdaDefinition||must_be_expression(this,"body")}},AST_Statement),AST_ExportForeign=DEFNODE("ExportForeign","aliases keys path quote",{$documentation:"An `export ... from '...'` statement",$propdoc:{aliases:"[string*] array of aliases to export",keys:"[string*] array of keys to import",path:"[string] the path to import module",quote:"[string?] the original quote character"},_validate:function(){if(this.aliases.length!=this.keys.length)throw new Error("aliases:key length mismatch: "+this.aliases.length+" != "+this.keys.length);if(this.aliases.forEach(function(e){if("string"!=typeof e)throw new Error("aliases must contain string")}),this.keys.forEach(function(e){if("string"!=typeof e)throw new Error("keys must contain string")}),"string"!=typeof this.path)throw new Error("path must be string");if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}}},AST_Statement),AST_ExportReferences=DEFNODE("ExportReferences","properties",{$documentation:"An `export { ... }` statement",$propdoc:{properties:"[AST_SymbolExport*] array of aliases to export"},walk:function(n){var e=this;n.visit(e,function(){e.properties.forEach(function(e){e.walk(n)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof AST_SymbolExport))throw new Error("properties must contain AST_SymbolExport")})}},AST_Statement),AST_Import=DEFNODE("Import","all default path properties quote",{$documentation:"An `import` statement",$propdoc:{all:"[AST_SymbolImport?] the imported namespace, or null if not specified",default:"[AST_SymbolImport?] the alias for default `export`, or null if not specified",path:"[string] the path to import module",properties:"[(AST_SymbolImport*)?] array of aliases, or null if not specified",quote:"[string?] the original quote character"},walk:function(n){var e=this;n.visit(e,function(){e.all&&e.all.walk(n),e.default&&e.default.walk(n),e.properties&&e.properties.forEach(function(e){e.walk(n)})})},_validate:function(){if(null!=this.all){if(!(this.all instanceof AST_SymbolImport))throw new Error("all must be AST_SymbolImport");if(null!=this.properties)throw new Error("cannot import both * and {} in the same statement")}if(null!=this.default){if(!(this.default instanceof AST_SymbolImport))throw new Error("default must be AST_SymbolImport");if(""!==this.default.key)throw new Error("invalid default key: "+this.default.key)}if("string"!=typeof this.path)throw new Error("path must be string");if(null!=this.properties&&this.properties.forEach(function(e){if(!(e instanceof AST_SymbolImport))throw new Error("properties must contain AST_SymbolImport")}),null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}}},AST_Statement),AST_DefaultValue=DEFNODE("DefaultValue","name value",{$documentation:"A default value declaration",$propdoc:{name:"[AST_Destructured|AST_SymbolDeclaration] name of the variable",value:"[AST_Node] value to assign if variable is `undefined`"},walk:function(e){var n=this;e.visit(n,function(){n.name.walk(e),n.value.walk(e)})},_validate:function(){must_be_expression(this,"value")}});function must_be_expressions(e,n,t,r){e[n].forEach(function(e){validate_expression(e,n,!0,t,r)})}var AST_Call=DEFNODE("Call","args expression optional pure terminal",{$documentation:"A function call expression",$propdoc:{args:"[AST_Node*] array of arguments",expression:"[AST_Node] expression to invoke as function",optional:"[boolean] whether the expression is optional chaining",pure:"[string/S] marker for side-effect-free call expression",terminal:"[boolean] whether the chain has ended"},walk:function(n){var e=this;n.visit(e,function(){e.expression.walk(n),e.args.forEach(function(e){e.walk(n)})})},_validate:function(){must_be_expression(this,"expression"),must_be_expressions(this,"args",!0)}}),AST_New=DEFNODE("New",null,{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties",_validate:function(){if(this.optional)throw new Error("optional must be false");if(this.terminal)throw new Error("terminal must be false")}},AST_Call),AST_Sequence=DEFNODE("Sequence","expressions",{$documentation:"A sequence expression (comma-separated expressions)",$propdoc:{expressions:"[AST_Node*] array of expressions (at least two)"},walk:function(n){var e=this;n.visit(e,function(){e.expressions.forEach(function(e){e.walk(n)})})},_validate:function(){if(this.expressions.length<2)throw new Error("expressions must contain multiple elements");must_be_expressions(this,"expressions")}});function root_expr(e){for(;e instanceof AST_PropAccess;)e=e.expression;return e}var AST_PropAccess=DEFNODE("PropAccess","expression optional property terminal",{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the “container” expression",optional:"[boolean] whether the expression is optional chaining",property:"[AST_Node|string] the property to access.  For AST_Dot this is always a plain string, while for AST_Sub it's an arbitrary AST_Node",terminal:"[boolean] whether the chain has ended"},get_property:function(){var e=this.property;return e instanceof AST_Constant?e.value:e instanceof AST_UnaryPrefix&&"void"==e.operator&&e.expression instanceof AST_Constant?void 0:e},_validate:function(){if("PropAccess"==this.TYPE)throw new Error("should not instantiate AST_PropAccess");must_be_expression(this,"expression")}}),AST_Dot=DEFNODE("Dot",null,{$documentation:"A dotted property access expression",walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){if("string"!=typeof this.property)throw new Error("property must be string")}},AST_PropAccess),AST_Sub=DEFNODE("Sub",null,{$documentation:'Index-style property access, i.e. `a["foo"]`',walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e),n.property.walk(e)})},_validate:function(){must_be_expression(this,"property")}},AST_PropAccess),AST_Spread=DEFNODE("Spread","expression",{$documentation:"Spread expression in array/object literals or function calls",$propdoc:{expression:"[AST_Node] expression to be expanded"},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){must_be_expression(this,"expression")}}),AST_Unary=DEFNODE("Unary","operator expression",{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){if("Unary"==this.TYPE)throw new Error("should not instantiate AST_Unary");if("string"!=typeof this.operator)throw new Error("operator must be string");must_be_expression(this,"expression")}}),AST_UnaryPrefix=DEFNODE("UnaryPrefix",null,{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},AST_Unary),AST_UnaryPostfix=DEFNODE("UnaryPostfix",null,{$documentation:"Unary postfix expression, i.e. `i++`"},AST_Unary),AST_Binary=DEFNODE("Binary","operator left right",{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},walk:function(e){var n=this;e.visit(n,function(){n.left.walk(e),n.right.walk(e)})},_validate:function(){if(this instanceof AST_Assign||must_be_expression(this,"left"),"string"!=typeof this.operator)throw new Error("operator must be string");must_be_expression(this,"right")}}),AST_Conditional=DEFNODE("Conditional","condition consequent alternative",{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},walk:function(e){var n=this;e.visit(n,function(){n.condition.walk(e),n.consequent.walk(e),n.alternative.walk(e)})},_validate:function(){must_be_expression(this,"condition"),must_be_expression(this,"consequent"),must_be_expression(this,"alternative")}}),AST_Assign=DEFNODE("Assign",null,{$documentation:"An assignment expression — `a = b + 5`",_validate:function(){if(this.operator.indexOf("=")<0)throw new Error('operator must contain "="');if(this.left instanceof AST_Destructured){if("="!=this.operator)throw new Error("invalid destructuring operator: "+this.operator);validate_destructured(this.left,function(e){if(!(e instanceof AST_PropAccess||e instanceof AST_SymbolRef))throw new Error("left must be assignable: "+e.TYPE)})}}},AST_Binary),AST_Await=DEFNODE("Await","expression",{$documentation:"An await expression",$propdoc:{expression:"[AST_Node] expression with Promise to resolve on"},walk:function(e){var n=this;e.visit(n,function(){n.expression.walk(e)})},_validate:function(){must_be_expression(this,"expression")}}),AST_Yield=DEFNODE("Yield","expression nested",{$documentation:"A yield expression",$propdoc:{expression:"[AST_Node?] return value for iterator, or null if undefined",nested:"[boolean] whether to iterate over expression as generator"},walk:function(e){var n=this;e.visit(n,function(){n.expression&&n.expression.walk(e)})},_validate:function(){if(null!=this.expression)must_be_expression(this,"expression");else if(this.nested)throw new Error("yield* must contain expression")}}),AST_Array=DEFNODE("Array","elements",{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},walk:function(n){var e=this;n.visit(e,function(){e.elements.forEach(function(e){e.walk(n)})})},_validate:function(){must_be_expressions(this,"elements",!0,!0)}}),AST_Destructured=DEFNODE("Destructured","rest",{$documentation:"Base class for destructured literal",$propdoc:{rest:"[(AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)?] rest parameter, or null if absent"},_validate:function(){if("Destructured"==this.TYPE)throw new Error("should not instantiate AST_Destructured")}});function validate_destructured(e,n,t){if(e instanceof AST_DefaultValue&&t)return validate_destructured(e.name,n);if(e instanceof AST_Destructured){if(null!=e.rest&&validate_destructured(e.rest,n),e instanceof AST_DestructuredArray)return e.elements.forEach(function(e){e instanceof AST_Hole||validate_destructured(e,n,!0)});if(e instanceof AST_DestructuredObject)return e.properties.forEach(function(e){validate_destructured(e.value,n,!0)})}n(e)}var AST_DestructuredArray=DEFNODE("DestructuredArray","elements",{$documentation:"A destructured array literal",$propdoc:{elements:"[(AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef)*] array of elements"},walk:function(n){var e=this;n.visit(e,function(){e.elements.forEach(function(e){e.walk(n)}),e.rest&&e.rest.walk(n)})}},AST_Destructured),AST_DestructuredKeyVal=DEFNODE("DestructuredKeyVal","key value",{$documentation:"A key: value destructured property",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_DefaultValue|AST_Destructured|AST_SymbolDeclaration|AST_SymbolRef] property value"},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof AST_Node&&n.key.walk(e),n.value.walk(e)})},_validate:function(){if("string"!=typeof this.key){if(!(this.key instanceof AST_Node))throw new Error("key must be string or AST_Node");must_be_expression(this,"key")}if(!(this.value instanceof AST_Node))throw new Error("value must be AST_Node")}}),AST_DestructuredObject=DEFNODE("DestructuredObject","properties",{$documentation:"A destructured object literal",$propdoc:{properties:"[AST_DestructuredKeyVal*] array of properties"},walk:function(n){var e=this;n.visit(e,function(){e.properties.forEach(function(e){e.walk(n)}),e.rest&&e.rest.walk(n)})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof AST_DestructuredKeyVal))throw new Error("properties must be AST_DestructuredKeyVal[]")})}},AST_Destructured),AST_Object=DEFNODE("Object","properties",{$documentation:"An object literal",$propdoc:{properties:"[(AST_ObjectProperty|AST_Spread)*] array of properties"},walk:function(n){var e=this;n.visit(e,function(){e.properties.forEach(function(e){e.walk(n)})})},_validate:function(){this.properties.forEach(function(e){if(!(e instanceof AST_ObjectProperty||e instanceof AST_Spread))throw new Error("properties must contain AST_ObjectProperty and/or AST_Spread only")})}}),AST_ObjectProperty=DEFNODE("ObjectProperty","key value",{$documentation:"Base class for literal object properties",$propdoc:{key:"[string|AST_Node] property name.  For computed property this is an AST_Node.",value:"[AST_Node] property value.  For getters and setters this is an AST_Accessor."},walk:function(e){var n=this;e.visit(n,function(){n.key instanceof AST_Node&&n.key.walk(e),n.value.walk(e)})},_validate:function(){if("ObjectProperty"==this.TYPE)throw new Error("should not instantiate AST_ObjectProperty");if("string"!=typeof this.key){if(!(this.key instanceof AST_Node))throw new Error("key must be string or AST_Node");must_be_expression(this,"key")}if(!(this.value instanceof AST_Node))throw new Error("value must be AST_Node")}}),AST_ObjectKeyVal=DEFNODE("ObjectKeyVal",null,{$documentation:"A key: value object property",_validate:function(){must_be_expression(this,"value")}},AST_ObjectProperty),AST_ObjectMethod=DEFNODE("ObjectMethod",null,{$documentation:"A key(){} object property",_validate:function(){if(!(this.value instanceof AST_LambdaExpression))throw new Error("value must be AST_LambdaExpression");if(is_arrow(this.value))throw new Error("value cannot be AST_Arrow or AST_AsyncArrow");if(null!=this.value.name)throw new Error("name of object method's lambda must be null")}},AST_ObjectKeyVal),AST_ObjectSetter=DEFNODE("ObjectSetter",null,{$documentation:"An object setter property",_validate:function(){if(!(this.value instanceof AST_Accessor))throw new Error("value must be AST_Accessor")}},AST_ObjectProperty),AST_ObjectGetter=DEFNODE("ObjectGetter",null,{$documentation:"An object getter property",_validate:function(){if(!(this.value instanceof AST_Accessor))throw new Error("value must be AST_Accessor")}},AST_ObjectProperty),AST_Symbol=DEFNODE("Symbol","scope name thedef",{$documentation:"Base class for all symbols",$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},_validate:function(){if("Symbol"==this.TYPE)throw new Error("should not instantiate AST_Symbol");if("string"!=typeof this.name)throw new Error("name must be string")}}),AST_SymbolDeclaration=DEFNODE("SymbolDeclaration","init",{$documentation:"A declaration symbol (symbol in var, function name or argument, symbol in catch)"},AST_Symbol),AST_SymbolConst=DEFNODE("SymbolConst",null,{$documentation:"Symbol defining a constant"},AST_SymbolDeclaration),AST_SymbolImport=DEFNODE("SymbolImport","key",{$documentation:"Symbol defined by an `import` statement",$propdoc:{key:"[string] the original `export` name"},_validate:function(){if("string"!=typeof this.key)throw new Error("key must be string")}},AST_SymbolConst),AST_SymbolLet=DEFNODE("SymbolLet",null,{$documentation:"Symbol defining a lexical-scoped variable"},AST_SymbolDeclaration),AST_SymbolVar=DEFNODE("SymbolVar",null,{$documentation:"Symbol defining a variable"},AST_SymbolDeclaration),AST_SymbolFunarg=DEFNODE("SymbolFunarg",null,{$documentation:"Symbol naming a function argument"},AST_SymbolVar),AST_SymbolDefun=DEFNODE("SymbolDefun",null,{$documentation:"Symbol defining a function"},AST_SymbolDeclaration),AST_SymbolLambda=DEFNODE("SymbolLambda",null,{$documentation:"Symbol naming a function expression"},AST_SymbolDeclaration),AST_SymbolDefClass=DEFNODE("SymbolDefClass",null,{$documentation:"Symbol defining a class"},AST_SymbolConst),AST_SymbolClass=DEFNODE("SymbolClass",null,{$documentation:"Symbol naming a class expression"},AST_SymbolConst),AST_SymbolCatch=DEFNODE("SymbolCatch",null,{$documentation:"Symbol naming the exception in catch"},AST_SymbolDeclaration),AST_Label=DEFNODE("Label","references",{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LoopControl*] a list of nodes referring to this label"},initialize:function(){this.references=[],this.thedef=this}},AST_Symbol),AST_SymbolRef=DEFNODE("SymbolRef","fixed in_arg redef",{$documentation:"Reference to some symbol (not definition/declaration)"},AST_Symbol),AST_SymbolExport=DEFNODE("SymbolExport","alias",{$documentation:"Reference in an `export` statement",$propdoc:{alias:"[string] the `export` alias"},_validate:function(){if("string"!=typeof this.alias)throw new Error("alias must be string")}},AST_SymbolRef),AST_LabelRef=DEFNODE("LabelRef",null,{$documentation:"Reference to a label symbol"},AST_Symbol),AST_ObjectIdentity=DEFNODE("ObjectIdentity",null,{$documentation:"Base class for `super` & `this`",_validate:function(){if("ObjectIdentity"==this.TYPE)throw new Error("should not instantiate AST_ObjectIdentity")}},AST_Symbol),AST_Super=DEFNODE("Super",null,{$documentation:"The `super` symbol",_validate:function(){if("super"!==this.name)throw new Error('name must be "super"')}},AST_ObjectIdentity),AST_This=DEFNODE("This",null,{$documentation:"The `this` symbol",_validate:function(){if("This"==this.TYPE&&"this"!==this.name)throw new Error('name must be "this"')}},AST_ObjectIdentity),AST_NewTarget=DEFNODE("NewTarget",null,{$documentation:"The `new.target` symbol",initialize:function(){this.name="new.target"},_validate:function(){if("new.target"!==this.name)throw new Error('name must be "new.target": '+this.name)}},AST_This),AST_Template=DEFNODE("Template","expressions strings tag",{$documentation:"A template literal, i.e. tag`str1${expr1}...strN${exprN}strN+1`",$propdoc:{expressions:"[AST_Node*] the placeholder expressions",strings:"[string*] the raw text segments",tag:"[AST_Node] tag function, or null if absent"},walk:function(n){var e=this;n.visit(e,function(){e.tag&&e.tag.walk(n),e.expressions.forEach(function(e){e.walk(n)})})},_validate:function(){if(this.expressions.length+1!=this.strings.length)throw new Error("malformed template with "+this.expressions.length+" placeholder(s) but "+this.strings.length+" text segment(s)");must_be_expressions(this,"expressions"),this.strings.forEach(function(e){if("string"!=typeof e)throw new Error("strings must contain string")}),null!=this.tag&&must_be_expression(this,"tag")}}),AST_Constant=DEFNODE("Constant",null,{$documentation:"Base class for all constants",_validate:function(){if("Constant"==this.TYPE)throw new Error("should not instantiate AST_Constant")}}),AST_String=DEFNODE("String","quote value",{$documentation:"A string literal",$propdoc:{quote:"[string?] the original quote character",value:"[string] the contents of this string"},_validate:function(){if(null!=this.quote){if("string"!=typeof this.quote)throw new Error("quote must be string");if(!/^["']$/.test(this.quote))throw new Error("invalid quote: "+this.quote)}if("string"!=typeof this.value)throw new Error("value must be string")}},AST_Constant),AST_Number=DEFNODE("Number","value",{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value"},_validate:function(){if("number"!=typeof this.value)throw new Error("value must be number");if(!isFinite(this.value))throw new Error("value must be finite");if(this.value<0)throw new Error("value cannot be negative")}},AST_Constant),AST_BigInt=DEFNODE("BigInt","value",{$documentation:"A BigInt literal",$propdoc:{value:"[string] the numeric representation"},_validate:function(){if("string"!=typeof this.value)throw new Error("value must be string");if("-"==this.value[0])throw new Error("value cannot be negative")}},AST_Constant),AST_RegExp=DEFNODE("RegExp","value",{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"},_validate:function(){if(!(this.value instanceof RegExp))throw new Error("value must be RegExp")}},AST_Constant),AST_Atom=DEFNODE("Atom",null,{$documentation:"Base class for atoms",_validate:function(){if("Atom"==this.TYPE)throw new Error("should not instantiate AST_Atom")}},AST_Constant),AST_Null=DEFNODE("Null",null,{$documentation:"The `null` atom",value:null},AST_Atom),AST_NaN=DEFNODE("NaN",null,{$documentation:"The impossible value",value:NaN},AST_Atom),AST_Undefined=DEFNODE("Undefined",null,{$documentation:"The `undefined` value",value:void 0},AST_Atom),AST_Hole=DEFNODE("Hole",null,{$documentation:"A hole in an array",value:void 0},AST_Atom),AST_Infinity=DEFNODE("Infinity",null,{$documentation:"The `Infinity` value",value:1/0},AST_Atom),AST_Boolean=DEFNODE("Boolean",null,{$documentation:"Base class for booleans",_validate:function(){if("Boolean"==this.TYPE)throw new Error("should not instantiate AST_Boolean")}},AST_Atom),AST_False=DEFNODE("False",null,{$documentation:"The `false` atom",value:!1},AST_Boolean),AST_True=DEFNODE("True",null,{$documentation:"The `true` atom",value:!0},AST_Boolean);function TreeWalker(e){this.callback=e,this.directives=Object.create(null),this.stack=[]}function TreeTransformer(e,n){TreeWalker.call(this),this.before=e,this.after=n}TreeWalker.prototype={visit:function(e,n){this.push(e),!this.callback(e,n||noop)&&n&&n(),this.pop()},parent:function(e){return this.stack[this.stack.length-2-(e||0)]},push:function(e){e instanceof AST_Lambda?this.directives=Object.create(this.directives):e instanceof AST_Directive&&!this.directives[e.value]&&(this.directives[e.value]=e),this.stack.push(e)},pop:function(){this.stack.pop()instanceof AST_Lambda&&(this.directives=Object.getPrototypeOf(this.directives))},self:function(){return this.stack[this.stack.length-1]},find_parent:function(e){for(var n=this.stack,t=n.length-1;0<=--t;){var r=n[t];if(r instanceof e)return r}},has_directive:function(e){var n=this.directives[e];if(n)return n;var t=this.stack[this.stack.length-1];if(t instanceof AST_Scope)for(var r=0;r<t.body.length;++r){var i=t.body[r];if(!(i instanceof AST_Directive))break;if(i.value==e)return i}},loopcontrol_target:function(e){var n,t=this.stack;if(e.label){for(var r=t.length;0<=--r;)if((n=t[r])instanceof AST_LabeledStatement&&n.label.name==e.label.name)return n.body}else for(r=t.length;0<=--r;)if((n=t[r])instanceof AST_IterationStatement||e instanceof AST_Break&&n instanceof AST_Switch)return n},in_boolean_context:function(){for(var e,n=this.self(),t=0;e=this.parent(t);t++){if(e instanceof AST_Conditional&&e.condition===n||e instanceof AST_DWLoop&&e.condition===n||e instanceof AST_For&&e.condition===n||e instanceof AST_If&&e.condition===n||e instanceof AST_Return&&e.in_bool||e instanceof AST_Sequence&&e.tail_node()!==n||e instanceof AST_SimpleStatement||e instanceof AST_UnaryPrefix&&"!"==e.operator&&e.expression===n)return!0;if(e instanceof AST_Binary&&("&&"==e.operator||"||"==e.operator)||e instanceof AST_Conditional||e.tail_node()===n)n=e;else{if(!(e instanceof AST_Return))return!1;for(var r,i=e;r=this.parent(++t);i=r)if("Call"==r.TYPE){if(!(i instanceof AST_Lambda)||i.name)return!1}else if(i instanceof AST_Lambda)return!1}}}},TreeTransformer.prototype=new TreeWalker,function(e){function t(e,n){return List(e,function(e){return e.transform(n,!0)})}function n(e,n){e.argnames=t(e.argnames,n),e.rest&&(e.rest=e.rest.transform(n)),e.value?e.value=e.value.transform(n):e.body=t(e.body,n)}e(AST_Node,noop),e(AST_LabeledStatement,function(e,n){e.label=e.label.transform(n),e.body=e.body.transform(n)}),e(AST_SimpleStatement,function(e,n){e.body=e.body.transform(n)}),e(AST_Block,function(e,n){e.body=t(e.body,n)}),e(AST_Do,function(e,n){e.body=e.body.transform(n),e.condition=e.condition.transform(n)}),e(AST_While,function(e,n){e.condition=e.condition.transform(n),e.body=e.body.transform(n)}),e(AST_For,function(e,n){e.init&&(e.init=e.init.transform(n)),e.condition&&(e.condition=e.condition.transform(n)),e.step&&(e.step=e.step.transform(n)),e.body=e.body.transform(n)}),e(AST_ForEnumeration,function(e,n){e.init=e.init.transform(n),e.object=e.object.transform(n),e.body=e.body.transform(n)}),e(AST_With,function(e,n){e.expression=e.expression.transform(n),e.body=e.body.transform(n)}),e(AST_Exit,function(e,n){e.value&&(e.value=e.value.transform(n))}),e(AST_LoopControl,function(e,n){e.label&&(e.label=e.label.transform(n))}),e(AST_If,function(e,n){e.condition=e.condition.transform(n),e.body=e.body.transform(n),e.alternative&&(e.alternative=e.alternative.transform(n))}),e(AST_Switch,function(e,n){e.expression=e.expression.transform(n),e.body=t(e.body,n)}),e(AST_Case,function(e,n){e.expression=e.expression.transform(n),e.body=t(e.body,n)}),e(AST_Try,function(e,n){e.body=t(e.body,n),e.bcatch&&(e.bcatch=e.bcatch.transform(n)),e.bfinally&&(e.bfinally=e.bfinally.transform(n))}),e(AST_Catch,function(e,n){e.argname&&(e.argname=e.argname.transform(n)),e.body=t(e.body,n)}),e(AST_Definitions,function(e,n){e.definitions=t(e.definitions,n)}),e(AST_VarDef,function(e,n){e.name=e.name.transform(n),e.value&&(e.value=e.value.transform(n))}),e(AST_DefaultValue,function(e,n){e.name=e.name.transform(n),e.value=e.value.transform(n)}),e(AST_Lambda,function(e,n){e.name&&(e.name=e.name.transform(n)),e.argnames=t(e.argnames,n),e.rest&&(e.rest=e.rest.transform(n)),e.body=t(e.body,n)}),e(AST_Arrow,n),e(AST_AsyncArrow,n),e(AST_Class,function(e,n){e.name&&(e.name=e.name.transform(n)),e.extends&&(e.extends=e.extends.transform(n)),e.properties=t(e.properties,n)}),e(AST_ClassProperty,function(e,n){e.key instanceof AST_Node&&(e.key=e.key.transform(n)),e.value&&(e.value=e.value.transform(n))}),e(AST_Call,function(e,n){e.expression=e.expression.transform(n),e.args=t(e.args,n)}),e(AST_Sequence,function(e,n){e.expressions=t(e.expressions,n)}),e(AST_Await,function(e,n){e.expression=e.expression.transform(n)}),e(AST_Yield,function(e,n){e.expression&&(e.expression=e.expression.transform(n))}),e(AST_Dot,function(e,n){e.expression=e.expression.transform(n)}),e(AST_Sub,function(e,n){e.expression=e.expression.transform(n),e.property=e.property.transform(n)}),e(AST_Spread,function(e,n){e.expression=e.expression.transform(n)}),e(AST_Unary,function(e,n){e.expression=e.expression.transform(n)}),e(AST_Binary,function(e,n){e.left=e.left.transform(n),e.right=e.right.transform(n)}),e(AST_Conditional,function(e,n){e.condition=e.condition.transform(n),e.consequent=e.consequent.transform(n),e.alternative=e.alternative.transform(n)}),e(AST_Array,function(e,n){e.elements=t(e.elements,n)}),e(AST_DestructuredArray,function(e,n){e.elements=t(e.elements,n),e.rest&&(e.rest=e.rest.transform(n))}),e(AST_DestructuredKeyVal,function(e,n){e.key instanceof AST_Node&&(e.key=e.key.transform(n)),e.value=e.value.transform(n)}),e(AST_DestructuredObject,function(e,n){e.properties=t(e.properties,n),e.rest&&(e.rest=e.rest.transform(n))}),e(AST_Object,function(e,n){e.properties=t(e.properties,n)}),e(AST_ObjectProperty,function(e,n){e.key instanceof AST_Node&&(e.key=e.key.transform(n)),e.value=e.value.transform(n)}),e(AST_ExportDeclaration,function(e,n){e.body=e.body.transform(n)}),e(AST_ExportDefault,function(e,n){e.body=e.body.transform(n)}),e(AST_ExportReferences,function(e,n){e.properties=t(e.properties,n)}),e(AST_Import,function(e,n){e.all&&(e.all=e.all.transform(n)),e.default&&(e.default=e.default.transform(n)),e.properties&&(e.properties=t(e.properties,n))}),e(AST_Template,function(e,n){e.tag&&(e.tag=e.tag.transform(n)),e.expressions=t(e.expressions,n)})}(function(e,i){e.DEFMETHOD("transform",function(e,n){var t,r;return e.push(this),void 0===(t=e.before?e.before(this,i,n):t)&&(i(t=this,e),e.after&&void 0!==(r=e.after(t,n))&&(t=r)),e.pop(),t})});var RESERVED_WORDS=["abstract async await boolean byte char double enum export final float goto implements import int interface let long native package private protected public short static super synchronized this throws transient volatile yield",KEYWORDS_ATOM="false null true",KEYWORDS="break case catch class const continue debugger default delete do else extends finally for function if in instanceof new return switch throw try typeof var void while with"].join(" "),KEYWORDS_BEFORE_EXPRESSION="return new delete throw else case",KEYWORDS=makePredicate(KEYWORDS),RESERVED_WORDS=makePredicate(RESERVED_WORDS),KEYWORDS_BEFORE_EXPRESSION=makePredicate(KEYWORDS_BEFORE_EXPRESSION),KEYWORDS_ATOM=makePredicate(KEYWORDS_ATOM),RE_BIN_NUMBER=/^0b([01]+)$/i,RE_HEX_NUMBER=/^0x([0-9a-f]+)$/i,RE_OCT_NUMBER=/^0o?([0-7]+)$/i,OPERATORS=makePredicate(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%","**",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=","**=",">>=","<<=",">>>=","&=","|=","^=","&&","||","??","&&=","||=","??="]),NEWLINE_CHARS="\n\r\u2028\u2029",OPERATOR_CHARS="+-*&%=<>!?|~^",PUNC_OPENERS="[{(",PUNC_SEPARATORS=",;:",PUNC_CLOSERS=")}]",PUNC_AFTER_EXPRESSION=PUNC_SEPARATORS+PUNC_CLOSERS,PUNC_BEFORE_EXPRESSION=PUNC_OPENERS+PUNC_SEPARATORS,PUNC_CHARS=PUNC_BEFORE_EXPRESSION+"`"+PUNC_CLOSERS,WHITESPACE_CHARS=NEWLINE_CHARS+"  \t\f\v​             　\ufeff",NON_IDENTIFIER_CHARS=makePredicate(characters("./'\"#"+OPERATOR_CHARS+PUNC_CHARS+WHITESPACE_CHARS));function is_surrogate_pair_head(e){return 55296<=e&&e<=56319}function is_surrogate_pair_tail(e){return 56320<=e&&e<=57343}function is_digit(e){return 48<=e&&e<=57}function is_identifier_char(e){return!NON_IDENTIFIER_CHARS[e]}function is_identifier_string(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)}function decode_escape_sequence(e){switch(e[0]){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"u":if("{"==e[1]&&"}"==e.slice(-1))n=e.slice(2,-1);else{if(5!=e.length)return;n=e.slice(1)}return(n=parseInt(n,16))<0||isNaN(n)?void 0:n<65536?String.fromCharCode(n):1114111<n?void 0:String.fromCharCode(55232+(n>>10))+String.fromCharCode(56320+(1023&n));case"v":return"\v";case"x":return 3!=e.length?void 0:(n=parseInt(e.slice(1),16))<0||isNaN(n)?void 0:String.fromCharCode(n);var n;case"\r":case"\n":return"";default:return"0"==e?"\0":"0"<=e[0]&&e[0]<="9"?void 0:e}}function parse_js_number(e){if(n=RE_BIN_NUMBER.exec(e))return parseInt(n[1],2);if(n=RE_HEX_NUMBER.exec(e))return parseInt(n[1],16);if(n=RE_OCT_NUMBER.exec(e))return parseInt(n[1],8);var n=parseFloat(e);return n==e?n:void 0}function JS_Parse_Error(e,n,t,r,i){this.message=e,this.filename=n,this.line=t,this.col=r,this.pos=i}function js_error(e,n,t,r,i){throw new JS_Parse_Error(e,n,t,r,i)}function is_token(e,n,t){return e.type==n&&(null==t||e.value==t)}NEWLINE_CHARS=makePredicate(characters(NEWLINE_CHARS)),OPERATOR_CHARS=makePredicate(characters(OPERATOR_CHARS)),PUNC_AFTER_EXPRESSION=makePredicate(characters(PUNC_AFTER_EXPRESSION)),PUNC_BEFORE_EXPRESSION=makePredicate(characters(PUNC_BEFORE_EXPRESSION)),PUNC_CHARS=makePredicate(characters(PUNC_CHARS)),WHITESPACE_CHARS=makePredicate(characters(WHITESPACE_CHARS)),JS_Parse_Error.prototype=Object.create(Error.prototype),(JS_Parse_Error.prototype.constructor=JS_Parse_Error).prototype.name="SyntaxError",configure_error_stack(JS_Parse_Error);var EX_EOF={};function tokenizer(r,i,o,a){var s={text:r,filename:i,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[],directives:{},directive_stack:[],read_template:e("Unterminated template literal",function(e){for(var n="";;){var t=r();switch(t){case"\\":t+=r();break;case"`":return void e.push(n);case"$":if("{"==c())return u(),e.push(n),s.regex_allowed=!0}n+=t}function r(){var e=u(!0,!0);return"\r"==e?"\n":e}})},f=!1;function c(){return s.text.charAt(s.pos)}function u(e,n){var t=s.text.charAt(s.pos++);if(e&&!t)throw EX_EOF;return NEWLINE_CHARS[t]?(s.col=0,s.line++,n||(s.newline_before=!0),"\r"==t&&"\n"==c()&&(s.pos++,t="\n")):s.col++,t}function l(e){for(;0<e--;)u()}function _(e){return s.text.substr(s.pos,e.length)==e}function p(){s.tokline=s.line,s.tokcol=s.col,s.tokpos=s.pos}function S(e,n,t){s.regex_allowed="operator"==e&&!UNARY_POSTFIX[n]||"keyword"==e&&KEYWORDS_BEFORE_EXPRESSION[n]||"punc"==e&&PUNC_BEFORE_EXPRESSION[n],"punc"==e&&"."==n?f=!0:t||(f=!1);n={type:e,value:n,line:s.tokline,col:s.tokcol,pos:s.tokpos,endline:s.line,endcol:s.col,endpos:s.pos,nlb:s.newline_before,file:i};return/^(?:num|string|regexp)$/i.test(e)&&(n.raw=r.substring(n.pos,n.endpos)),t||(n.comments_before=s.comments_before,n.comments_after=s.comments_before=[]),s.newline_before=!1,new AST_Token(n)}function d(e){js_error(e,i,s.tokline,s.tokcol,s.tokpos)}function A(e){return/^0[0-7_]+$/.test(e)}function T(e){var t=!1,r=!1,i=!1,o="."==e,n=function(e){for(var n,t="";(n=c())&&e(n,t);)t+=u();return t}(function(e,n){switch(e){case"x":case"X":return!i&&(i=!0);case"e":case"E":return i||!t&&(t=r=!0);case"+":case"-":return r;case r=!1,".":return!(o||t||i||A(n))&&(o=!0)}return/[_0-9a-dfo]/i.test(e)});A(n=e?e+n:n)?x.has_directive("use strict")&&d("Legacy octal literals are not allowed in strict mode"):n=n.replace(i?/([1-9a-f]|.0)_(?=[0-9a-f])/gi:/([1-9]|.0)_(?=[0-9])/gi,"$1");e=parse_js_number(n);return isNaN(e)&&d("Invalid syntax: "+n),o||t||"n"!=c()?S("num",e):S("bigint",n.toLowerCase()+u())}function h(e){var n=u(!0,e);if("0"<=n&&n<="7")return function(e){var n=c();"0"<=n&&n<="7"&&(e+=u(!0))[0]<="3"&&"0"<=(n=c())&&n<="7"&&(e+=u(!0));if("0"===e)return"\0";0<e.length&&x.has_directive("use strict")&&d("Legacy octal escape sequences are not allowed in strict mode");return String.fromCharCode(parseInt(e,8))}(n);if("u"==n){var t=u(!0,e);if(n+=t,"{"!=t)n+=u(!0,e)+u(!0,e)+u(!0,e);else for(;n+=t=u(!0,e),"}"!=t;);}else"x"==n&&(n+=u(!0,e)+u(!0,e));var r=decode_escape_sequence(n);return"string"!=typeof r&&d("Invalid escape sequence: \\"+n),r}var m=e("Unterminated string constant",function(e){for(var n=u(),t="";;){var r=u(!0,!0);if("\\"==r)r=h(!0);else if(NEWLINE_CHARS[r])d("Unterminated string constant");else if(r==n)break;t+=r}var i=S("string",t);return i.quote=e,i});function v(e){var n,t=s.regex_allowed,r=function(){for(var e=s.text,n=s.pos;n<s.text.length;++n)if(NEWLINE_CHARS[e[n]])return n;return-1}();return-1==r?(n=s.text.substr(s.pos),s.pos=s.text.length):(n=s.text.substring(s.pos,r),s.pos=r),s.col=s.tokcol+(s.pos-s.tokpos),s.comments_before.push(S(e,n,!0)),s.regex_allowed=t,x}var y=e("Unterminated multiline comment",function(){var e=s.regex_allowed,n=function(e,n){if(e=s.text.indexOf(e,s.pos),n&&-1==e)throw EX_EOF;return e}("*/",!0),n=s.text.substring(s.pos,n).replace(/\r\n|\r|\u2028|\u2029/g,"\n");return l(n.length+2),s.comments_before.push(S("comment2",n,!0)),s.regex_allowed=e,x});function b(){for(var e,n,t=!1,r=!1,i="#"==c()?u():"";e=c();)if(t)"u"!=e&&d("Expecting UnicodeEscapeSequence -- uXXXX"),is_identifier_char(e=h())||d("Unicode char: "+e.charCodeAt(0)+" is not valid in identifier"),i+=e,t=!1;else if("\\"==e)r=t=!0,u();else{if(!is_identifier_char(e))break;i+=u()}return KEYWORDS[i]&&r&&(n=i.charCodeAt(0).toString(16).toUpperCase(),i="\\u"+"0000".substr(n.length)+n+i.slice(1)),i}var g=e("Unterminated regular expression",function(e){for(var n,t=!1,r=!1;n=u(!0);)if(NEWLINE_CHARS[n])d("Unexpected line terminator");else if(t)e+="\\"+n,t=!1;else if("["==n)r=!0,e+=n;else if("]"==n&&r)r=!1,e+=n;else{if("/"==n&&!r)break;"\\"==n?t=!0:e+=n}var i=b();try{var o=new RegExp(e,i);return o.raw_source=e,S("regexp",o)}catch(e){d(e.message)}});function w(e){return S("operator",function e(n){if(!c())return n;var t=n+c();return OPERATORS[t]?(u(),e(t)):n}(e||u()))}function e(n,t){return function(e){try{return t(e)}catch(e){if(e!==EX_EOF)throw e;d(n)}}}function x(e){if(null!=e)return g(e);for(a&&0==s.pos&&_("#!")&&(p(),l(2),v("comment5"));;){if(!function(){for(;WHITESPACE_CHARS[c()];)u()}(),p(),o){if(_("\x3c!--")){l(4),v("comment3");continue}if(_("--\x3e")&&s.newline_before){l(3),v("comment4");continue}}var n=c();if(!n)return S("eof");var t=n.charCodeAt(0);switch(t){case 34:case 39:return m(n);case 46:return function(){u();var e=c();if("."!=e)return is_digit(e.charCodeAt(0))?T("."):S("punc",".");for(var n=".";n+=".",u(),"."==c(););return S("operator",n)}();case 47:var r=function(){switch(u(),c()){case"/":return u(),v("comment1");case"*":return u(),y()}return s.regex_allowed?g(""):w("/")}();if(r===x)continue;return r}if(is_digit(t))return T();if(PUNC_CHARS[n])return S("punc",u());if(_("=>"))return S("punc",u()+u());if(OPERATOR_CHARS[n])return w();if(35==t||92==t||!NON_IDENTIFIER_CHARS[n])return t=void 0,t=b(),f?S("name",t):KEYWORDS_ATOM[t]?S("atom",t):KEYWORDS[t]?OPERATORS[t]?S("operator",t):S("keyword",t):S("name",t);break}d("Unexpected character '"+n+"'")}return x.context=function(e){return s=e?e:s},x.add_directive=function(e){s.directive_stack[s.directive_stack.length-1].push(e),s.directives[e]?s.directives[e]++:s.directives[e]=1},x.push_directives_stack=function(){s.directive_stack.push([])},x.pop_directives_stack=function(){for(var e=s.directive_stack.pop(),n=e.length;0<=--n;)s.directives[e[n]]--},x.has_directive=function(e){return 0<s.directives[e]},x}var UNARY_PREFIX=makePredicate("typeof void delete -- ++ ! ~ - +"),UNARY_POSTFIX=makePredicate("-- ++"),ASSIGNMENT=makePredicate("= += -= /= *= %= **= >>= <<= >>>= &= |= ^= &&= ||= ??="),PRECEDENCE=function(e,n){for(var t=0;t<e.length;)for(var r=e[t++],i=0;i<r.length;i++)n[r[i]]=t;return n}([["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"],["**"]],{}),ATOMIC_START_TOKEN=makePredicate("atom bigint num regexp string");function parse(e,l){l=defaults(l,{bare_returns:!1,expression:!1,filename:null,html5_comments:!0,shebang:!0,strict:!1,toplevel:null},!0);var S={input:"string"==typeof e?tokenizer(e,l.filename,l.html5_comments,l.shebang):e,in_async:!1,in_directives:!0,in_funarg:-1,in_function:0,in_generator:!1,in_loop:0,labels:[],peeked:null,prev:null,token:null};function d(e,n){return is_token(S.token,e,n)}function _(){return S.peeked||(S.peeked=S.input())}function A(){return S.prev=S.token,S.peeked?(S.token=S.peeked,S.peeked=null):S.token=S.input(),S.in_directives=S.in_directives&&("string"==S.token.type||d("punc",";")),S.token}function T(){return S.prev}function f(e,n,t,r){var i=S.input.context();js_error(e,i.filename,null!=n?n:i.tokline,null!=t?t:i.tokcol,null!=r?r:i.tokpos)}function a(e,n){f(n,e.line,e.col)}function t(e,n){return e+(void 0===n?"":" «"+n+"»")}function h(e){a(e=null==e?S.token:e,"Unexpected token: "+t(e.type,e.value))}function p(e,n){if(d(e,n))return A();a(S.token,"Unexpected token: "+t(S.token.type,S.token.value)+", expected: "+t(e,n))}function m(e){return p("punc",e)}function s(e){return e.nlb||!all(e.comments_before,function(e){return!e.nlb})}function c(){return!l.strict&&(d("eof")||d("punc","}")||s(S.token))}function v(e){d("punc",";")?A():e||c()||m(";")}function u(){m("(");var e=re();return m(")"),e}function n(r){return function(){var e=S.token,n=r.apply(null,arguments),t=T();return n.start=e,n.end=t,n}}function y(){(d("operator","/")||d("operator","/="))&&(S.peeked=null,S.token=S.input(S.token.value.substr(1)))}S.token=A();var b=n(function(){switch(y(),S.token.type){case"string":var e=S.in_directives,n=re();return e&&(n instanceof AST_String?(o=n.start.raw.slice(1,-1),S.input.add_directive(o),n.value=o):S.in_directives=e=!1),v(),e?new AST_Directive(n):new AST_SimpleStatement({body:n});case"num":case"bigint":case"regexp":case"operator":case"atom":return g();case"name":switch(S.token.value){case"async":if(is_token(_(),"keyword","function"))return A(),A(),d("operator","*")?(A(),O(AST_AsyncGeneratorDefun)):O(AST_AsyncDefun);break;case"await":if(S.in_async)return g();break;case"export":return A(),function(){if(d("operator","*")){A();var e="*";d("name","as")&&(A(),C()||p("name"),e=S.token.value,A()),p("name","from");var n=S.token;return p("string"),v(),new AST_ExportForeign({aliases:[e],keys:["*"],path:n.value,quote:n.quote})}if(d("punc","{")){A();for(var t=[],r=[];C();){var i=S.token;A(),r.push(i),d("name","as")?(A(),C()||p("name"),t.push(S.token.value),A()):t.push(i.value),d("punc","}")||m(",")}if(m("}"),d("name","from")){A();n=S.token;return p("string"),v(),new AST_ExportForeign({aliases:t,keys:r.map(function(e){return e.value}),path:n.value,quote:n.quote})}return v(),new AST_ExportReferences({properties:r.map(function(e,n){is_token(e,"name")||a(e,"Name expected");e=H(AST_SymbolExport,e);return e.alias=t[n],e})})}if(d("keyword","default")){A();e=S.token,n=function(){if(d("name","async")){if(is_token(_(),"keyword","function"))return A(),A(),d("operator","*")?(A(),N(AST_AsyncGeneratorDefun,O(AST_AsyncGeneratorFunction))):N(AST_AsyncDefun,O(AST_AsyncFunction))}else if(d("keyword"))switch(S.token.value){case"class":return A(),N(AST_DefClass,E(AST_ClassExpression));case"function":return(A(),d("operator","*"))?(A(),N(AST_GeneratorDefun,O(AST_GeneratorFunction))):N(AST_Defun,O(AST_Function))}}();return n?(n.start=e,n.end=T()):(y(),n=re(),v()),new AST_ExportDefault({body:n})}return new AST_ExportDeclaration({body:F()})}();case"import":var t=_();if("punc"!=t.type||!/^[(.]$/.test(t.value))return A(),function(){var e,n=null,t=Y(AST_SymbolImport,!0),r=null;if(t?(t.key="",d("punc",",")&&A()):!d("string"))if(d("operator","*"))A(),p("name","as"),(n=Y(AST_SymbolImport)).key="*";else{for(m("{"),r=[];C();){var i;is_token(_(),"name","as")?(i=S.token.value,A(),A(),(e=Y(AST_SymbolImport)).key=i):(e=Y(AST_SymbolImport)).key=e.name,r.push(e),d("punc","}")||m(",")}m("}")}(n||t||r)&&p("name","from");var o=S.token;return p("string"),v(),new AST_Import({all:n,default:t,path:o.value,properties:r,quote:o.quote})}();break;case"let":if(B()){A();var r=j();return v(),r}break;case"yield":if(S.in_generator)return g()}return(is_token(_(),"punc",":")?function(){var n=Y(AST_Label);all(S.labels,function(e){return e.name!=n.name})||f("Label "+n.name+" defined twice");m(":"),S.labels.push(n);var e=b();S.labels.pop(),e instanceof AST_IterationStatement||n.references.forEach(function(e){e instanceof AST_Continue&&a(e.label.start,"Continue label `"+n.name+"` must refer to IterationStatement")});return new AST_LabeledStatement({body:e,label:n})}:g)();case"punc":switch(S.token.value){case"{":return new AST_BlockStatement({start:S.token,body:P(),end:T()});case"[":case"(":case"`":return g();case";":return S.in_directives=!1,A(),new AST_EmptyStatement;default:h()}case"keyword":switch(S.token.value){case"break":return A(),w(AST_Break);case"class":return A(),E(AST_DefClass);case"const":A();r=L();return v(),r;case"continue":return A(),w(AST_Continue);case"debugger":return A(),v(),new AST_Debugger;case"do":A();n=ie(b);p("keyword","while");var i=u();return v(!0),new AST_Do({body:n,condition:i});case"while":return A(),new AST_While({condition:u(),body:ie(b)});case"for":return A(),function(){var e=d("name","await")&&A();m("(");var n,t=null;if((e||!d("punc",";"))&&(t=d("keyword","const")?(A(),L(!0)):d("name","let")&&B()?(A(),j(!0)):d("keyword","var")?(A(),q(!0)):re(!0),e?(p("name","of"),n=AST_ForAwaitOf):d("operator","in")?(A(),n=AST_ForIn):d("name","of")&&(A(),n=AST_ForOf),n))return t instanceof AST_Definitions?(1<t.definitions.length&&a(t.start,"Only one variable declaration allowed in for..in/of loop"),n!==AST_ForIn&&t.definitions[0].value&&a(t.definitions[0].value.start,"No initializers allowed in for..of loop")):ee(t)||(t=ne(t))instanceof AST_Destructured||a(t.start,"Invalid left-hand side in for..in/of loop"),function(e,n){y();var t=re();return m(")"),new e({init:n,object:t,body:ie(b)})}(n,t);return function(e){m(";");var n=d("punc",";")?null:re();m(";");var t=d("punc",")")?null:re();return m(")"),new AST_For({init:e,condition:n,step:t,body:ie(b)})}(t)}();case"function":return(A(),d("operator","*"))?(A(),O(AST_GeneratorDefun)):O(AST_Defun);case"if":return A(),function(){var e=u(),n=b(),t=null;d("keyword","else")&&(A(),t=b());return new AST_If({condition:e,body:n,alternative:t})}();case"return":0!=S.in_function||l.bare_returns||f("'return' outside of function"),A();var o=null;return d("punc",";")?A():c()||(o=re(),v()),new AST_Return({value:o});case"switch":return A(),new AST_Switch({expression:u(),body:ie(R)});case"throw":A(),s(S.token)&&f("Illegal newline after 'throw'");o=re();return v(),new AST_Throw({value:o});case"try":return A(),function(){var e=P(),n=null,t=null;{var r;d("keyword","catch")&&(i=S.token,A(),r=null,d("punc","(")&&(A(),r=G(AST_SymbolCatch),m(")")),n=new AST_Catch({start:i,argname:r,body:P(),end:T()}))}{var i;d("keyword","finally")&&(i=S.token,A(),t=new AST_Finally({start:i,body:P(),end:T()}))}n||t||f("Missing catch/finally blocks");return new AST_Try({body:e,bcatch:n,bfinally:t})}();case"var":A();r=q();return v(),r;case"with":return S.input.has_directive("use strict")&&f("Strict mode may not include a with statement"),A(),new AST_With({expression:u(),body:b()})}}h()});function g(){var e=re();return v(),new AST_SimpleStatement({body:e})}function w(e){var n,t=null;null!=(t=!c()?Y(AST_LabelRef,!0):t)?((n=find_if(function(e){return e.name==t.name},S.labels))||a(t.start,"Undefined label "+t.name),t.thedef=n):0==S.in_loop&&f(e.TYPE+" not inside a loop or switch"),v();e=new e({label:t});return n&&n.references.push(e),e}function x(e){if(d("name",e)){e=_();if(e&&!is_token(e,"operator","=")&&!("punc"==e.type&&/^[(;}]$/.test(e.value)||s(e)))return A()}}function E(e){var n=S.in_async,t=S.in_generator;S.input.push_directives_stack(),S.input.add_directive("use strict");var r=e===AST_DefClass?Y(AST_SymbolDefClass):Y(AST_SymbolClass,!0),i=null;d("keyword","extends")&&(A(),y(),i=I(!0)),m("{");for(var o=[];!d("punc","}");)if(d("punc",";"))A();else{var a=S.token,s=!!x("static"),f=x("async");if(d("operator","*")){A();var c=d("name")&&/^#/.test(S.token.value),u=z(),l=S.token,_=O(f?AST_AsyncGeneratorFunction:AST_GeneratorFunction);_.start=l,_.end=T(),o.push(new AST_ClassMethod({start:a,static:s,private:c,key:u,value:_,end:T()}))}else{c=d("name")&&/^#/.test(S.token.value),u=z();if(d("punc","(")){l=S.token,_=O(f?AST_AsyncFunction:AST_Function);_.start=l,_.end=T(),o.push(new AST_ClassMethod({start:a,static:s,private:c,key:u,value:_,end:T()}))}else{f&&h(f);f=null;if(d("operator","="))A(),S.in_async=!1,S.in_generator=!1,f=te(),S.in_generator=t,S.in_async=n;else if(!d("punc",";")&&!d("punc","}")){var p=null;switch(u){case"get":p=AST_ClassGetter;break;case"set":p=AST_ClassSetter}if(p){o.push(new p({start:a,static:s,private:d("name")&&/^#/.test(S.token.value),key:z(),value:V(),end:T()}));continue}}v(),o.push(new AST_ClassField({start:a,static:s,private:c,key:u,value:f,end:T()}))}}}return A(),S.input.pop_directives_stack(),S.in_generator=t,S.in_async=n,new e({extends:i,name:r,properties:o})}function k(e){if(e instanceof AST_Array){var n=null;return e.elements[e.elements.length-1]instanceof AST_Spread&&(n=k(e.elements.pop().expression)),new AST_DestructuredArray({start:e.start,elements:e.elements.map(k),rest:n,end:e.end})}if(e instanceof AST_Assign)return new AST_DefaultValue({start:e.start,name:k(e.left),value:e.right,end:e.end});if(e instanceof AST_DefaultValue)return e.name=k(e.name),e;if(e instanceof AST_DestructuredArray)return e.elements=e.elements.map(k),e.rest&&(e.rest=k(e.rest)),e;if(e instanceof AST_DestructuredObject)return e.properties.forEach(function(e){e.value=k(e.value)}),e.rest&&(e.rest=k(e.rest)),e;if(e instanceof AST_Hole)return e;if(e instanceof AST_Object){n=null;return e.properties[e.properties.length-1]instanceof AST_Spread&&(n=k(e.properties.pop().expression)),new AST_DestructuredObject({start:e.start,properties:e.properties.map(function(e){return e instanceof AST_ObjectKeyVal||a(e.start,"Invalid destructuring assignment"),new AST_DestructuredKeyVal({start:e.start,key:e.key,value:k(e.value),end:e.end})}),rest:n,end:e.end})}return e instanceof AST_SymbolFunarg?e:e instanceof AST_SymbolRef?new AST_SymbolFunarg(e):e instanceof AST_Yield?new AST_SymbolFunarg({start:e.start,name:"yield",end:e.end}):void a(e.start,"Invalid arrow parameter")}function D(e,n,t){var r=S.in_async,i=S.in_generator;S.in_async=t,S.in_generator=!1;var o=S.in_funarg;S.in_funarg=S.in_function;var a,s=e.map(k),f=(f=e.rest||null)&&k(f);S.in_funarg=o,m("=>");var c=S.in_loop,u=S.labels;++S.in_function,S.in_directives=!0,S.input.push_directives_stack(),S.in_loop=0,S.labels=[];e=d("punc","{")?(a=P(),null):(a=[],y(),te()),o=S.input.has_directive("use strict");S.input.pop_directives_stack(),--S.in_function,S.in_loop=c,S.labels=u,S.in_generator=i,S.in_async=r;e=new(t?AST_AsyncArrow:AST_Arrow)({start:n,argnames:s,rest:f,body:a,value:e,end:T()});return o&&e.each_argname(W),e}var O=function(e){var n,t=S.in_async,r=S.in_generator;/Defun$/.test(e.TYPE)?(n=Y(AST_SymbolDefun),S.in_async=/^Async/.test(e.TYPE),S.in_generator=/Generator/.test(e.TYPE)):(S.in_async=/^Async/.test(e.TYPE),S.in_generator=/Generator/.test(e.TYPE),n=Y(AST_SymbolLambda,!0)),!n||e===AST_Accessor||n instanceof AST_SymbolDeclaration||h(T()),m("(");var i=S.in_funarg;S.in_funarg=S.in_function;var o=U(")",!l.strict,!1,function(){return K(AST_SymbolFunarg)});S.in_funarg=i;var a=S.in_loop,s=S.labels;++S.in_function,S.in_directives=!0,S.input.push_directives_stack(),S.in_loop=0,S.labels=[];var f=P(),i=S.input.has_directive("use strict");S.input.pop_directives_stack(),--S.in_function,S.in_loop=a,S.labels=s,S.in_generator=r,S.in_async=t;f=new e({name:n,argnames:o,rest:o.rest||null,body:f});return i&&(n&&W(n),f.each_argname(W)),f};function C(){return d("name")||is_identifier_string(S.token.value)}function N(e,n){return n.name&&((n=new e(n)).name=new(e===AST_DefClass?AST_SymbolDefClass:AST_SymbolDefun)(n.name)),n}var F=n(function(){if(d("name"))switch(S.token.value){case"async":return(A(),p("keyword","function"),d("operator","*"))?(A(),O(AST_AsyncGeneratorDefun)):O(AST_AsyncDefun);case"let":A();var e=j();return v(),e}else if(d("keyword"))switch(S.token.value){case"class":return A(),E(AST_DefClass);case"const":A();e=L();return v(),e;case"function":return(A(),d("operator","*"))?(A(),O(AST_GeneratorDefun)):O(AST_Defun);case"var":A();e=q();return v(),e}h()});function P(){m("{");for(var e=[];!d("punc","}");)d("eof")&&m("}"),e.push(b());return A(),e}function R(){m("{");for(var e,n,t,r,i=[];!d("punc","}");)d("eof")&&m("}"),d("keyword","case")?(e&&(e.end=T()),n=[],e=new AST_Case({start:(r=S.token,A(),r),expression:re(),body:n}),i.push(e),m(":")):d("keyword","default")?(e&&(e.end=T()),t&&f("More than one default clause in switch statement"),n=[],e=new AST_Default({start:(r=S.token,A(),m(":"),r),body:n}),i.push(e),t=e):(n||h(),n.push(b()));return e&&(e.end=T()),A(),i}function r(e,n){for(var t=[];;){var r=S.token,i=G(e),o=null;if(d("operator","=")?(A(),o=te(n)):!n&&(e===AST_SymbolConst||i instanceof AST_Destructured)&&f("Missing initializer in declaration"),t.push(new AST_VarDef({start:r,name:i,value:o,end:T()})),!d("punc",","))break;A()}return t}function B(){var e=_();return is_token(e,"name")||is_token(e,"punc","[")||is_token(e,"punc","{")}var L=function(e){return new AST_Const({start:T(),definitions:r(AST_SymbolConst,e),end:T()})},j=function(e){return new AST_Let({start:T(),definitions:r(AST_SymbolLet,e),end:T()})},q=function(e){return new AST_Var({start:T(),definitions:r(AST_SymbolVar,e),end:T()})};var I=function(e){if(d("operator","new"))return u=e,t=S.token,p("operator","new"),(c=d("punc",".")&&is_token(_(),"name","target")?(A(),A(),new AST_NewTarget):(n=I(!1),c=d("punc","(")?(A(),U(")",!l.strict)):[],new AST_New({expression:n,args:c}))).start=t,c.end=T(),J(c,u);var n,t,r=S.token;if(d("punc")){switch(r.value){case"`":return J(X(null),e);case"(":if(A(),d("punc",")"))return A(),D([],r);var i=re(!1,!0),o=r.comments_before.length;[].unshift.apply(i.start.comments_before,r.comments_before),r.comments_before.length=0,r.comments_before=i.start.comments_before,0==(r.comments_before_length=o)&&0<r.comments_before.length&&((a=r.comments_before[0]).nlb||(a.nlb=r.nlb,r.nlb=!1)),r.comments_after=i.start.comments_after,i.start=r,m(")");var a=T();return a.comments_before=i.end.comments_before,a.comments_after.forEach(function(e){i.end.comments_after.push(e),e.nlb&&(S.token.nlb=!0)}),a.comments_after.length=0,a.comments_after=i.end.comments_after,i.end=a,d("punc","=>")?D(i instanceof AST_Sequence?i.expressions:[i],r):J(i,e);case"[":return J($(),e);case"{":return J(M(),e)}h()}if(d("keyword"))switch(r.value){case"class":A();var s=E(AST_ClassExpression);return s.start=r,s.end=T(),J(s,e);case"function":return A(),(f=d("operator","*")?(A(),O(AST_GeneratorFunction)):O(AST_Function)).start=r,f.end=T(),J(f,e)}if(d("name")){var f,c=H(AST_SymbolRef,r);if(A(),"async"==c.name){if(d("keyword","function"))return A(),(f=d("operator","*")?(A(),O(AST_AsyncGeneratorFunction)):O(AST_AsyncFunction)).start=r,f.end=T(),J(f,e);if(d("name")&&is_token(_(),"punc","=>"))return r=S.token,c=H(AST_SymbolRef,r),A(),D([c],r,!0);if(d("punc","(")){var u=J(c,e);if(!d("punc","=>"))return u;u=u.args;return u[u.length-1]instanceof AST_Spread&&(u.rest=u.pop().expression),D(u,r,!0)}}return d("punc","=>")?D([c],r):J(c,e)}if(ATOMIC_START_TOKEN[S.token.type])return J(function(){var e,n=S.token,t=n.value;switch(n.type){case"num":isFinite(t)?e=new AST_Number({value:t}):(e=new AST_Infinity,t<0&&(e=new AST_UnaryPrefix({operator:"-",expression:e})));break;case"bigint":e=new AST_BigInt({value:t});break;case"string":e=new AST_String({value:t,quote:n.quote});break;case"regexp":e=new AST_RegExp({value:t});break;case"atom":switch(t){case"false":e=new AST_False;break;case"true":e=new AST_True;break;case"null":e=new AST_Null;break;default:h()}break;default:h()}return A(),e.start=e.end=n,e}(),e);h()};function U(e,n,t,r){r=r||te;for(var i=!0,o=[];!d("punc",e)&&(i?i=!1:m(","),!n||!d("punc",e));)if(t&&d("punc",","))o.push(new AST_Hole({start:S.token,end:S.token}));else if(d("operator","...")){if(r!==te){A(),o.rest=r(),o.rest instanceof AST_DefaultValue&&a(o.rest.start,"Invalid rest parameter");break}o.push(new AST_Spread({start:S.token,expression:(A(),r()),end:T()}))}else o.push(r());return m(e),o}var $=n(function(){return m("["),new AST_Array({elements:U("]",!l.strict,!0)})}),V=n(function(){return O(AST_Accessor)}),M=n(function(){m("{");for(var e=!0,n=[];!d("punc","}")&&(e?e=!1:m(","),l.strict||!d("punc","}"));){var t=S.token;if(d("operator","*")){A();var r=z(),i=S.token,o=O(AST_GeneratorFunction);o.start=i,o.end=T(),n.push(new AST_ObjectMethod({start:t,key:r,value:o,end:T()}))}else if(d("operator","..."))A(),n.push(new AST_Spread({start:t,expression:te(),end:T()}));else if(is_token(_(),"operator","=")){o=Y(AST_SymbolRef);A(),n.push(new AST_ObjectKeyVal({start:t,key:t.value,value:new AST_Assign({start:t,left:o,operator:"=",right:te(),end:T()}),end:T()}))}else if(is_token(_(),"punc",",")||is_token(_(),"punc","}"))n.push(new AST_ObjectKeyVal({start:t,key:t.value,value:Y(AST_SymbolRef),end:T()}));else{r=z();if(d("punc","(")){var a=S.token;(f=O(AST_Function)).start=a,f.end=T(),n.push(new AST_ObjectMethod({start:t,key:r,value:f,end:T()}))}else if(d("punc",":"))A(),n.push(new AST_ObjectKeyVal({start:t,key:r,value:te(),end:T()}));else{if("name"==t.type)switch(r){case"async":var s=d("operator","*")&&A();r=z();var f,a=S.token;(f=O(s?AST_AsyncGeneratorFunction:AST_AsyncFunction)).start=a,f.end=T(),n.push(new AST_ObjectMethod({start:t,key:r,value:f,end:T()}));continue;case"get":n.push(new AST_ObjectGetter({start:t,key:z(),value:V(),end:T()}));continue;case"set":n.push(new AST_ObjectSetter({start:t,key:z(),value:V(),end:T()}));continue}h()}}}return A(),new AST_Object({properties:n})});function z(){var e=S.token;switch(e.type){case"operator":KEYWORDS[e.value]||h();case"num":case"string":case"name":case"keyword":case"atom":return A(),""+e.value;case"punc":m("[");var n=te();return m("]"),n;default:h()}}function H(e,n){var t=n.value;switch(t){case"await":S.in_async&&h(n);break;case"super":e=AST_Super;break;case"this":e=AST_This;break;case"yield":S.in_generator&&h(n)}return new e({name:""+t,start:n,end:n})}function W(e){"arguments"!=e.name&&"eval"!=e.name&&"let"!=e.name||a(e.start,"Unexpected "+e.name+" in strict mode")}function Y(e,n){if(!d("name"))return n||f("Name expected"),null;e=H(e,S.token);return S.input.has_directive("use strict")&&e instanceof AST_SymbolDeclaration&&W(e),A(),e}function G(e){var n=S.token;if(d("punc","[")){A();var t=U("]",!l.strict,!0,function(){return K(e)});return new AST_DestructuredArray({start:n,elements:t,rest:t.rest||null,end:T()})}if(d("punc","{")){A();for(var r=!0,i=[],o=null;!d("punc","}")&&(r?r=!1:m(","),l.strict||!d("punc","}"));){var a=S.token;if(d("punc","[")||is_token(_(),"punc",":")){var s=z();m(":"),i.push(new AST_DestructuredKeyVal({start:a,key:s,value:K(e),end:T()}))}else{if(d("operator","...")){A(),o=G(e);break}s=Y(e);d("operator","=")&&(A(),s=new AST_DefaultValue({start:s.start,name:s,value:te(),end:T()})),i.push(new AST_DestructuredKeyVal({start:a,key:a.value,value:s,end:T()}))}}return m("}"),new AST_DestructuredObject({start:n,properties:i,rest:o,end:T()})}return Y(e)}function K(e){var n=S.token,e=G(e);return d("operator","=")?(A(),new AST_DefaultValue({start:n,name:e,value:te(),end:T()})):e}function X(e){for(var n=e?e.start:S.token,t=S.input.context().read_template,r=[],i=[];t(r);)A(),i.push(re()),d("punc","}")||h();return A(),new AST_Template({start:n,expressions:i,strings:r,tag:e,end:T()})}function J(e,n){for(var t=e.start,r=null;;)if(d("operator","?")&&is_token(_(),"punc",".")&&(A(),A(),r=e),d("punc","[")){A();var i=re();m("]"),e=new AST_Sub({start:t,optional:r===e,expression:e,property:i,end:T()})}else if(n&&d("punc","("))A(),e=new AST_Call({start:t,optional:r===e,expression:e,args:U(")",!l.strict),end:T()});else if(r===e||d("punc","."))r!==e&&A(),e=new AST_Dot({start:t,optional:r===e,expression:e,property:(i=void 0,i=S.token.value,p("name"),i),end:T()});else{if(!d("punc","`"))break;r&&f("Invalid template on optional chain"),e=X(e)}if(r&&(e.terminal=!0),e instanceof AST_Call&&!e.pure)for(var o=(t=e.start).comments_before,a=HOP(t,"comments_before_length")?t.comments_before_length:o.length;0<=--a;){var s=/[@#]__PURE__/.exec(o[a].value);if(s){e.pure=s[0];break}}return e}function o(e){var n=S.token;if(S.in_async&&d("name","await"))return S.in_funarg===S.in_function&&f("Invalid use of await in function argument"),S.input.context().regex_allowed=!0,A(),new AST_Await({start:n,expression:o(e),end:T()});if(S.in_generator&&d("name","yield")){S.in_funarg===S.in_function&&f("Invalid use of yield in function argument"),S.input.context().regex_allowed=!0,A();var t=null,r=!1;return d("operator","*")?(A(),t=te(e),r=!0):(d("punc")?PUNC_AFTER_EXPRESSION[S.token.value]:c())||(t=te(e)),new AST_Yield({start:n,expression:t,nested:r,end:T()})}if(d("operator")&&UNARY_PREFIX[n.value]){A(),y();e=Q(AST_UnaryPrefix,n,o(e));return e.start=n,e.end=T(),e}for(var i=I(!0);d("operator")&&UNARY_POSTFIX[S.token.value]&&!s(S.token);)(i=Q(AST_UnaryPostfix,S.token,i)).start=n,i.end=S.token,A();return i}function Q(e,n,t){var r=n.value;switch(r){case"++":case"--":ee(t)||a(n,"Invalid use of "+r+" operator");break;case"delete":t instanceof AST_SymbolRef&&S.input.has_directive("use strict")&&a(t.start,"Calling delete on expression not allowed in strict mode")}return new e({operator:r,expression:t})}var Z=function(e,n,t){var r=d("operator")?S.token.value:null,i=null!=(r="in"==r&&t?null:r)?PRECEDENCE[r]:null;if(null!=i&&n<i){A();i=Z(o(t),"**"==r?i-1:i,t);return Z(new AST_Binary({start:e.start,left:e,operator:r,right:i,end:i.end}),n,t)}return e};var i=function(e){var n=S.token,t=Z(o(r=e),0,r);if(d("operator","?")){A();var r=te();return m(":"),new AST_Conditional({start:n,condition:t,consequent:r,alternative:te(e),end:T()})}return t};function ee(e){return e instanceof AST_PropAccess&&!e.optional||e instanceof AST_SymbolRef}function ne(e){if(e instanceof AST_Array){var n=null;if(e.elements[e.elements.length-1]instanceof AST_Spread&&!((n=ne(e.elements.pop().expression))instanceof AST_Destructured||ee(n)))return e;var t=e.elements.map(ne);return all(t,function(e){return e instanceof AST_DefaultValue||e instanceof AST_Destructured||e instanceof AST_Hole||ee(e)})?new AST_DestructuredArray({start:e.start,elements:t,rest:n,end:e.end}):e}if(e instanceof AST_Assign){t=ne(e.left);return t instanceof AST_Destructured||ee(t)?new AST_DefaultValue({start:e.start,name:t,value:e.right,end:e.end}):e}if(!(e instanceof AST_Object))return e;n=null;if(e.properties[e.properties.length-1]instanceof AST_Spread&&!((n=ne(e.properties.pop().expression))instanceof AST_Destructured||ee(n)))return e;for(var r=[],i=0;i<e.properties.length;i++){var o=e.properties[i];if(!(o instanceof AST_ObjectKeyVal))return e;var a=ne(o.value);if(!(a instanceof AST_DefaultValue||a instanceof AST_Destructured||ee(a)))return e;r.push(new AST_DestructuredKeyVal({start:o.start,key:o.key,value:a,end:o.end}))}return new AST_DestructuredObject({start:e.start,properties:r,rest:n,end:e.end})}function te(e){var n=S.token,t=i(e),r=S.token.value;if(d("operator")&&ASSIGNMENT[r]){if(ee(t)||"="==r&&(t=ne(t))instanceof AST_Destructured)return A(),new AST_Assign({start:n,left:t,operator:r,right:te(e),end:T()});f("Invalid assignment")}return t}function re(e,n){for(var t=S.token,r=[];;){if(n&&d("operator","...")){A(),r.rest=G(AST_SymbolFunarg);break}if(r.push(te(e)),!d("punc",","))break;if(A(),n&&d("punc",")")&&is_token(_(),"punc","=>"))break}return 1!=r.length||r.rest?new AST_Sequence({start:t,expressions:r,end:T()}):r[0]}function ie(e){++S.in_loop;e=e();return--S.in_loop,e}if(l.expression){y();e=re();return p("eof"),e}return function(){var e=S.token,n=[];for(S.input.push_directives_stack();!d("eof");)n.push(b());S.input.pop_directives_stack();var t=T()||e,r=l.toplevel;return r?(r.body=r.body.concat(n),r.end=t):r=new AST_Toplevel({start:e,body:n,end:t}),r}()}function SymbolDef(e,n,t,r){this.eliminated=0,this.exported=!1,this.global=!1,this.id=e,this.init=r,this.mangled_name=null,this.name=t.name,this.orig=[t],this.references=[],this.replaced=0,this.scope=n,this.undeclared=!1}SymbolDef.prototype={forEach:function(e){this.orig.forEach(e),this.references.forEach(e)},mangle:function(e){var n,t=e.cache&&e.cache.props;this.global&&t&&t.has(this.name)?this.mangled_name=t.get(this.name):this.mangled_name||this.unmangleable(e)||(n=this.redefined(),this.mangled_name=n?n.mangled_name||n.name:next_mangled_name(this,e),this.global&&t&&t.set(this.name,this.mangled_name))},redefined:function(){var e=this.defun;if(e){var n=this.name,e=e.variables.get(n)||e instanceof AST_Toplevel&&e.globals.get(n)||this.orig[0]instanceof AST_SymbolConst&&find_if(function(e){return e.name==n},e.enclosed);return e&&e!==this?e.redefined()||e:void 0}},unmangleable:function(e){return this.global&&!e.toplevel||this.exported||this.undeclared||!e.eval&&this.scope.pinned()||e.keep_fnames&&(this.orig[0]instanceof AST_SymbolClass||this.orig[0]instanceof AST_SymbolDefClass||this.orig[0]instanceof AST_SymbolDefun||this.orig[0]instanceof AST_SymbolLambda)}};var unary_side_effects=makePredicate("delete ++ --");function is_lhs(e,n){return n instanceof AST_Assign?n.left===e&&e:n instanceof AST_DefaultValue?n.name===e&&e:n instanceof AST_Destructured||n instanceof AST_DestructuredKeyVal?e:n instanceof AST_ForEnumeration?n.init===e&&e:n instanceof AST_Unary?unary_side_effects[n.operator]&&n.expression:void 0}function init_block_vars(e,n){e.enclosed=[],e.parent_scope=n,e.functions=new Dictionary,e.variables=new Dictionary,n&&(e.make_def=n.make_def)}function init_scope_vars(e,n){init_block_vars(e,n),e.uses_eval=!1,e.uses_with=!1}function names_in_use(e,n){var t,r=e.names_in_use;return r||(e.cname=-1,e.cname_holes=[],e.names_in_use=r=Object.create(null),t=n.cache&&n.cache.props,e.enclosed.forEach(function(e){e.unmangleable(n)&&(r[e.name]=!0),e.global&&t&&t.has(e.name)&&(r[t.get(e.name)]=!0)})),r}function next_mangled_name(e,r){var n,t=e.scope,i=names_in_use(t,r),o=t.cname_holes,a=Object.create(null),s=[t];e.forEach(function(e){var n=e.scope;do{if(!(s.indexOf(n)<0))break;for(var t in names_in_use(n,r))a[t]=!0}while(s.push(n),n=n.parent_scope)});for(var f=0;f<o.length;f++)if(n=base54(o[f]),!a[n])return o.splice(f,1),i[n]=!0,n;for(;;)if(!(i[n=base54(++t.cname)]||RESERVED_WORDS[n]||r.reserved.has[n])){if(!a[n])break;o.push(t.cname)}return i[n]=!0,n}function _default_mangler_options(e){return e=defaults(e,{eval:!1,ie:!1,keep_fnames:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1}),Array.isArray(e.reserved)||(e.reserved=[]),push_uniq(e.reserved,"arguments"),e.reserved.has=makePredicate(e.reserved),e}AST_Toplevel.DEFMETHOD("figure_out_scope",function(u){u=defaults(u,{cache:null,ie:!1});var l=this,s=null,f=!1,t=0,c=l.parent_scope=null,_=new TreeWalker(function(r,e){if(r instanceof AST_DefClass){var n=f;return f=_.parent()instanceof AST_ExportDeclaration,r.name.walk(_),f=n,o(function(){r.extends&&r.extends.walk(_),r.properties.forEach(function(e){e.walk(_)})}),!0}if(r instanceof AST_Definitions){n=f;return f=_.parent()instanceof AST_ExportDeclaration,e(),f=n,!0}if(r instanceof AST_LambdaDefinition){n=f;return f=_.parent()instanceof AST_ExportDeclaration,r.name.walk(_),f=n,o(function(){r.argnames.forEach(function(e){e.walk(_)}),r.rest&&r.rest.walk(_),walk_body(r,_)}),!0}if(r instanceof AST_SwitchBranch)return r.init_vars(c),e(),!0;if(r instanceof AST_Try)return o(function(){walk_body(r,_)}),r.bcatch&&r.bcatch.walk(_),r.bfinally&&r.bfinally.walk(_),!0;if(r instanceof AST_With){for(var t=c;!(t=t.resolve()).uses_with&&(t.uses_with=!0,t=t.parent_scope););return o(e),!0}if(r instanceof AST_BlockScope)return o(e),!0;var i;function o(e){r.init_vars(c);var n=s,t=c;r instanceof AST_Scope&&(s=r),c=r,e(),c=t,s=n}function a(e,n){e!==n&&(r.mark_enclosed(u),n=n.find_variable(r.name),r.thedef!==n&&((r.thedef=n).orig.push(r),r.mark_enclosed(u)))}r instanceof AST_Symbol&&(r.scope=c),r instanceof AST_Label&&((r.thedef=r).references=[]),r instanceof AST_SymbolCatch?c.def_variable(r).defun=s:r instanceof AST_SymbolConst?((i=c.def_variable(r)).defun=s,f&&(i.exported=!0)):r instanceof AST_SymbolDefun?(i=s.def_function(r,_.parent()),f&&(i.exported=!0),a(s,c)):r instanceof AST_SymbolFunarg?(s.def_variable(r),a(s,c)):r instanceof AST_SymbolLambda?(i=s.def_function(r,"arguments"==r.name?void 0:s),u.ie&&(i.defun=s.parent_scope.resolve())):r instanceof AST_SymbolLet?(i=c.def_variable(r),f&&(i.exported=!0)):r instanceof AST_SymbolVar&&(i=s.def_variable(r,r instanceof AST_SymbolImport?void 0:null),f&&(i.exported=!0),a(s,c))});l.make_def=function(e,n){return new SymbolDef(++t,this,e,n)},l.walk(_),l.globals=new Dictionary;var p=[],_=new TreeWalker(function(e){if(e instanceof AST_Catch)return e.argname instanceof AST_Destructured?(p.push(e),e.argname.walk(_),p.pop(),walk_body(e,_),!0):void 0;if(e instanceof AST_Lambda)return p.push(e),e.argnames.forEach(function(e){e.walk(_)}),e.rest&&e.rest.walk(_),p.pop(),walk_lambda(e,_),!0;if(e instanceof AST_LoopControl)return e.label&&e.label.thedef.references.push(e),!0;if(e instanceof AST_SymbolDeclaration){var n,t=e.definition();if(t.preinit=t.references.length,e instanceof AST_SymbolCatch){if(n=t.redefined())for(var r=e.scope;r&&(push_uniq(r.enclosed,n),r!==n.scope);r=r.parent_scope);}else e instanceof AST_SymbolConst&&(n=t.redefined())&&(n.const_redefs=!0);return"arguments"!=e.name?!0:((i=e instanceof AST_SymbolVar&&_.parent())instanceof AST_VarDef&&!i.value||(a=e.scope.resolve().find_variable("arguments"))&&S(a)&&(a.scope.uses_arguments=3),!0)}if(e instanceof AST_SymbolRef){for(var i,o=e.name,a=e.scope.find_variable(o),s=p.length;0<s&&a&&!((s=p.lastIndexOf(a.scope,s-1))<0);){var f=a.orig[0];if(f instanceof AST_SymbolCatch||f instanceof AST_SymbolFunarg||f instanceof AST_SymbolLambda){e.in_arg=!0;break}a=a.scope.parent_scope.find_variable(o)}if(a?"arguments"==o&&S(a)&&(is_lhs(e,i=_.parent())?a.scope.uses_arguments=3:a.scope.uses_arguments<2&&!(i instanceof AST_PropAccess&&i.expression===e)?a.scope.uses_arguments=2:a.scope.uses_arguments||(a.scope.uses_arguments=!0)):a=l.def_global(e),"eval"==o)if("Call"==(i=_.parent()).TYPE&&i.expression===e)for(r=e.scope;!(r=r.resolve()).uses_eval&&(r.uses_eval=!0,r=r.parent_scope););else a.undeclared&&(l.uses_eval=!0);if(a.init instanceof AST_LambdaDefinition&&a.scope!==a.init.name.scope){var c=e.scope;do{if(c===a.init.name.scope)break}while(c=c.parent_scope);c||(a.init=void 0)}return e.thedef=a,e.reference(u),!0}});function S(e){return e.orig[0]instanceof AST_SymbolFunarg&&!(e.orig[1]instanceof AST_SymbolFunarg||e.orig[2]instanceof AST_SymbolFunarg)&&!is_arrow(e.scope)}function r(e,n){var t=e.name,r=e.thedef;if(all(r.orig,function(e){return!(e instanceof AST_SymbolConst||e instanceof AST_SymbolLet)})){var i,o=n.find_variable(t);return(o?(i=o.redefined())&&(o=i):o=l.globals.get(t),o?o.orig.push(e):o=n.def_variable(e),o.undeclared&&l.variables.set(t,o),"arguments"==t&&S(r)&&e instanceof AST_SymbolLambda)?1:(r.defun=o.scope,r.forEach(function(e){e.redef=r,e.thedef=o,e.reference(u)}),1)}}l.walk(_),u.ie&&l.walk(new TreeWalker(function(e){if(e instanceof AST_SymbolCatch){var n=e.thedef.defun;return r(e,n=n.name instanceof AST_SymbolLambda&&n.name.name==e.name?n.parent_scope.resolve():n),!0}if(e instanceof AST_SymbolLambda){n=e.thedef;return r(e,e.scope.parent_scope.resolve())?void 0!==e.thedef.init?e.thedef.init=!1:n.init&&(e.thedef.init=n.init):delete n.defun,!0}}))}),AST_Toplevel.DEFMETHOD("def_global",function(e){var n=this.globals,t=e.name;if(n.has(t))return n.get(t);e=this.make_def(e);return e.undeclared=!0,e.global=!0,n.set(t,e),e}),AST_BlockScope.DEFMETHOD("init_vars",function(e){init_block_vars(this,e)}),AST_Scope.DEFMETHOD("init_vars",function(e){init_scope_vars(this,e)}),AST_Arrow.DEFMETHOD("init_vars",function(e){return init_scope_vars(this,e),this}),AST_AsyncArrow.DEFMETHOD("init_vars",function(e){init_scope_vars(this,e)}),AST_Lambda.DEFMETHOD("init_vars",function(e){return init_scope_vars(this,e),this.uses_arguments=!1,this.def_variable(new AST_SymbolFunarg({name:"arguments",start:this.start,end:this.end})),this}),AST_Symbol.DEFMETHOD("mark_enclosed",function(e){for(var n=this.definition(),t=this.scope;t&&(push_uniq(t.enclosed,n),e?e.keep_fnames&&t.functions.each(function(e){push_uniq(n.scope.enclosed,e)}):delete t._var_names,t!==n.scope);t=t.parent_scope);}),AST_Symbol.DEFMETHOD("reference",function(e){this.definition().references.push(this),this.mark_enclosed(e)}),AST_BlockScope.DEFMETHOD("find_variable",function(e){return this.variables.get(e)||this.parent_scope&&this.parent_scope.find_variable(e)}),AST_BlockScope.DEFMETHOD("def_function",function(e,n){var t=this.def_variable(e,n);return(!t.init||t.init instanceof AST_LambdaDefinition)&&(t.init=n),this.functions.set(e.name,t),t}),AST_BlockScope.DEFMETHOD("def_variable",function(e,n){var t=this.variables.get(e.name);return t?(t.orig.push(e),t.init instanceof AST_LambdaExpression&&(t.init=n)):(t=this.make_def(e,n),this.variables.set(e.name,t),t.global=!this.parent_scope),e.thedef=t}),AST_Symbol.DEFMETHOD("unmangleable",function(e){var n=this.definition();return!n||n.unmangleable(e)}),AST_Label.DEFMETHOD("unmangleable",return_false),AST_Symbol.DEFMETHOD("definition",function(){return this.thedef}),AST_Toplevel.DEFMETHOD("mangle_names",function(o){o=_default_mangler_options(o);var n,i=-1;o.cache&&o.cache.props&&(n=names_in_use(this,o),o.cache.props.each(function(e){n[e]=!0}));var a=[],s=new TreeWalker(function(n,e){if(n instanceof AST_LabeledStatement){var t=i;return e(),o.v8&&function(e){var n,t=0;for(;n=e.parent(t++);){if(n instanceof AST_Block)return n instanceof AST_Toplevel&&!o.toplevel;if(n instanceof AST_LabeledStatement)return!0}}(s)||(i=t),!0}var r;if(n instanceof AST_BlockScope)return o.webkit&&n instanceof AST_IterationStatement&&n.init instanceof AST_Let&&n.init.definitions.forEach(function(e){e.name.match_symbol(function(e){var n,t,r;e instanceof AST_SymbolLet&&(n=e.definition(),t=e.scope.parent_scope,r=t.def_variable(e),e.thedef=n,t.to_mangle.push(r),n.redefined=function(){return r})})},!0),n.to_mangle=[],n.variables.each(function(e){!function(n){var e=n.orig[0],t=n.redefined();if(!t){if(!(e instanceof AST_SymbolConst))return!1;var r=n.scope.resolve();if(n.scope===r)return!1;if(n.scope.parent_scope.find_variable(e.name))return!1;t=r.def_variable(e),r.to_mangle.push(t)}a.push(n),n.references.forEach(i),(e instanceof AST_SymbolCatch||e instanceof AST_SymbolConst)&&i(e);return!0;function i(e){e.thedef=t,e.reference(o),e.thedef=n}}(e)&&n.to_mangle.push(e)}),e(),o.cache&&n instanceof AST_Toplevel&&n.globals.each(f),n instanceof AST_Defun&&s.has_directive("use asm")&&((e=new AST_SymbolRef(n.name)).scope=n,e.reference(o)),n.to_mangle.forEach(f),!0;if(n instanceof AST_Label){for(;r=base54(++i),RESERVED_WORDS[r];);return n.mangled_name=r,!0}});function f(e){o.reserved.has[e.name]||e.mangle(o)}this.walk(s),a.forEach(f)}),AST_Toplevel.DEFMETHOD("find_colliding_names",function(t){var r=t.cache&&t.cache.props,n=Object.create(RESERVED_WORDS);return t.reserved.forEach(i),this.globals.each(o),this.walk(new TreeWalker(function(e){e instanceof AST_BlockScope&&e.variables.each(o)})),n;function i(e){n[e]=!0}function o(e){var n=e.name;if(e.global&&r&&r.has(n))n=r.get(n);else if(!e.unmangleable(t))return;i(n)}}),AST_Toplevel.DEFMETHOD("expand_names",function(r){base54.reset(),base54.sort(),r=_default_mangler_options(r);var i=this.find_colliding_names(r),o=0;function n(n){var e,t;n.global&&r.cache||n.unmangleable(r)||r.reserved.has[n.name]||(e=n.redefined(),t=e?e.rename||e.name:function(){for(var e;e=base54(o++),i[e];);return e}(),n.rename=t,n.forEach(function(e){e.definition()===n&&(e.name=t)}))}this.globals.each(n),this.walk(new TreeWalker(function(e){e instanceof AST_BlockScope&&e.variables.each(n)}))}),AST_Node.DEFMETHOD("tail_node",return_this),AST_Sequence.DEFMETHOD("tail_node",function(){return this.expressions[this.expressions.length-1]}),AST_Toplevel.DEFMETHOD("compute_char_frequency",function(e){e=_default_mangler_options(e),base54.reset();var n=AST_Symbol.prototype.add_source_map;try{AST_Symbol.prototype.add_source_map=function(){this.unmangleable(e)||base54.consider(this.name,-1)},e.properties&&(AST_Dot.prototype.add_source_map=function(){base54.consider(this.property,-1)},AST_Sub.prototype.add_source_map=function(){!function e(n){n instanceof AST_String?base54.consider(n.value,-1):n instanceof AST_Conditional?(e(n.consequent),e(n.alternative)):n instanceof AST_Sequence&&e(n.tail_node())}(this.property)}),base54.consider(this.print_to_string(),1)}finally{AST_Symbol.prototype.add_source_map=n,delete AST_Dot.prototype.add_source_map,delete AST_Sub.prototype.add_source_map}base54.sort()});var base54=function(){var i=Object.create(null);function e(e){for(var n=[],t=0;t<e.length;t++){var r=e[t];n.push(r),i[r]=-.01*t}return n}var t,r,n=e("0123456789"),o=e("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_");function a(){t=null,r=Object.create(i)}function s(e,n){return r[n]-r[e]}function f(e){var n=o[e%54];for(e=Math.floor(e/54);0<=--e;e>>=6)n+=t[63&e];return n}return f.consider=function(e,n){for(var t=e.length;0<=--t;)r[e[t]]+=n},f.sort=function(){t=o.sort(s).concat(n).sort(s)},(f.reset=a)(),f}();function Compressor(e,n){if(!(this instanceof Compressor))return new Compressor(e,n);TreeTransformer.call(this,this.before,this.after),this.options=defaults(e,{annotations:!n,arguments:!n,arrows:!n,assignments:!n,awaits:!n,booleans:!n,collapse_vars:!n,comparisons:!n,conditionals:!n,dead_code:!n,default_values:!n,directives:!n,drop_console:!1,drop_debugger:!n,evaluate:!n,expression:!1,functions:!n,global_defs:!1,hoist_exports:!n,hoist_funs:!1,hoist_props:!n,hoist_vars:!1,ie:!1,if_return:!n,imports:!n,inline:!n,join_vars:!n,keep_fargs:n,keep_fnames:!1,keep_infinity:!1,loops:!n,merge_vars:!n,negate_iife:!n,objects:!n,optional_chains:!n,passes:1,properties:!n,pure_funcs:null,pure_getters:!n&&"strict",reduce_funcs:!n,reduce_vars:!n,rests:!n,sequences:!n,side_effects:!n,spreads:!n,strings:!n,switches:!n,templates:!n,top_retain:null,toplevel:!(!e||!e.top_retain),typeofs:!n,unsafe:!1,unsafe_comps:!1,unsafe_Function:!1,unsafe_math:!1,unsafe_proto:!1,unsafe_regexp:!1,unsafe_undefined:!1,unused:!n,varify:!n,webkit:!1,yields:!n},!0);n=this.options.evaluate;this.eval_threshold=/eager/.test(n)?1/0:+n;var t=this.options.global_defs;if("object"==typeof t)for(var r in t)/^@/.test(r)&&HOP(t,r)&&(t[r.slice(1)]=parse(t[r],{expression:!0}));!0===this.options.inline&&(this.options.inline=3),this.drop_fargs=this.options.keep_fargs?return_false:function(e,n){if(e.length_read)return!1;var t=e.name;if(!t)return n&&"Call"==n.TYPE&&n.expression===e;if(t.fixed_value()!==e)return!1;t=t.definition();if(t.direct_access)return!1;t=t.escaped;return t&&1!=t.depth};var i=this.options.pure_funcs;"function"==typeof i?this.pure_funcs=i:"string"==typeof i?this.pure_funcs=function(e){var n;return e instanceof AST_Call?n=e.expression:e instanceof AST_Template&&(n=e.tag),!(n&&i===n.print_to_string())}:Array.isArray(i)?this.pure_funcs=function(e){var n;return e instanceof AST_Call?n=e.expression:e instanceof AST_Template&&(n=e.tag),!(n&&member(n.print_to_string(),i))}:this.pure_funcs=return_true;n=this.options.sequences;this.sequences_limit=1==n?800:0|n;var o=this.options.top_retain;o instanceof RegExp?this.top_retain=function(e){return o.test(e.name)}:"function"==typeof o?this.top_retain=o:o&&("string"==typeof o&&(o=o.split(/,/)),this.top_retain=function(e){return member(e.name,o)});n=this.options.toplevel;this.toplevel="string"==typeof n?{funcs:/funcs/.test(n),vars:/vars/.test(n)}:{funcs:n,vars:n}}function is_some_comments(e){return"comment2"==e.type&&/@preserve|@license|@cc_on/i.test(e.value)}function OutputStream(f){f=defaults(f,{annotations:!1,ascii_only:!1,beautify:!1,braces:!1,comments:!1,galio:!1,ie:!1,indent_level:4,indent_start:0,inline_script:!0,keep_quoted_props:!1,max_line_len:!1,preamble:null,preserve_line:!1,quote_keys:!1,quote_style:0,semicolons:!0,shebang:!0,source_map:null,v8:!1,webkit:!1,width:80,wrap_iife:!1},!0);var n,c=return_false;f.comments&&(n=f.comments,"string"==typeof f.comments&&/^\/.*\/[a-zA-Z]*$/.test(f.comments)&&(q=f.comments.lastIndexOf("/"),n=new RegExp(f.comments.substr(1,q-1),f.comments.substr(q+1))),c=n instanceof RegExp?function(e){return"comment5"!=e.type&&n.test(e.value)}:"function"==typeof n?function(e){return"comment5"!=e.type&&n(this,e)}:"some"===n?is_some_comments:return_true);var r,i,o,a,s,t,u,l=0,_=1,p=0,S=f.indent_start,d=0,A=!0,T=f.source_map&&[],h=!1,m=!1,v=-1;function e(){s=a=!1,t=[];var e=u;return u=r="",e}e();var y=f.ascii_only?function(e,t){return(e=t?e.replace(/[\ud800-\udbff][\udc00-\udfff]/g,function(e){return"\\u{"+(e.charCodeAt(0)-55232<<10|e.charCodeAt(1)-56320).toString(16)+"}"}):e).replace(/[\u0000-\u001f\u007f-\uffff]/g,function(e){var n=e.charCodeAt(0).toString(16);if(n.length<=2&&!t){for(;n.length<2;)n="0"+n;return"\\x"+n}for(;n.length<4;)n="0"+n;return"\\u"+n})}:function(e){for(var n="",t=0,r=0;t<e.length;t++){var i=e.charCodeAt(t);if(is_surrogate_pair_head(i)){if(is_surrogate_pair_tail(e.charCodeAt(t+1))){t++;continue}}else if(!is_surrogate_pair_tail(i))continue;n+=e.slice(r,t)+"\\u"+i.toString(16),r=t+1}return 0==r?e:n+e.slice(r)};function b(e){return"'"+e.replace(/\x27/g,"\\'")+"'"}function g(e){return'"'+e.replace(/\x22/g,'\\"')+'"'}var w=[null,b,g,function(e,n){return("'"==n?b:g)(e)}][f.quote_style]||function(e,n,t,r){return(r<t?b:g)(e)};function x(t,e){var r=0,i=0;return t=t.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(e,n){switch(e){case'"':return++r,'"';case"'":return++i,"'";case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\v":return f.ie?"\\x0B":"\\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case"\ufeff":return"\\ufeff";case"\0":return/[0-9]/.test(t.charAt(n+1))?"\\x00":"\\0"}return e}),w(y(t),e,r,i)}var E=T?function(n,t){T.forEach(function(e){e.line+=n,e.col+=t})}:noop,k=T?function(){T.forEach(function(e){f.source_map.add(e.token.file,e.line,e.col,e.token.line,e.token.col,e.name||"name"!=e.token.type?e.name:e.token.value)}),T=[]}:noop;function D(e){var n=u.lastIndexOf("\n");d<n&&(d=n);var t=u.slice(0,d),n=u.slice(d);for(E(e,n.length-l),_+=e,p+=e,l=n.length,u=t;e--;)u+="\n";u+=n}var O=f.max_line_len?function(){A?l>f.max_line_len&&AST_Node.warn("Output exceeds {max_line_len} characters",f):(l>f.max_line_len&&D(1),A=!0,k())}:noop,C=makePredicate("( [ + * / - , ."),N=f.beautify||f.comments||f.max_line_len||f.preserve_line||f.shebang||!f.semicolons||f.source_map||f.width?function(e){var n=e.charAt(0);h&&n&&(h=!1,"\n"!=n&&(N("\n"),P())),m&&n&&(m=!1,/[\s;})]/.test(n)||F()),v=-1;var t=r.slice(-1);s&&(s=!1,(":"==t&&"}"==n||(!n||";}".indexOf(n)<0)&&";"!=t)&&(f.semicolons||C[n]?(u+=";",l++,p++):(O(),u+="\n",p++,_++,l=0,/^\s+$/.test(e)&&(s=!0)),f.beautify||(a=!1))),a&&((is_identifier_char(t)&&(is_identifier_char(n)||"\\"==n)||"/"==n&&n==t||("+"==n||"-"==n)&&n==r||"--"==e&&"!"==r||"in"==e&&"/"==t||"--"==r&&">"==n)&&(u+=" ",l++,p++),"<"==t&&"!"==e||(a=!1)),o&&(T.push({token:o,name:i,line:_,col:l}),o=!1,A&&k()),u+=e,p+=e.length;n=e.split(/\r?\n/),t=n.length-1;_+=t,l+=n[0].length,0<t&&(O(),l=n[t].length),r=e}:function(e){var n=e.charAt(0),t=r.slice(-1);s&&(s=!1,(":"==t&&"}"==n||(!n||";}".indexOf(n)<0)&&";"!=t)&&(u+=";",a=!1)),a&&((is_identifier_char(t)&&(is_identifier_char(n)||"\\"==n)||"/"==n&&n==t||("+"==n||"-"==n)&&n==r||"--"==e&&"!"==r||"in"==e&&"/"==t||"--"==r&&">"==n)&&(u+=" "),"<"==t&&"!"==e||(a=!1)),u+=e,r=e},F=f.beautify?function(){N(" ")}:function(){a=!0},P=f.beautify?function(e){h&&N("\n"),N(repeat_string(" ",e?S-(f.indent_level>>1):S))}:noop,R=f.beautify?function(e){var n=S;S+=f.indent_level,e(),S=n}:function(e){e()},B=f.max_line_len||f.preserve_line?function(){O(),d=u.length,A=!1}:noop,L=f.beautify?function(){if(v<0)return N("\n");"\n"!=u[v]&&(u=u.slice(0,v)+"\n"+u.slice(v),p++,_++),v++}:B,j=f.beautify?function(){N(";")}:function(){s=!0};var q=T?function(e,n){o=e,i=n}:noop;function I(e,n){h||(!e.nlb||!n&&(e=u.lastIndexOf("\n"),/^ *$/.test(u.slice(e+1)))?n&&(m=!0):h=!0)}function U(e){var n=e.value.replace(/[@#]__PURE__/g," ");return(!/^\s*$/.test(n)||/^\s*$/.test(e.value))&&(/comment[134]/.test(e.type)?(N("//"+n),h=!0):"comment2"==e.type&&N("/*"+n+"*/"),1)}return{get:function(){return A||O(),u},reset:e,indent:P,should_break:f.width?function(){return l-S>=f.width}:return_false,has_parens:function(){return"("==r.slice(-1)},newline:L,print:N,space:F,comma:function(){B(),N(","),B(),F()},colon:function(){N(":"),F()},last:function(){return r},semicolon:j,force_semicolon:function(){s&&N(";"),N(";")},to_utf8:y,print_name:function(e){N(y(e.toString(),!0))},print_string:f.inline_script?function(e,n){e=x(e,n).replace(/<\x2f(script)([>\/\t\n\f\r ])/gi,"<\\/$1$2"),N(e.replace(/\x3c!--/g,"\\x3c!--").replace(/--\x3e/g,"--\\x3e"))}:function(e,n){N(x(e,n))},with_indent:R,with_block:function(e){N("{"),L(),R(e),P(),N("}")},with_parens:function(e){N("("),B(),e(),B(),N(")")},with_square:function(e){N("["),B(),e(),B(),N("]")},add_mapping:q,option:function(e){return f[e]},prepend_comments:f.comments||f.shebang?function(e){var t,r=this;e instanceof AST_Exit?t=e.value:e instanceof AST_Yield&&(t=e.expression);var i,n,o=(o=s(e))||[];t&&((i=new TreeWalker(function(e){if(n=e,!((t=i.parent())instanceof AST_Binary?t.left===n:"Call"==t.TYPE?t.expression===n:t instanceof AST_Conditional?t.condition===n:t instanceof AST_Dot?t.expression===n:t instanceof AST_Exit||(t instanceof AST_Sequence?t.expressions[0]===n:t instanceof AST_Sub?t.expression===n:t instanceof AST_UnaryPostfix||t instanceof AST_Yield)))return!0;var n,t,e=s(e);e&&(o=o.concat(e))})).push(e),t.walk(i)),0==p&&(0<o.length&&f.shebang&&"comment5"==o[0].type&&(N("#!"+o.shift().value+"\n"),P()),(n=f.preamble)&&N(n.replace(/\r\n?|[\n\u2028\u2029]|\s*$/g,"\n"))),o=o.filter(c,e);var a=!1;function s(e){var n=e.start;if(!n){if(!t)return;e.start=n=new AST_Token}e=n.comments_before;if(!e){if(!t)return;n.comments_before=e=[]}if(e._dumped!==r)return e._dumped=r,e}o.forEach(function(e,n){I(e,n),U(e)&&(a=!0)}),a&&I(e.start,!0)}:noop,append_comments:f.comments?function(e,t){var n,r=e.end;!r||(n=r[t?"comments_before":"comments_after"])&&n._dumped!==this&&(e instanceof AST_Statement||all(n,function(e){return!/comment[134]/.test(e.type)}))&&(n._dumped=this,r=u.length,n.filter(c,e).forEach(function(e,n){I(e,n||!t),U(e)}),u.length>r&&(v=r))}:noop,push_node:function(e){t.push(e)},pop_node:f.preserve_line?function(){var e=t.pop();e.start&&e.start.line>_&&D(e.start.line-_)}:function(){t.pop()},parent:function(e){return t[t.length-2-(e||0)]}}}Compressor.prototype=new TreeTransformer,merge(Compressor.prototype,{option:function(e){return this.options[e]},exposed:function(e){if(e.exported)return!0;if(e.undeclared)return!0;if(!(e.global||e.scope.resolve()instanceof AST_Toplevel))return!1;var n=this.toplevel;return!all(e.orig,function(e){return n[e instanceof AST_SymbolDefun?"funcs":"vars"]})},compress:function(e){(e=e.resolve_defines(this)).hoist_exports(this),this.option("expression")&&e.process_expression(!0);for(var n=this.options.merge_vars,t=+this.options.passes||1,r=1/0,i=!1,o={ie:this.option("ie")},a=0;a<t;a++)if(e.figure_out_scope(o),(0<a||this.option("reduce_vars"))&&e.reset_opt_flags(this),this.options.merge_vars=n&&(i||a==t-1),e=e.transform(this),1<t){var s=0;if(e.walk(new TreeWalker(function(){s++})),AST_Node.info("pass {pass}: last_count: {min_count}, count: {count}",{pass:a,min_count:r,count:s}),s<r)r=s,i=!1;else{if(i)break;i=!0}}return this.option("expression")&&e.process_expression(!1),e},before:function(e,n,t){if(e._squeezed)return e;var r=e instanceof AST_Scope;r&&(e.hoist_properties(this),e.hoist_declarations(this),e.process_boolean_returns(this)),n(e,this),n(e,this);var i=e.optimize(this);return!r||i!==e||this.has_directive("use asm")||i.pinned()||(i.drop_unused(this),i.merge_variables(this)&&i.drop_unused(this),n(i,this)),i===e&&(i._squeezed=!0),i}}),function(e){function l(e,n){var t;if(!((r=n.get_property())instanceof AST_Node)){if(e instanceof AST_Array){n=e.elements;if("length"==r)return X(n.length,e);"number"==typeof r&&r in n&&(t=n[r])}else if(e instanceof AST_Lambda){if("length"==r)return e.length_read=!0,X(e.argnames.length,e)}else if(e instanceof AST_Object)for(var r=""+r,i=e.properties,o=i.length;0<=--o;){if(!Fn(i[o]))return;t||i[o].key!==r||(t=i[o].value)}return t instanceof AST_SymbolRef&&t.fixed_value()||t}}function ce(e,n,t,r,i,o,a){var s=n.parent(i);if(!(e.option("unsafe")&&s instanceof AST_Dot&&(c=r,f=s.property,c instanceof AST_Boolean?fe.Boolean[f]:c instanceof AST_Number?fe.Number[f]:c instanceof AST_String?fe.String[f]:"valueOf"!=f&&(c instanceof AST_Array?fe.Array[f]:c instanceof AST_Lambda?fe.Function[f]:c instanceof AST_Object?fe.Object[f]:c instanceof AST_RegExp&&(fe.RegExp[f]&&!c.value.global))))){var f,c=is_lhs(t,s);if(c)return c;if(0!=i||!r||!r.is_constant()){if(s instanceof AST_Array)return ce(e,n,s,s,i+1);if(s instanceof AST_Assign)switch(s.operator){case"=":return ce(e,n,s,r,i+1,o,a);case"&&=":case"||=":case"??=":return ce(e,n,s,s,i+1);default:return}if(s instanceof AST_Binary)return ye[s.operator]?ce(e,n,s,s,i+1):void 0;if(s instanceof AST_Call)return!o&&s.expression===t&&!s.is_expr_pure(e)&&(!(r instanceof AST_LambdaExpression)||!(s instanceof AST_New)&&r.contains_this());if(s instanceof AST_Conditional)return s.condition===t?void 0:ce(e,n,s,s,i+1);if(s instanceof AST_ForEnumeration)return s.init===t;if(s instanceof AST_ObjectKeyVal){if(s.value!==t)return;var u=n.parent(i+1);return ce(e,n,u,u,i+2)}if(s instanceof AST_PropAccess){if(s.expression!==t)return;u=l(r,s);return(!o||a)&&ce(e,n,s,u,i+1)}return s instanceof AST_Sequence&&s.tail_node()===t?ce(e,n,s,r,i+1,o,a):void 0}}}function O(e){return e instanceof AST_Class||e instanceof AST_Lambda}function c(e){return e instanceof AST_Class||e instanceof AST_Defun||e instanceof AST_Function}function ue(e){return"arguments"==e.name&&e.scope.uses_arguments}function le(e){return e.orig[0]instanceof AST_SymbolFunarg||e.orig[1]instanceof AST_SymbolFunarg}function v(e,n){do{if(e===n)return;if(n instanceof AST_Scope)return 1}while(n=n.parent_scope)}function _e(e,n,t){var r=e.redef||e.definition();return(!e.in_arg||!le(r))&&all(r.orig,function(e){return e instanceof AST_SymbolConst||e instanceof AST_SymbolLet?n&&cn(n,e):!(t&&e instanceof AST_SymbolLambda)})}function pe(e,n,t,r){return r instanceof AST_Assign?"="==r.operator&&r.right===t:r instanceof AST_Call?r.expression!==t||r instanceof AST_New:r instanceof AST_Exit?r.value===t&&n.resolve()!==e.scope.resolve():r instanceof AST_VarDef&&r.value===t}e(AST_Node,function(e,n){return e}),AST_Node.DEFMETHOD("equivalent_to",function(e){return this.TYPE==e.TYPE&&this.print_to_string()==e.print_to_string()}),AST_Toplevel.DEFMETHOD("hoist_exports",function(e){if(e.option("hoist_exports")){for(var n=this.body,t=[],r=0;r<n.length;r++){var i=n[r];i instanceof AST_ExportDeclaration?(n[r]=i=i.body,i instanceof AST_Definitions?i.definitions.forEach(function(e){e.name.match_symbol(o,!0)}):o(i.name)):i instanceof AST_ExportReferences&&(n.splice(r--,1),[].push.apply(t,i.properties))}t.length&&n.push(de(AST_ExportReferences,this,{properties:t}))}function o(e){e instanceof AST_SymbolDeclaration&&((e=de(AST_SymbolExport,e,e)).alias=e.name,t.push(e))}}),AST_Scope.DEFMETHOD("process_expression",function(r,i){var o=this,a=new TreeTransformer(function(e){if(r&&e instanceof AST_SimpleStatement)return i?i(e):de(AST_Return,e,{value:e.body});if(!r&&e instanceof AST_Return)return i?i(e):de(AST_SimpleStatement,e,{body:e.value||de(AST_UnaryPrefix,e,{operator:"void",expression:de(AST_Number,e,{value:0})})});if(e instanceof AST_Block){if(e instanceof AST_Lambda){if(e!==o)return e}else if("awaits"===r&&e instanceof AST_Try&&e.bfinally)return e;for(var n=e.body.length;0<=--n;){var t=e.body[n];if(!q(t,!0)){e.body[n]=t.transform(a);break}}}else e instanceof AST_If?(e.body=e.body.transform(a),e.alternative&&(e.alternative=e.alternative.transform(a))):e instanceof AST_With&&(e.body=e.body.transform(a));return e});o.transform(a)});var _=/^(0|[1-9][0-9]*)$/;function o(e,n,t){t.assignments=0,t.bool_fn=0,t.cross_loop=!1,t.direct_access=!1,t.escaped=[],t.fixed=!t.const_redefs&&!t.scope.pinned()&&!n.exposed(t)&&!(t.init instanceof AST_LambdaExpression&&t.init!==t.scope)&&t.init,t.reassigned=0,t.recursive_refs=0,t.references=[],t.should_replace=void 0,t.single_use=void 0}function a(e,n,t){t.variables.each(function(e){o(0,n,e)})}function p(t,r,i){i.fn_defs=[],i.variables.each(function(e){o(0,r,e);var n=e.init;n instanceof AST_LambdaDefinition&&(i.fn_defs.push(n),n.safe_ids=null),null===e.fixed?(e.safe_ids=t.safe_ids,h(t,e)):e.fixed&&(t.loop_ids[e.id]=t.in_loop,h(t,e))}),i.may_call_this=function(){i.may_call_this=i.contains_this()?return_true:return_false},i.uses_arguments&&i.each_argname(function(e){e.definition().last_ref=!1}),r.option("ie")&&i.variables.each(function(e){var n=e.orig[0].definition();n!==e&&(n.fixed=!1)})}function s(e,n){var t=e.fn_scanning;(e.fn_scanning=n).walk(e),e.fn_scanning=t}function f(t,r){r.enclosed.forEach(function(e){var n;r.variables.get(e.name)!==e&&(y(t,e)||(e.single_use=!1,(n="function"==typeof(n=e.fixed)?n():n)instanceof AST_Lambda&&HOP(n,"safe_ids")||(e.fixed=!1)))})}function S(e,n,t){var r,i;!HOP(t,"safe_ids")||!1!==(r=t.safe_ids)&&(t.parent_scope.resolve().may_call_this===return_true?member(t,e.fn_visited)&&f(e,t):r?(i=member(t,e.fn_visited),r===e.safe_ids?i||s(e,t):i?f(e,t):t.safe_ids=!1):e.fn_scanning&&e.fn_scanning!==n.scope.resolve()?t.safe_ids=!1:(t.safe_ids=e.safe_ids,s(e,t)))}function d(n,e){var t=e.fn_defs,r=e.may_call_this===return_true?t:t.filter(function(e){return!1===e.safe_ids||(e.safe_ids=n.safe_ids,s(n,e),!1)});T(n),r.forEach(function(e){e.safe_ids=n.safe_ids,s(n,e)}),t.forEach(function(e){delete e.safe_ids}),delete e.fn_defs,delete e.may_call_this}function A(e){e.safe_ids=Object.create(e.safe_ids)}function T(e){e.safe_ids=Object.getPrototypeOf(e.safe_ids)}function h(e,n){e.safe_ids[n.id]={}}function m(e,n){e.references.push(n),!1!==e.last_ref&&(e.last_ref=n)}function y(e,n){if("m"==n.single_use)return!1;var t=e.safe_ids[n.id];if(t){var r=HOP(e.safe_ids,n.id);return r||(t.read=!(!t.read||t.read===e.safe_ids)||e.safe_ids),null==n.fixed?!ue(n)&&((!n.global||"arguments"!=n.name)&&(e.loop_ids[n.id]=null,n.fixed=de(AST_Undefined,n.orig[0]),r&&delete n.safe_ids,!0)):!t.assign||t.assign===e.safe_ids}return n.fixed instanceof AST_LambdaDefinition}function b(e,n,t){if(!t){if(le(n)&&n.scope.uses_arguments&&!e.has_directive("use strict"))return;if(!all(n.orig,function(e){return!(e instanceof AST_SymbolConst)}))return}if(void 0===n.fixed)return t||all(n.orig,function(e){return!(e instanceof AST_SymbolLet)});if(!1!==n.fixed&&0!==n.fixed){var r=e.safe_ids[n.id];if(n.safe_ids)return n.safe_ids[n.id]=!1,delete n.safe_ids,null===n.fixed||HOP(e.safe_ids,n.id)&&!r.read;if(!HOP(e.safe_ids,n.id)){if(!r)return;if(r.read){t=e.find_parent(AST_BlockScope);if(t instanceof AST_Class)return;if(n.scope.resolve()!==t.resolve())return}r.assign=!(!r.assign||r.assign===e.safe_ids)||e.safe_ids}if(null!=n.fixed&&r.read){if(r.read!==e.safe_ids)return;if(e.loop_ids[n.id]!==e.in_loop)return}return y(e,n)&&all(n.orig,function(e){return!(e instanceof AST_SymbolLambda)})}}function g(e,n){var t=de(AST_SymbolRef,e,e);return t.fixed=n||de(AST_Undefined,e),t}function w(e){if(!e)return!1;if(e instanceof AST_Assign){var n=e.operator;return"="==n?w(e.right):!ye[n.slice(0,-1)]}return e instanceof AST_Sequence?w(e.tail_node()):e.is_constant()||O(e)||e instanceof AST_ObjectIdentity}function x(e,n,t,r,i,o,a){var s,f=e.parent(o);if(!i||!i.is_constant()){if(pe(n,t,r,f))return n.escaped.push(f),!(1<a)||i&&i.is_constant_expression(t)||(a=1),(!n.escaped.depth||n.escaped.depth>a)&&(n.escaped.depth=a),n.scope.resolve()!==t.resolve()&&(n.escaped.cross_scope=!0),void(n.fixed&&(n.fixed.escaped=n.escaped));if(s=r,(c=f)instanceof AST_Array||(c instanceof AST_Binary?ye[c.operator]:c instanceof AST_Conditional?c.condition!==s:c instanceof AST_Sequence?c.tail_node()===s:c instanceof AST_Spread))x(e,n,t,f,f,o+1,a);else if(f instanceof AST_ObjectKeyVal&&f.value===r){var c=e.parent(o+1);x(e,n,t,c,c,o+2,a)}else if(f instanceof AST_PropAccess&&f.expression===r&&(x(e,n,t,f,i=l(i,f),o+1,a+1),i))return;0<o||f instanceof AST_Call&&f.expression===r||f instanceof AST_Sequence&&f.tail_node()!==r||f instanceof AST_SimpleStatement||f instanceof AST_Unary&&!unary_side_effects[f.operator]||(n.direct_access=!0,n.fixed&&(n.fixed.direct_access=!0))}}function E(e){var n;e instanceof AST_Sub&&((n=e.expression)instanceof AST_SymbolRef&&(!ue(n=n.definition())||((e=(e=e.property).is_constant()?e.value:e)instanceof AST_Node||_.test(e))&&(n.reassigned++,(e instanceof AST_Node?n.scope.argnames:[n.scope.argnames[e]]).forEach(function(e){e instanceof AST_SymbolFunarg&&(e.definition().fixed=!1)}))))}function k(o,t,e,a,s){var f=new TreeWalker(function(r){if(r instanceof AST_DefaultValue)return D(r),A(o),r.value.walk(o),T(o),(i=a)&&(a=function(){var e,n=i();return ve(n,t)||void 0===(e=tn(t,n,!0))?K(r,[n,r.value]):e instanceof AST_Node?r:n}),r.name.walk(f),a=i,!0;if(r instanceof AST_DestructuredArray){D(r);var n,i=a;return r.elements.forEach(function(e,n){return e instanceof AST_Hole?D(e):(i&&(a=function(){return de(AST_Sub,e,{expression:i(),property:de(AST_Number,e,{value:n})})}),void e.walk(f))}),r.rest&&(i&&(a=t.option("rests")&&function(){var e=i();return e instanceof AST_Array?((n=n||de(AST_Array,r)).elements=e.elements.slice(r.elements.length),n):r}),r.rest.walk(f)),a=i,!0}if(r instanceof AST_DestructuredObject){D(r);i=a;return r.properties.forEach(function(t){D(t),t.key instanceof AST_Node&&(A(o),t.key.walk(o),T(o)),i&&(a=function(){var e=t.key,n=AST_Sub;return"string"==typeof e&&(is_identifier_string(e)?n=AST_Dot:e=X(e,t)),de(n,t,{expression:i(),property:e})}),t.value.walk(f)}),r.rest&&(a=!1,r.rest.walk(f)),a=i,!0}return s(r,a,function(){for(var e=o.stack.length,n=0,t=f.stack.length-1;n<t;n++)o.stack.push(f.stack[n]);r.walk(o),o.stack.length=e}),!0});e.walk(f)}function u(r,e,i){var o=this;o.inlined=!1;var a=r.parent(),n=is_async(o)||is_generator(o),t=!1;o.walk(new TreeWalker(function(e){return n?t=!0:e instanceof AST_Return?n=!0:e instanceof AST_Scope&&e!==o||void 0})),t&&A(r),p(r,i,o);var s=!o.uses_arguments||r.has_directive("use strict");o.argnames.forEach(function(n,e){var t=a.args[e];k(r,i,n,function(){var e=o.argnames.indexOf(n),e=e<0?t:a.args[e];return(e=e instanceof AST_Sequence&&e.expressions.length<2?e.expressions[0]:e)||de(AST_Undefined,a)},l)});var f,c=o.rest;c&&k(r,i,c,i.option("rests")&&function(){return o.rest!==c?c:((f=f||de(AST_Array,o)).elements=a.args.slice(o.argnames.length),f)},l),walk_lambda(o,r);var u=r.safe_ids;return d(r,o),t||(r.safe_ids=u),!0;function l(e,n){var t=e.definition();n&&s&&void 0===t.fixed?(h(r,t),r.loop_ids[t.id]=r.in_loop,t.fixed=n,t.fixed.assigns=[e]):t.fixed=!1}}function D(e){e._squeezed=!1,e._optimized=!1,delete e.fixed,e instanceof AST_Scope&&delete e._var_names}function n(t,r){return this.transform(new TreeTransformer(function(e,n){return e instanceof AST_DefaultValue?((e=e.clone()).name=e.name.transform(this),e):e instanceof AST_Destructured?(n(e=e.clone(),this),e):e instanceof AST_DestructuredKeyVal?((e=e.clone()).value=e.value.transform(this),e):e.convert_symbol(t,r)}))}function t(e,n){e=de(e,this,this);return n(e,this),e}function r(n,t){var r=new TreeWalker(function(e){return e instanceof AST_DefaultValue?(e.value.walk(t),e.name.walk(r),!0):e instanceof AST_DestructuredKeyVal?(e.key instanceof AST_Node&&e.key.walk(t),e.value.walk(r),!0):n(e)});this.walk(r)}function i(e){return e(this)}function C(n,t){var r=!1,i=new TreeWalker(function(e){return!!r||(e instanceof AST_DefaultValue?t?(e.name.walk(i),!0):r=!0:e instanceof AST_DestructuredKeyVal?!t&&e.key instanceof AST_Node?r=!0:(e.value.walk(i),!0):n(e)?r=!0:void 0)});return this.walk(i),r}function N(e){return e instanceof AST_AsyncGeneratorDefun||e instanceof AST_AsyncGeneratorFunction}function Y(e){for(var n,t=0;n=e.parent(t++);)if(n.variables)return n}(se=function(e,n){e.DEFMETHOD("reduce_vars",n)})(AST_Node,noop),se(AST_Assign,function(o,e,n){var a=this,s=a.left,f=a.right,t=s instanceof AST_SymbolRef&&s.definition(),r=t||s instanceof AST_Destructured;switch(a.operator){case"=":return s.equivalent_to(f)&&!s.has_side_effects(n)?(f.walk(o),function e(n){{var t;n instanceof AST_Dot?e(n.expression):n instanceof AST_Sub?(e(n.expression),n.property.walk(o)):n instanceof AST_SymbolRef?(m(t=n.definition(),n),t.fixed&&(n.fixed=t.fixed,n.fixed.assigns?n.fixed.assigns.push(a):n.fixed.assigns=[a])):n.walk(o)}}(s),a.__drop=!0):t&&f instanceof AST_LambdaExpression?(l(),f.parent_scope.resolve().fn_defs.push(f),f.safe_ids=null,t.fixed&&a.write_only||S(o,t,f),!0):r?(f.walk(o),l(),!0):void E(s);case"&&=":case"||=":case"??=":var i=!0;default:if(!r)return E(s),_();t.assignments++;var c=t.fixed;if(ce(n,o,a,a,0))return t.fixed=!1,_();var u=y(o,t);return i&&A(o),f.walk(o),i&&T(o),u&&!s.in_arg&&b(o,t)?(m(t,s),h(o,t),t.single_use&&(t.single_use=!1),s.fixed=t.fixed=function(){return de(AST_Binary,a,{operator:a.operator.slice(0,-1),left:g(s,c),right:a.right})},s.fixed.assigns=c&&c.assigns?c.assigns.slice():[],s.fixed.assigns.push(a)):(s.walk(o),t.fixed=!1),!0}function l(){var e=t&&gn(o,t),i=ce(n,o,a,f,0,w(f),e);k(o,n,s,function(){return a.right},function(e,n,t){if(!(e instanceof AST_SymbolRef))return E(e),void t();var r=e.definition();r.assignments++,n&&!e.in_arg&&b(o,r)?i?(t(),r.fixed=0):(m(r,e),h(o,r),(s instanceof AST_Destructured||1==r.orig.length&&r.orig[0]instanceof AST_SymbolDefun)&&(r.single_use=!1),o.loop_ids[r.id]=o.in_loop,e.fixed=r.fixed=n,e.fixed.assigns=[a],x(o,r,e.scope,a,f,0,1)):(t(),r.fixed=!1)})}function _(){if(i)return s.walk(o),A(o),f.walk(o),T(o),!0}}),se(AST_Binary,function(e){if(ye[this.operator])return this.left.walk(e),A(e),this.right.walk(e),T(e),!0}),se(AST_BlockScope,function(e,n,t){a(0,t,this)}),se(AST_Call,function(n,e){var t=this,r=t.expression;if(r instanceof AST_LambdaExpression){var i=Te(t);return t.args.forEach(function(e){e.walk(n),e instanceof AST_Spread&&(i=!1)}),i&&(r.reduce_vars=u),r.walk(n),i&&delete r.reduce_vars,!0}"Call"==t.TYPE&&n.in_boolean_context()&&(r instanceof AST_SymbolRef?r.definition().bool_fn++:r instanceof AST_Assign&&"="==r.operator&&r.left instanceof AST_SymbolRef&&r.left.definition().bool_fn++),r.walk(n);var o=t.optional;o&&A(n),t.args.forEach(function(e){e.walk(n)}),o&&T(n);o=r instanceof AST_SymbolRef&&r.fixed_value();return o instanceof AST_Lambda?S(n,r.definition(),o):n.find_parent(AST_Scope).may_call_this(),!0}),se(AST_Class,function(n,e,t){var r=this;a(0,t,r),r.extends&&r.extends.walk(n);var i,o=r.properties.filter(function(e){return D(e),e.key instanceof AST_Node&&e.key.walk(n),e.value});return r.name&&(i=r.name.definition(),((t=n.parent())instanceof AST_ExportDeclaration||t instanceof AST_ExportDefault)&&(i.single_use=!1),b(n,i,!0)?(h(n,i),n.loop_ids[i.id]=n.in_loop,i.fixed=function(){return r},i.fixed.assigns=[r],an(i)||(i.single_use=!1)):i.fixed=!1),o.forEach(function(e){!e.static||e instanceof AST_ClassField&&e.value.contains_this()?(A(n),e.value.walk(n),T(n)):e.value.walk(n)}),!0}),se(AST_Conditional,function(e){return this.condition.walk(e),A(e),this.consequent.walk(e),T(e),A(e),this.alternative.walk(e),T(e),!0}),se(AST_DefaultValue,function(e){return this.name.walk(e),A(e),this.value.walk(e),T(e),!0}),se(AST_Do,function(e){var n=e.in_loop;return e.in_loop=this,A(e),this.body.walk(e),en(this,e.parent())&&(T(e),A(e)),this.condition.walk(e),T(e),e.in_loop=n,!0}),se(AST_For,function(e,n,t){var r=this;a(0,t,r),r.init&&r.init.walk(e);t=e.in_loop;return e.in_loop=r,A(e),r.condition&&r.condition.walk(e),r.body.walk(e),r.step&&(en(r,e.parent())&&(T(e),A(e)),r.step.walk(e)),T(e),e.in_loop=t,!0}),se(AST_ForEnumeration,function(e,n,t){var r=this;a(0,t,r),r.object.walk(e);var i=e.in_loop;e.in_loop=r,A(e);t=r.init;return t instanceof AST_Definitions?t.definitions[0].name.mark_symbol(function(e){e instanceof AST_SymbolDeclaration&&((e=e.definition()).assignments++,e.fixed=!1)},e):t instanceof AST_Destructured||t instanceof AST_SymbolRef?t.mark_symbol(function(e){var n;e instanceof AST_SymbolRef&&(m(n=e.definition(),e),n.assignments++,e.is_immutable()||(n.fixed=!1))},e):t.walk(e),r.body.walk(e),T(e),e.in_loop=i,!0}),se(AST_If,function(e){return this.condition.walk(e),A(e),this.body.walk(e),T(e),this.alternative&&(A(e),this.alternative.walk(e),T(e)),!0}),se(AST_LabeledStatement,function(e){return A(e),this.body.walk(e),T(e),!0}),se(AST_Lambda,function(e,n,t){var r=this;return HOP(r,"safe_ids")&&r.safe_ids!==e.safe_ids||push_uniq(e.fn_visited,r)&&(r.inlined=!1,A(e),p(e,t,r),n(),d(e,r),r.name&&x(e,r.name.definition(),r,r.name,r,0,1)),!0}),se(AST_LambdaDefinition,function(e,n,t){var r=this,i=r.name.definition(),o=e.parent();return(o instanceof AST_ExportDeclaration||o instanceof AST_ExportDefault)&&(i.single_use=!1),HOP(r,"safe_ids")&&r.safe_ids!==e.safe_ids||push_uniq(e.fn_visited,r)&&(r.inlined=!1,A(e),p(e,t,r),n(),d(e,r)),!0}),se(AST_Sub,function(e){if(this.optional)return this.expression.walk(e),A(e),this.property.walk(e),T(e),!0}),se(AST_Switch,function(n,e,t){a(0,t,this),this.expression.walk(n);var r=!0;return this.body.forEach(function(e){e instanceof AST_Default||(e.expression.walk(n),r&&(r=!1,A(n)))}),r||T(n),walk_body(this,n),!0}),se(AST_SwitchBranch,function(e){return A(e),walk_body(this,e),T(e),!0}),se(AST_SymbolCatch,function(){this.definition().fixed=!1}),se(AST_SymbolImport,function(){this.definition().fixed=!1}),se(AST_SymbolRef,function(t,e,n){var r=this.definition();m(r,this),1==r.references.length&&!r.fixed&&r.orig[0]instanceof AST_SymbolDefun&&(t.loop_ids[r.id]=t.in_loop);var i,o,a=gn(t,r);a&&a.enclosed.forEach(function(e){var n;r!==e&&(e.scope.resolve()===a||(n=e.fixed&&e.fixed.assigns)&&(n[n.length-1]instanceof AST_VarDef||(e=t.safe_ids[e.id])&&(e.assign=!0)))}),!1===r.fixed||0===r.fixed?(o=r.redefined())&&v(r.scope,this.scope)&&(o.single_use=!1):void 0!==r.fixed&&y(t,r)?r.fixed&&(this.in_arg&&r.orig[0]instanceof AST_SymbolLambda&&(this.fixed=r.scope),i=this.fixed_value(),a?r.recursive_refs++:!i||(o=r,!n.option("unused")||o.scope.pinned()||!1===o.single_use||o.references.length-o.recursive_refs!=1||le(o)&&o.scope.uses_arguments)?r.single_use=!1:(r.in_loop=t.loop_ids[r.id]!==t.in_loop,r.single_use=O(i)&&!i.pinned()&&(!r.in_loop||t.parent()instanceof AST_Call)||!r.in_loop&&r.scope===this.scope.resolve()&&i.is_constant_expression()),ce(n,t,this,i,0,w(i),a)&&(r.single_use?r.single_use="m":r.fixed=0),r.fixed&&t.loop_ids[r.id]!==t.in_loop&&(r.cross_loop=!0),x(t,r,this.scope,this,i,0,1)):r.fixed=!1,this.fixed||(this.fixed=r.fixed),i instanceof AST_Lambda&&!((n=t.parent())instanceof AST_Call&&n.expression===this)&&S(t,r,i)}),se(AST_Template,function(n,e){var t=this.tag;if(t){if(t instanceof AST_LambdaExpression)return this.expressions.forEach(function(e){e.walk(n)}),t.walk(n),!0;t.walk(n),this.expressions.forEach(function(e){e.walk(n)});var r=t instanceof AST_SymbolRef&&t.fixed_value();return r instanceof AST_Lambda?S(n,t.definition(),r):n.find_parent(AST_Scope).may_call_this(),!0}}),se(AST_Toplevel,function(e,n,t){return this.globals.each(function(e){o(0,t,e)}),A(e),p(e,t,this),n(),d(e,this),!0}),se(AST_Try,function(e,n,t){var r=this;return a(0,t,r),A(e),walk_body(r,e),T(e),r.bcatch&&(A(e),r.bcatch.walk(e),T(e)),r.bfinally&&r.bfinally.walk(e),!0}),se(AST_Unary,function(e,n){var t=this;if(UNARY_POSTFIX[t.operator]){var r=t.expression;if(r instanceof AST_SymbolRef){var i=r.definition();i.assignments++;var o=i.fixed;return y(e,i)&&!r.in_arg&&b(e,i)?(m(i,r),h(e,i),i.single_use&&(i.single_use=!1),i.fixed=function(){return de(AST_Binary,t,{operator:t.operator.slice(0,-1),left:de(AST_UnaryPrefix,t,{operator:"+",expression:g(r,o)}),right:de(AST_Number,t,{value:1})})},i.fixed.assigns=o&&o.assigns?o.assigns.slice():[],i.fixed.assigns.push(t),t instanceof AST_UnaryPrefix?r.fixed=i.fixed:(r.fixed=function(){return de(AST_UnaryPrefix,t,{operator:"+",expression:g(r,o)})},r.fixed.assigns=o&&o.assigns)):(r.walk(e),i.fixed=!1),!0}E(r)}}),se(AST_VarDef,function(r,e,n){var t,i=this,o=i.value;return o instanceof AST_LambdaExpression&&i.name instanceof AST_SymbolDeclaration?(a(),o.parent_scope.resolve().fn_defs.push(o),o.safe_ids=null,(t=i.name.definition()).fixed||S(r,t,o)):o?(o.walk(r),a()):r.parent()instanceof AST_Let&&a(),!0;function a(){k(r,n,i.name,function(){return i.value||de(AST_Undefined,i)},function(e,n){var t=e.definition();n&&b(r,t,!0)?(h(r,t),r.loop_ids[t.id]=r.in_loop,t.fixed=n,t.fixed.assigns=[i],(e instanceof AST_SymbolConst&&t.redefined()||!_e(e)&&!an(t))&&(t.single_use=!1)):t.fixed=!1})}}),se(AST_While,function(e,n){var t=e.in_loop;return e.in_loop=this,A(e),n(),T(e),e.in_loop=t,!0}),AST_Toplevel.DEFMETHOD("reset_opt_flags",function(t){var r=new TreeWalker(t.option("reduce_vars")?function(e,n){return D(e),e.reduce_vars(r,n,t)}:D);r.fn_scanning=null,r.fn_visited=[],r.in_loop=null,r.loop_ids=Object.create(null),r.safe_ids=Object.create(null),this.walk(r)}),AST_Symbol.DEFMETHOD("fixed_value",function(){var e=this.definition().fixed;if(e)return(e=this.fixed?this.fixed:e)instanceof AST_Node?e:e();if(!(e=0===e&&this.fixed))return e;e=e instanceof AST_Node?e:e();return e.is_constant()&&e}),AST_SymbolRef.DEFMETHOD("is_immutable",function(){var e=this.redef||this.definition();return(this.in_arg||1==e.orig.length)&&e.orig[0]instanceof AST_SymbolLambda}),AST_Node.DEFMETHOD("convert_symbol",noop),AST_DefaultValue.DEFMETHOD("convert_symbol",n),AST_Destructured.DEFMETHOD("convert_symbol",n),AST_SymbolDeclaration.DEFMETHOD("convert_symbol",t),AST_SymbolRef.DEFMETHOD("convert_symbol",t),AST_DefaultValue.DEFMETHOD("mark_symbol",r),AST_Destructured.DEFMETHOD("mark_symbol",r),AST_SymbolDeclaration.DEFMETHOD("mark_symbol",i),AST_SymbolRef.DEFMETHOD("mark_symbol",i),AST_Node.DEFMETHOD("match_symbol",function(e){return e(this)}),AST_DefaultValue.DEFMETHOD("match_symbol",C),AST_Destructured.DEFMETHOD("match_symbol",C);var G=makePredicate("Infinity NaN undefined");function Se(e,n){if(e instanceof AST_ObjectIdentity)return!0;if(e instanceof AST_PropAccess){if("__proto__"===e.property)return!0;if((e=e.expression)instanceof AST_SymbolRef){if(e.is_immutable())return!1;e=e.fixed_value()}return e?!!e.tail_node().is_constant()||Se(e,n):!0}if(e instanceof AST_SymbolRef){if(e.is_immutable())return!0;e=e.definition();return n.exposed(e)&&G[e.name]}return!1}function de(e,n,t){return t=t||{},n&&(t.start||(t.start=n.start),t.end||(t.end=n.end)),new e(t)}function K(e,n){return 1==n.length?n[0]:de(AST_Sequence,e,{expressions:n.reduce(F,[])})}function X(e,n){switch(typeof e){case"string":return de(AST_String,n,{value:e});case"number":return isNaN(e)?de(AST_NaN,n):isFinite(e)?1/e<0?de(AST_UnaryPrefix,n,{operator:"-",expression:de(AST_Number,n,{value:-e})}):de(AST_Number,n,{value:e}):e<0?de(AST_UnaryPrefix,n,{operator:"-",expression:de(AST_Infinity,n)}):de(AST_Infinity,n);case"boolean":return de(e?AST_True:AST_False,n);case"undefined":return de(AST_Undefined,n);default:if(null===e)return de(AST_Null,n,{value:null});if(e instanceof RegExp)return de(AST_RegExp,n,{value:e});throw new Error(string_template("Can't handle constant of type: {type}",{type:typeof e}))}}function J(e,n){return n instanceof AST_PropAccess||he(n)&&"eval"==n.name}function Ae(e,n,t,r){var i=!1;return"Call"==n.TYPE?i=n.expression===t&&J(0,r):n instanceof AST_Template?i=n.tag===t&&J(0,r):n instanceof AST_UnaryPrefix&&(i="delete"==n.operator||"typeof"==n.operator&&he(r)),i?K(t,[de(AST_Number,t,{value:0}),r]):r}function F(e,n){return n instanceof AST_Sequence?e.push.apply(e,n.expressions):e.push(n),e}function P(e){return e instanceof AST_Const||e instanceof AST_DefClass||e instanceof AST_Let}function R(e){if(e instanceof AST_LambdaDefinition){var n=e.name.definition(),t=e.name.scope;return n.scope===t||all(n.references,function(e){var n=e.scope;do{if(n===t)return!0}while(n=n.parent_scope)})}return!P(e)}function B(e){if(null===e)return[];if(e instanceof AST_BlockStatement)return all(e.body,R)?e.body:[e];if(e instanceof AST_EmptyStatement)return[];if(is_statement(e))return[e];throw new Error("Can't convert thing to statement array")}function Q(e){return null===e||(e instanceof AST_EmptyStatement||e instanceof AST_BlockStatement&&0==e.body.length)}function L(e){return all(e.body,function(e){return Q(e)||e instanceof AST_Defun||e instanceof AST_Var&&ee(e)})}function j(e){return e instanceof AST_IterationStatement&&e.body instanceof AST_BlockStatement?e.body:e}function Z(e){if("Call"!=e.TYPE)return!1;for(;(e=e.expression)instanceof AST_PropAccess;);return e instanceof AST_LambdaExpression?!is_arrow(e):Z(e)}function Te(e){var n=e.expression;if(n.name)return!1;if(!(e instanceof AST_New))return!0;var t=!1;return n.walk(new TreeWalker(function(e){return!!t||(e instanceof AST_NewTarget?t=!0:e instanceof AST_Scope&&e!==n||void 0)})),!t}function he(e){return e instanceof AST_SymbolRef&&e.definition().undeclared}var me=makePredicate("Array Boolean clearInterval clearTimeout console Date decodeURI decodeURIComponent encodeURI encodeURIComponent Error escape eval EvalError Function isFinite isNaN JSON Map Math Number parseFloat parseInt RangeError ReferenceError RegExp Object Set setInterval setTimeout String SyntaxError TypeError unescape URIError WeakMap WeakSet");function ee(e){return all(e.definitions,function(e){return!e.value})}function q(e,n){return e instanceof AST_DefClass?n&&!e.extends&&all(e.properties,function(e){return!(e.key instanceof AST_Node)&&!(e instanceof AST_ClassField&&e.static&&e.value)}):e instanceof AST_Definitions?(n||e instanceof AST_Var)&&ee(e):e instanceof AST_ExportDeclaration||e instanceof AST_ExportDefault?q(e.body,n):e instanceof AST_LambdaDefinition}function I(e,n){var t=e.lastIndexOf(n);if(t<0)return!1;for(;++t<e.length;)if(!q(e[t],!0))return!1;return!0}function U(e,l){var oe,ae,se;!function(){var e=l.self(),n=0;do{if(e instanceof AST_Catch)l.parent(n).bfinally&&((ae=ae||{}).bfinally=!0),n++;else if(e instanceof AST_Finally)n++;else if(e instanceof AST_IterationStatement)oe=!0;else{if(e instanceof AST_Scope){se=e;break}e instanceof AST_Try&&(ae=ae||{},e.bcatch&&(ae.bcatch=!0),e.bfinally&&(ae.bfinally=!0))}}while(e=l.parent(n++))}();for(var fe,n=10;fe=!1,function e(n){var t=[];for(var r=0;r<n.length;){var i=n[r];if(i instanceof AST_BlockStatement&&all(i.body,R))fe=!0,e(i.body),[].splice.apply(n,[r,1].concat(i.body)),r+=i.body.length;else{if(i instanceof AST_Directive){if(member(i.value,t)){fe=!0,n.splice(r,1);continue}t.push(i.value)}i instanceof AST_EmptyStatement?(fe=!0,n.splice(r,1)):r++}}}(e),l.option("dead_code")&&function(n,t){for(var e,r=t.self(),i=0,o=0,a=n.length;i<a;i++){var s,f=n[i];if(!(f instanceof AST_LoopControl)||j(s=t.loopcontrol_target(f))!==r||f instanceof AST_Break&&s instanceof AST_IterationStatement?n[o++]=f:f.label&&remove(f.label.thedef.references,f),Re(f)){e=n.slice(i+1);break}}n.length=o,e&&e.forEach(function(e){$(t,e,n)});fe=n.length!=a}(e,l),l.option("if_return")&&function(r,i){for(var o=i.self(),e=i.parent(),t=d(function(e){return e instanceof AST_Lambda}),n=t&&e&&"Call"==e.TYPE,a=function(e){for(var n=0,t=e.length;0<=--t;){var r=e[t];if(r instanceof AST_If&&r.body instanceof AST_Return&&1<++n)return!0}return!1}(r),s=r.length;0<=--s;){var f=r[s],c=y(s),u=r[c];if(t&&!u&&f instanceof AST_Return){if(!f.value){fe=!0,r.splice(s,1);continue}var l=f.value.tail_node();if(l instanceof AST_UnaryPrefix&&"void"==l.operator){fe=!0,l===f.value?p=l.expression:(p=f.value.clone()).expressions[p.length-1]=l.expression,r[s]=de(AST_SimpleStatement,f,{body:p});continue}}if(f instanceof AST_If){var _=Re(f.body);if(h(_)){_.label&&remove(_.label.thedef.references,_),fe=!0,(f=f.clone()).condition=f.condition.negate(i);var p=v(f.body,_);f.body=de(AST_BlockStatement,f,{body:B(f.alternative).concat(m())}),f.alternative=de(AST_BlockStatement,f,{body:p}),r[s]=f,r[s]=f.transform(i);continue}if(_&&!f.alternative&&f.body instanceof AST_BlockStatement&&u instanceof AST_Jump){var S=f.condition.negate(i);if(S.print_to_string().length<=f.condition.print_to_string().length){fe=!0,(f=f.clone()).condition=S,r[c]=f.body,f.body=u,r[s]=f,r[s]=f.transform(i);continue}}var S=Re(f.alternative);if(h(S)){S.label&&remove(S.label.thedef.references,S),fe=!0,(f=f.clone()).body=de(AST_BlockStatement,f.body,{body:B(f.body).concat(m())});p=v(f.alternative,S);f.alternative=de(AST_BlockStatement,f.alternative,{body:p}),r[s]=f,r[s]=f.transform(i);continue}i.option("typeofs")&&(_&&!S&&nn(f.condition,null,de(AST_BlockStatement,o,{body:r.slice(s+1)})),!_&&S&&nn(f.condition,de(AST_BlockStatement,o,{body:r.slice(s+1)})))}f instanceof AST_If&&f.body instanceof AST_Return&&(_=f.body.value,S=f.body.in_bool||u instanceof AST_Return&&u.in_bool,_||f.alternative||!(t&&!u||u instanceof AST_Return&&!u.value)?!f.alternative&&u instanceof AST_Return?(fe=!0,(f=f.clone()).alternative=u,r.splice(s,1,f.transform(i)),r.splice(c,1)):f.alternative||u||!t||!(S||_&&a)?(_=r[function(e){for(var n=e;0<=--n&&q(r[n]););return n}(s)],i.option("sequences")&&t&&!f.alternative&&(!_&&n||_ instanceof AST_If&&_.body instanceof AST_Return)&&y(c)==r.length&&u instanceof AST_SimpleStatement&&(fe=!0,(f=f.clone()).alternative=de(AST_BlockStatement,u,{body:[u,de(AST_Return,u,{value:null})]}),r.splice(s,1,f.transform(i)),r.splice(c,1))):(fe=!0,(f=f.clone()).alternative=de(AST_Return,f,{value:null}),r.splice(s,1,f.transform(i))):(fe=!0,r[s]=de(AST_SimpleStatement,f.condition,{body:f.condition})))}function d(e){var n,t=o,r=0;do{do{if(e(t))return!0}while((t=i.parent(r++))instanceof AST_If&&(n=t))}while((t instanceof AST_BlockStatement||t instanceof AST_Scope)&&I(t.body,n))}function A(n){return d(function(e){return e===n})}function T(e){if(e instanceof AST_Return)return t&&(!(n=e.value)||n instanceof AST_UnaryPrefix&&"void"==n.operator);if(e instanceof AST_LoopControl){var n=i.loopcontrol_target(e);return e instanceof AST_Continue?A(j(n)):!(n instanceof AST_IterationStatement)&&A(n)}}function h(e){if(T(e)){for(var n=r.length;--n>s;){var t=r[n];if(t instanceof AST_DefClass){if(t.name.definition().preinit)return}else if((t instanceof AST_Const||t instanceof AST_Let)&&!all(t.definitions,function(e){return!e.name.match_symbol(function(e){return e instanceof AST_SymbolDeclaration&&e.definition().preinit})}))return}return 1}}function m(){var n=[],t=!1,e=r.splice(s+1).filter(function(e){return e instanceof AST_LambdaDefinition?(n.push(e),!1):(P(e)&&(t=!0),!0)});return[].push.apply(t?e:r,n),e}function v(e,n){for(var t,e=B(e),r=e;(t=r[r.length-1])!==n;)r=t.body;return r.pop(),n.value&&r.push(de(AST_SimpleStatement,n.value,{body:n.value.expression})),e}function y(e){for(var n=e+1;n<r.length&&q(r[n]);n++);return n}}(e,l),0<l.sequences_limit&&(function(n,e){if(!(n.length<2)){for(var t=[],r=0,i=0,o=n.length;i<o;i++){var a,s=n[i];s instanceof AST_SimpleStatement?(t.length>=e.sequences_limit&&f(),a=s.body,(a=0<t.length?a.drop_side_effect_free(e):a)&&F(t,a)):(q(s)||f(),n[r++]=s)}f(),(n.length=r)!=o&&(fe=!0)}function f(){var e;t.length&&(e=K(t[0],t),n[r++]=de(AST_SimpleStatement,e,{body:e}),t=[])}}(e,l),function(e,n){function t(e){i--,fe=!0;var n=r.body;return K(n,[n,e])}for(var r,i=0,o=0;o<e.length;o++){var a,s=e[o];if(r&&(s instanceof AST_Exit?!s.value&&N(se)||(s.value=t(s.value||de(AST_Undefined,s)).optimize(n)):s instanceof AST_For?s.init instanceof AST_Definitions||(a=!1,r.body.walk(new TreeWalker(function(e){return!!(a||e instanceof AST_Scope)||(e instanceof AST_Binary&&"in"==e.operator?a=!0:void 0)})),a||(s.init?s.init=t(s.init):(s.init=r.body,i--,fe=!0))):s instanceof AST_ForIn?P(s.init)||(s.object=t(s.object)):s instanceof AST_If?s.condition=t(s.condition):(s instanceof AST_Switch||s instanceof AST_With)&&(s.expression=t(s.expression))),n.option("conditionals")&&s instanceof AST_If){var f=[],c=_(s.body,f),u=_(s.alternative,f);if(!1!==c&&!1!==u&&0<f.length){var l=f.length;f.push(de(AST_If,s,{condition:s.condition,body:c||de(AST_EmptyStatement,s.body),alternative:u})),f.unshift(i,1),[].splice.apply(e,f),o+=l,i+=l+1,fe=!(r=null);continue}}e[i++]=s,r=s instanceof AST_SimpleStatement?s:null}e.length=i}(e,l)),l.option("join_vars")&&function(e){for(var i,n=0,t=-1;n<e.length;n++){var r,o,a=e[n],s=e[t];if(a instanceof AST_Definitions)s&&s.TYPE==a.TYPE?(s.definitions=s.definitions.concat(a.definitions),fe=!0):i&&i.TYPE==a.TYPE&&ee(a)?(i.definitions=i.definitions.concat(a.definitions),fe=!0):a instanceof AST_Var?((o=S(s,a))?(o.length&&(s.body=K(s,o),t++),fe=!0):t++,e[t]=i=a):e[++t]=a;else{if(a instanceof AST_Exit)a.value=f(a.value);else if(a instanceof AST_For)if(o=u(s,a.init))fe=!0,a.init=o.length?K(a.init,o):null;else{if(s instanceof AST_Var&&(!a.init||a.init.TYPE==s.TYPE)){a.init&&(s.definitions=s.definitions.concat(a.init.definitions)),i=a.init=s,e[t]=c(a),fe=!0;continue}if(i&&a.init&&i.TYPE==a.init.TYPE&&ee(a.init))i.definitions=i.definitions.concat(a.init.definitions),a.init=null,fe=!0;else if(a.init instanceof AST_Var&&(i=a.init,o=S(s,a.init))){if(fe=!0,0==o.length){e[t]=c(a);continue}s.body=K(s,o)}}else if(a instanceof AST_ForEnumeration)i&&i.TYPE==a.init.TYPE&&(r=i.definitions.slice(),a.init=a.init.definitions[0].name.convert_symbol(AST_SymbolRef,function(e,n){r.push(de(AST_VarDef,n,{name:n,value:null})),n.definition().references.push(e)}),i.definitions=r,fe=!0),a.object=f(a.object);else if(a instanceof AST_If)a.condition=f(a.condition);else if(a instanceof AST_SimpleStatement){if(o=u(s,a.body)){if(fe=!0,!o.length)continue;a.body=K(a.body,o)}}else(a instanceof AST_Switch||a instanceof AST_With)&&(a.expression=f(a.expression));e[++t]=i?c(a):a}}function f(e){var n=u(s,e,1);if(!n)return e;fe=!0;var t=e.tail_node();return n[n.length-1]!==t&&n.push(t.left),K(e,n)}function c(e){return e.transform(new TreeTransformer(function(e,n,t){if(e instanceof AST_Definitions){if(i===e)return e;if(i.TYPE!=e.TYPE)return e;var r=this.parent();return r instanceof AST_ForEnumeration&&r.init===e?e:ee(e)?(i.definitions=i.definitions.concat(e.definitions),fe=!0,r instanceof AST_For&&r.init===e?null:t?List.skip:de(AST_EmptyStatement,e)):e}return!(e instanceof AST_ExportDeclaration)&&!(e instanceof AST_Scope)&&is_statement(e)?void 0:e}))}e.length=t+1}(e),l.option("collapse_vars")&&function(o,_){if(se.pinned())return;var p,r,a,s=Object.create(null),S=[],f=Object.create(null),c=o.length,u=new TreeTransformer(function(e,n){if(j)return e;if(!L)return e!==l[d]?e:++d<l.length?V(e,u):(L=!0,(v=(m?X:Y)(e,0))===e&&(j=!0),e);var t=u.parent();if(function(e,n){if(e===P)return!0;if(n instanceof AST_For&&e!==n.init)return!0;if(e instanceof AST_Assign)return"="!=e.operator&&b.equivalent_to(e.left);if(e instanceof AST_Call)return b instanceof AST_PropAccess&&(!!b.equivalent_to(e.expression)&&!(P instanceof AST_LambdaExpression&&!P.contains_this()));if(e instanceof AST_Class)return!_.has_directive("use strict");if(e instanceof AST_Debugger)return!0;if(e instanceof AST_Defun)return E&&b.name===e.name.name;if(e instanceof AST_DestructuredKeyVal)return e.key instanceof AST_Node;if(e instanceof AST_DWLoop)return!0;if(e instanceof AST_LoopControl)return!0;if(e instanceof AST_SymbolRef){if(e.is_declared(_)){if(e.fixed_value())return!1;if(_e(e))return!(n instanceof AST_PropAccess&&n.expression===e)&&ue(e.definition())}else if(M(e,n))return!1;return B?x=!1:!0}return e instanceof AST_Try||e instanceof AST_With}(e,t))return j=!0,e;if(!y&&z(e,t)&&(y=t),e.single_use&&t instanceof AST_VarDef&&t.value===e)return e;if(!(e instanceof AST_SymbolDeclaration)&&(w&&b.equivalent_to(e)||x&&(r=x(e,this)))){if(!I||y&&(r||!F||!B))return r||m||(j=!0),e;if(is_lhs(e,t))return m&&!r&&(h=!0),e;if(m)return y&&0==T&&(T=a-q),r||q++,e;if(q++,fe=j=!0,AST_Node.info("Collapsing {node} [{file}:{line},{col}]",{node:e,file:e.start.file,line:e.start.line,col:e.start.col}),"Binary"==A.TYPE)return de(AST_Assign,A,{operator:"=",left:A.right.left,right:de(AST_Conditional,A,{condition:"&&"==A.operator?A.left:A.left.negate(_),consequent:A.right.right,alternative:e})});if(A instanceof AST_UnaryPostfix)return b instanceof AST_SymbolRef&&(b.definition().fixed=!1),de(AST_UnaryPrefix,A,A);if(A instanceof AST_VarDef){var r=A.name.definition();return r.references.length-r.replaced!=1||_.exposed(r)?de(AST_Assign,A,{operator:"=",left:de(AST_SymbolRef,A.name,A.name),right:A.value}):(r.replaced++,Ae(0,t,e,A.value))}for(var i=A;i.write_only&&(i.write_only=!1,i instanceof AST_Assign);)i=i.right;return A}if((H(e,t)||k(e))&&(v=e)instanceof AST_Scope&&(j=!0),e instanceof AST_Accessor){var o=I;return I=!1,n(e,u),I=o,$(e)}if(e instanceof AST_Destructured){o=I;return I=!1,n(e,u),I=o,$(e)}if(e instanceof AST_DefaultValue){e.name=e.name.transform(u);o=I;return I=!1,e.value=e.value.transform(u),I=o,$(e)}if(!(e instanceof AST_BlockScope)||e instanceof AST_Scope||e.variables&&e.variables.all(function(e){return!N.has(e.name)}))return V(e,u);o=I;return I=!1,V(e,u)||n(e,u),I=o,$(e)},$),i=new TreeTransformer(function(e){if(j)return e;if(!L){if(e!==l[d])return e;switch(d++,l.length-d){case 0:if(L=!0,h)return e;if(e!==A)return e;if(e instanceof AST_VarDef)return e;U.replaced++;var n=i.parent();return n instanceof AST_Sequence&&n.tail_node()!==e?(m.replaced++,List.skip):P;case 1:if(!h&&e.body===A)return L=!0,U.replaced++,m.replaced++,null;default:return V(e,i)}}if(e instanceof AST_SymbolRef&&e.definition()===U){if(is_lhs(e,i.parent()))return e;--q||(j=!0);var t=P.clone();return(t.scope=e.scope,t.reference(),q==T)?(j=!0,de(AST_Assign,A,{operator:"=",left:e,right:t})):(U.replaced++,t)}return e instanceof AST_Default||e instanceof AST_Scope?e:void 0},te);for(;0<=--c;){0==c&&_.option("unused")&&function(){var e,n,i=_.self();if(i instanceof AST_LambdaExpression&&!is_generator(i)&&!i.uses_arguments&&!i.pinned()&&(e=_.parent())instanceof AST_Call&&e.expression===i&&Te(e)&&all(e.args,function(e){return!(e instanceof AST_Spread)})){var o=_.has_directive("use strict");o&&!member(o,i.body)&&(o=!1);for(var a=is_async(i)?function(e){return e instanceof AST_Symbol&&"await"==e.name}:function(e){return e instanceof AST_Await&&!t.find_parent(AST_Scope)},s=null,t=new TreeWalker(function(e,n){if(!l)return!0;if(a(e)||e instanceof AST_Yield)return!(l=null);if(e instanceof AST_ObjectIdentity&&(o||!s))return!(l=null);if(e instanceof AST_SymbolRef&&i.variables.has(e.name)){var t=e.definition().scope;if(t!==se)for(;t=t.parent_scope;)if(t===se)return!0;l=null}if(e instanceof AST_Scope&&!is_arrow(e)){var r=s;return s=e,n(),s=r,!0}}),r=(p=e.args.slice()).length,f=Object.create(null),c=i.argnames.length;0<=--c;){var u=i.argnames[c],l=p[c];if(u instanceof AST_DefaultValue&&(n=u.value,u=u.name,p[r+c]=n),u instanceof AST_Destructured){if(!function n(e,t){if(!t)return!(e instanceof AST_Symbol);if(e instanceof AST_DefaultValue)return t.has_side_effects(_)||e.value.has_side_effects(_)||n(e.name,ve(t)&&e.value);if(e instanceof AST_Destructured)return!(!e.rest||!n(e.rest))||(e instanceof AST_DestructuredArray?!(t instanceof AST_Array||t.is_string(_))||!all(e.elements,function(e){return!n(e)}):e instanceof AST_DestructuredObject?!t.is_defined(_)||!all(e.properties,function(e){return!(e instanceof AST_Node&&e.has_side_effects(_))&&!n(e.value)}):void 0)}(u,l))continue;S.length=0;break}u.name in f||(f[u.name]=!0,(l=n?!l||ve(l)?n:null:l)||n?l instanceof AST_Lambda&&l.pinned()?l=null:l&&l.walk(t):l=de(AST_Undefined,u).transform(_),l&&((u=de(AST_VarDef,u,{name:u,value:l})).name_index=c,u.arg_index=n?r+c:c,S.unshift([u])))}}}();var l=[];for(W(o[c]);0<S.length;){l=S.pop();var d=0,A=l[l.length-1],T=-1,h=!1,m=null,v=null,y=null,b=function(n){if(n instanceof AST_Assign){var t=n.left;if("="!=n.operator)return t;if(!(t instanceof AST_SymbolRef))return t;var e=t.definition();return se.uses_arguments&&le(e)?t:(_.exposed(e)||(a=Z(e),e.fixed&&t.fixed&&((r=e.references.filter(function(e){return e.fixed===t.fixed}).length-1)<a&&(a=r,T=0)),Q(n.right)),t)}if(n instanceof AST_Binary)return n.right.left;if(n instanceof AST_Unary)return n.expression;if(n instanceof AST_VarDef){e=(t=n.name).definition();if(!e.const_redefs&&(member(t,e.orig)&&(!se.uses_arguments||!le(e)))){var r=e.orig.length-e.eliminated-(f[e.name]||0);return a=Z(e),e.fixed&&(a=Math.min(a,e.references.filter(function(e){if(!e.fixed)return!0;if(!e.fixed.assigns)return!0;e=e.fixed.assigns[0];return e===t||ee(e)===n.value}).length)),1<r&&!(t instanceof AST_SymbolFunarg)?(Q(n.value),de(AST_SymbolRef,t,t)):Q(n.value)||1==a&&!_.exposed(e)?de(AST_SymbolRef,t,t):void 0}}else;}(A),g=b&&b.has_side_effects(_),w=b&&!g&&!Se(b,_),x=function(n){if(!(n instanceof AST_Assign&&n.right.single_use)){for(var t,r=Object.create(null),e=new TreeWalker(function(e){e instanceof AST_SymbolRef&&(r[e.definition().id]=!0)});n instanceof AST_Assign&&"="==n.operator;)n.left.walk(e),n=n.right;if(n instanceof AST_ObjectIdentity)return o;if(n instanceof AST_SymbolRef){var i=n.evaluate(_);return i===n?o:ne(i,o)}if(n.is_truthy())return ne(!0,return_false);if(n.is_constant()){i=n.evaluate(_);if(!(i instanceof AST_Node))return ne(i,o)}return b instanceof AST_SymbolRef?!!function e(n){if(n instanceof AST_Array)return!1;if(n instanceof AST_Binary&&ye[n.operator])return e(n.left)&&e(n.right);if(n instanceof AST_Call)return!1;if(n instanceof AST_Conditional)return e(n.consequent)&&e(n.alternative);if(n instanceof AST_Object)return!1;return!n.has_side_effects(_)}(n)&&(n.walk(new TreeWalker(function(e){if(t)return!0;e instanceof AST_SymbolRef&&r[e.definition().id]&&(t=!0)})),!t&&o):!1}function o(e){return n.equivalent_to(e)}}(A);if(w||x){var E=A.name instanceof AST_SymbolFunarg,k=return_false;if(A.may_throw(_)){if(E&&is_async(se))continue;k=ae?function(e){return e.has_side_effects(_)}:t}var D=!1,O=!1,C=!0,N=function(s){var f=new Dictionary;s instanceof AST_VarDef&&(s.name.definition().fixed||(C=!1),f.add(s.name.name,b));var c=se.uses_arguments&&!_.has_directive("use strict"),u=se instanceof AST_Toplevel,l=new TreeWalker(function(e){var n,t,r;if(e instanceof AST_SymbolRef?(r=e.fixed_value())||(n=(r=e).definition(),t=e.fixed&&e.fixed.escaped||n.escaped,n.undeclared||!n.assignments&&t&&!t.cross_scope||!pe(n,e.scope,e,l.parent())&&wn(n)||(C=!1)):e instanceof AST_ObjectIdentity&&(r=e),r)f.add(e.name,ce(_,l,e,r,0));else{if(e instanceof AST_Lambda){for(var i,o=0,a=e;i=l.parent(o++);a=i){if(i instanceof AST_Assign){if(i.left===a)break;if("="==i.operator)continue;if(ye[i.operator.slice(0,-1)])continue;break}if(i instanceof AST_Binary){if(ye[i.operator])continue;break}if(i instanceof AST_Call)return;if(i instanceof AST_Scope)return;if(i instanceof AST_Sequence){if(i.tail_node()===a)continue;break}if(i instanceof AST_Template){if(i.tag)return;break}}return!0}c&&e instanceof AST_Sub&&(se.each_argname(function(e){_.option("reduce_vars")&&!e.definition().assignments||(e.definition().fixed||(C=!1),f.add(e.name,!0))}),c=!1)}u&&("Call"==e.TYPE?O||((r=e.expression)instanceof AST_PropAccess||r instanceof AST_LambdaExpression&&!r.contains_this()||(O=!0)):e instanceof AST_PropAccess&&function e(n){if(n instanceof AST_SymbolRef&&!(n=n.fixed_value()))return!0;if(n instanceof AST_Assign)return"="==n.operator&&e(n.right);return n instanceof AST_PropAccess||n instanceof AST_ObjectIdentity}(e.expression)&&(e!==b||s instanceof AST_Unary?D=!0:O=!0))});return s.walk(l),f}(A),F=function(e){var n=root_expr(e);return n instanceof AST_SymbolRef&&n.definition().scope.resolve()===se&&!(oe&&(N.has(n.name)&&N.get(n.name)[0]!==e||A instanceof AST_Unary||A instanceof AST_Assign&&"="!=A.operator))}(b),P=ee(A);g=g||!(A instanceof AST_Unary)&&P.has_side_effects(_);var R=ae||!F?function(e){return e instanceof AST_Destructured}:return_false,B=function(e){if(e instanceof AST_Unary)return!1;if(g)return!1;if(m)return!0;if(!(b instanceof AST_SymbolRef))return!1;var n;if(e instanceof AST_VarDef)n=1;else{if("="!=e.operator)return!1;n=2}e=b.definition();return e.references.length-e.replaced==n||e.fixed&&b.fixed&&e.references.filter(function(e){return e.fixed===b.fixed}).length==n}(A),L=E,j=!1,q=0,I=!p||!L;if(!I){for(var e=A.arg_index+1;!j&&e<p.length;e++)p[e]&&p[e].transform(u);I=!0}for(var n=c;!j&&n<o.length;n++)o[n].transform(u);if(m){if(!q||q+h<a){S.push(l),r=!0;continue}q==T&&(h=!0);var U=b.definition();j=!1,d=0,L=E;for(n=c;!j&&n<o.length;n++)o[n].transform(i)||o.splice(n--,1);q=A instanceof AST_VarDef&&A===l[l.length-1]&&U.references.length==U.replaced&&!_.exposed(U),m.last_ref=!1,m.single_use=!1,fe=!0}q&&!function(e){var n=e.name_index;if(0<=n){var t=se.argnames[n];return t instanceof AST_DefaultValue?(t.value=de(AST_Number,t,{value:0}),t.name.definition().fixed=!1):(e=_.parent().args)[n]&&(e[n]=de(AST_Number,e[n],{value:0}),t.definition().fixed=!1),!0}var r=l.length-1;l[r-1].body===l[r]&&r--;var i=new TreeTransformer(function(e,n,t){return L||e!==l[d]?e:++d<=r?V(e,i):(L=!0,e instanceof AST_VarDef?(f[e.name.name]=(f[e.name.name]||0)+1,m&&m.replaced++,(e=e.clone()).value=null,e):t?List.skip:null)},te);return L=j=!1,d=0,o[c].transform(i)}(A)&&o.splice(c,1)}}}function $(e){return j||(v===e&&(j=!0),y===e&&(y=null)),e}function V(e,n){if(!(e instanceof AST_BlockScope))return e instanceof AST_ClassProperty&&!e.static?(e.key instanceof AST_Node&&(e.key=e.key.transform(n)),e):void 0;if(e instanceof AST_Scope)return e;if(e instanceof AST_ForEnumeration)return e.object=e.object.transform(n),j=!0,e;if(e instanceof AST_Switch){e.expression=e.expression.transform(n);for(var t=0;!j&&t<e.body.length;t++){var r=e.body[t];if(r instanceof AST_Case){if(!L){if(r!==l[d])continue;d++}if(r.expression=r.expression.transform(n),!B)break;x=!1}}return j=!0,e}}function M(e,n){return n instanceof AST_Assign?"="==n.operator&&n.left===e:n instanceof AST_DefaultValue?n.name===e:n instanceof AST_DestructuredArray||n instanceof AST_DestructuredKeyVal&&n.value===e}function z(e,n){return n instanceof AST_Assign?n.left!==e&&ye[n.operator.slice(0,-1)]:n instanceof AST_Binary?n.left!==e&&ye[n.operator]:n instanceof AST_Call?n.optional&&n.expression!==e:n instanceof AST_Case?n.expression!==e:n instanceof AST_Conditional||n instanceof AST_If?n.condition!==e:n instanceof AST_Sub&&(n.optional&&n.expression!==e)}function H(e,n){if(e instanceof AST_Await)return 1;if("Binary"==e.TYPE)return"in"==e.operator&&!vn(e.right);if(e instanceof AST_Call){var t=e.expression;if(t instanceof AST_SymbolRef&&(f=t.definition(),t=t.fixed_value()),!(t instanceof AST_Lambda))return!e.is_expr_pure(_);if(f&&gn(_,f,t))return 1;if(t.collapse_scanning)return;t.collapse_scanning=!0;var r=I;I=!1;var i=v,o=y;if(all(t.argnames,function(e){if(e instanceof AST_DefaultValue){if(e.value.transform(u),j)return!1;e=e.name}return!(e instanceof AST_Destructured)}))if(is_arrow(t)&&t.value)t.value.transform(u);else for(var a=0;!j&&a<t.body.length;a++){var s=t.body[a];if(s instanceof AST_Return){s.value&&s.value.transform(u);break}s.transform(u)}else j=!0;return(y=o,v=i,I=r,delete t.collapse_scanning,j)?(j=!1,1):void 0}if(e instanceof AST_Exit){if(ae){if(ae.bfinally)return 1;if(ae.bcatch&&e instanceof AST_Throw)return 1}return g||b instanceof AST_PropAccess||ie(b)}if(e instanceof AST_Function)return _.option("ie")&&e.name&&N.has(e.name.name);if(e instanceof AST_ObjectIdentity)return re(e);if(e instanceof AST_PropAccess){if(g)return 1;r=e.expression;if(r instanceof AST_SymbolRef&&ue(r.definition()))return 1;if(_.option("unsafe")){if(he(r)&&me[r.name])return;if(ge(r))return}return C?!m&&((ae||!F)&&(!e.optional&&r.may_throw_on_access(_))):1}if(e instanceof AST_Spread)return 1;if(e instanceof AST_SymbolRef){if(re(e))return!M(e,n);if(g&&ie(e))return 1;var f=e.definition();return(ae||f.scope.resolve()!==se)&&!_e(e)}if(e instanceof AST_Template)return!e.is_expr_pure(_);if(e instanceof AST_VarDef)return R(e.name)||(e.value||n instanceof AST_Let)&&e.name.match_symbol(function(e){return e instanceof AST_SymbolDeclaration&&(N.has(e.name)||g&&ie(e))},!0);if(e instanceof AST_Yield)return 1;e=is_lhs(e.left,e);return e&&(e instanceof AST_PropAccess||(R(e)||e.match_symbol(function(e){return e instanceof AST_SymbolRef&&(N.has(e.name)||D&&_.exposed(e.definition()))},!0)))}function W(e,n){var t,r,i;l.push(e),e instanceof AST_Array?e.elements.forEach(function(e){W(e,n)}):e instanceof AST_Assign?((t=e.left)instanceof AST_Destructured||S.push(l.slice()),W(t),W(e.right),t instanceof AST_SymbolRef&&"="==e.operator&&(s[t.name]=(s[t.name]||0)+1)):e instanceof AST_Await?W(e.expression,n):e instanceof AST_Binary?(i=ye[e.operator],n&&i&&"??"!=e.operator&&e.right instanceof AST_Assign&&"="==e.right.operator&&!(e.right.left instanceof AST_Destructured)&&S.push(l.slice()),W(e.left,!i&&n),W(e.right,n)):e instanceof AST_Call?(W(e.expression),e.args.forEach(W)):e instanceof AST_Case?W(e.expression):e instanceof AST_Conditional?(W(e.condition),W(e.consequent,n),W(e.alternative,n)):e instanceof AST_Definitions?e.definitions.forEach(W):e instanceof AST_Dot?W(e.expression):e instanceof AST_DWLoop?(W(e.condition),e.body instanceof AST_Block||W(e.body)):e instanceof AST_Exit?e.value&&W(e.value):e instanceof AST_For?(e.init&&W(e.init,!0),e.condition&&W(e.condition),e.step&&W(e.step,!0),e.body instanceof AST_Block||W(e.body)):e instanceof AST_ForEnumeration?(W(e.object),e.body instanceof AST_Block||W(e.body)):e instanceof AST_If?(W(e.condition),e.body instanceof AST_Block||W(e.body),!e.alternative||e.alternative instanceof AST_Block||W(e.alternative)):e instanceof AST_Object?e.properties.forEach(function(e){l.push(e),e.key instanceof AST_Node&&W(e.key),e instanceof AST_ObjectKeyVal&&W(e.value,n),l.pop()}):e instanceof AST_Sequence?(r=e.expressions.length-(n?0:1),e.expressions.forEach(function(e,n){W(e,n<r)})):e instanceof AST_SimpleStatement?W(e.body,!0):e instanceof AST_Spread?W(e.expression):e instanceof AST_Sub?(W(e.expression),W(e.property)):e instanceof AST_Switch?(W(e.expression),e.body.forEach(W)):e instanceof AST_Unary?UNARY_POSTFIX[e.operator]?S.push(l.slice()):W(e.expression):e instanceof AST_VarDef?(e.name instanceof AST_SymbolVar&&(e.value?(i=e.name.definition()).references.length>i.replaced&&S.push(l.slice()):f[e.name.name]=(f[e.name.name]||0)+1),e.value&&W(e.value)):e instanceof AST_Yield&&e.expression&&W(e.expression),l.pop()}function Y(e,n){var t=u.parent(n);return t instanceof AST_Array||t instanceof AST_Assign||t instanceof AST_Await||t instanceof AST_Binary||t instanceof AST_Call||t instanceof AST_Case||t instanceof AST_Conditional?e:t instanceof AST_Definitions?J(t,n+1):t instanceof AST_Exit||t instanceof AST_If||t instanceof AST_IterationStatement||t instanceof AST_ObjectProperty||t instanceof AST_PropAccess?e:t instanceof AST_Sequence?(t.tail_node()===e?Y:J)(t,n+1):t instanceof AST_SimpleStatement?J(t,n+1):t instanceof AST_Spread||t instanceof AST_Switch||t instanceof AST_Unary||t instanceof AST_VarDef||t instanceof AST_Yield?e:null}function G(e,n,t){for(var r;r=e,(e=u.parent(++t))instanceof AST_Assign&&e.operator.slice(0,-1)==n||e instanceof AST_Binary&&e.operator==n;);return r}function K(e,n,t,r,i){var o=I;I=!1;var a=v,s=y,f=u.stack;return u.stack=[r],e.transform(u),u.stack=f,y=s,v=a,I=o,j?(j=!1,t):n(r,i+1)}function X(e,n){var t=u.parent(n);if(t instanceof AST_Array)return X(t,n+1);if(t instanceof AST_Assign)return k(t)||t.left.match_symbol(function(e){return e instanceof AST_SymbolRef&&(b.name==e.name||m.name==e.name)})?e:t.left!==e&&ye[r=t.operator.slice(0,-1)]?G(t,r,n):X(t,n+1);if(t instanceof AST_Binary)return t.left!==e&&ye[r=t.operator]?G(t,r,n):X(t,n+1);if(t instanceof AST_Call)return t;if(t instanceof AST_Case)return t.expression!==e?e:X(t,n+1);if(t instanceof AST_Conditional)return t.condition!==e?e:X(t,n+1);if(t instanceof AST_Definitions)return J(t,n+1);if(t instanceof AST_Do)return e;if(t instanceof AST_Exit)return J(t,n+1);if(t instanceof AST_For)return t.init!==e&&t.condition!==e?e:X(t,n+1);if(t instanceof AST_ForEnumeration)return t.init!==e?e:X(t,n+1);if(t instanceof AST_If)return t.condition!==e?e:X(t,n+1);if(t instanceof AST_ObjectProperty){var r=u.parent(n+1);return all(r.properties,function(e){return e instanceof AST_ObjectKeyVal})?X(r,n+2):r}return t instanceof AST_PropAccess?t.expression===e?X(t,n+1):e:t instanceof AST_Sequence?(t.tail_node()===e?X:J)(t,n+1):t instanceof AST_SimpleStatement?J(t,n+1):t instanceof AST_Spread?X(t,n+1):t instanceof AST_Switch?t.expression!==e?e:X(t,n+1):t instanceof AST_Unary?"delete"==t.operator?e:X(t,n+1):t instanceof AST_VarDef?t.name.match_symbol(function(e){return e instanceof AST_SymbolDeclaration&&(b.name==e.name||m.name==e.name)})?e:X(t,n+1):t instanceof AST_While?t.condition!==e?e:X(t,n+1):t instanceof AST_Yield?X(t,n+1):null}function J(n,t){var r=u.parent(t);if(H(n,r))return n;if(z(n,r))return n;if(r instanceof AST_Array)return J(r,t+1);if(r instanceof AST_Assign)return i(r.left);if(r instanceof AST_Await)return n;if(r instanceof AST_Binary)return J(r,t+1);if(r instanceof AST_Call)return J(r,t+1);if(r instanceof AST_Case)return J(r,t+1);if(r instanceof AST_Conditional)return J(r,t+1);if(r instanceof AST_Definitions)return J(r,t+1);if(r instanceof AST_Exit)return J(r,t+1);if(r instanceof AST_If)return J(r,t+1);if(r instanceof AST_IterationStatement)return n;if(r instanceof AST_ObjectProperty){var e=u.parent(t+1);return all(e.properties,function(e){return e instanceof AST_ObjectKeyVal})?J(e,t+2):e}if(r instanceof AST_PropAccess){e=r.expression;return e===n?J(r,t+1):K(e,J,n,r,t)}return r instanceof AST_Sequence||r instanceof AST_SimpleStatement?J(r,t+1):r instanceof AST_Spread?n:r instanceof AST_Switch||r instanceof AST_Unary?J(r,t+1):r instanceof AST_VarDef?i(r.name):r instanceof AST_Yield?n:null;function i(e){return k(r)?n:e!==n&&e instanceof AST_Destructured?K(e,J,n,r,t):J(r,t+1)}}function Q(e){if(r)r=!1;else if(!(a<1)){var n=e instanceof AST_Assign&&"="==e.operator?e.left:e;if(n instanceof AST_SymbolRef){var t=n.definition();if(!t.undeclared&&!ue(t)){if(n!==e){if(Se(n,_))return;if(t.references.length-t.replaced<2)return;e=A.clone();e[e instanceof AST_Assign?"right":"value"]=n,0<=A.name_index&&(e.name_index=A.name_index,e.arg_index=A.arg_index),A=e}return m=t}}}}function Z(e){return e.references.length-e.replaced-(s[e.name]||0)}function ee(e){if(e instanceof AST_Assign)return e.right;if(e instanceof AST_Binary){var n=e.clone();return n.right=e.right.right,n}return e instanceof AST_VarDef?e.value:void 0}function ne(t,r){return function(e,n){if(n.in_boolean_context()){if(t&&e.is_truthy()&&!e.has_side_effects(_))return!0;if(e.is_constant()){n=e.evaluate(_);if(!(n instanceof AST_Node))return!n==!t}}return r(e)}}function te(e){if(e instanceof AST_Sequence)switch(e.expressions.length){case 0:return null;case 1:return Ae(0,this.parent(),e,e.expressions[0])}}function re(e){e=N.get(e.name);if(e&&!all(e,function(e){return!e}))return e[0]!==b||void(x=!1)}function ie(e){e=e.definition();return!(1==e.orig.length&&e.orig[0]instanceof AST_SymbolDefun)&&(e.scope.resolve()!==se||(!(!O||!_.exposed(e))||!all(e.references,function(e){return e.scope.resolve()===se})))}function t(e,n){if(e instanceof AST_Assign)return t(e.left,!0);if(e instanceof AST_Unary)return t(e.expression,!0);if(e instanceof AST_VarDef)return e.value&&t(e.value);if(n){if(e instanceof AST_Dot)return t(e.expression,!0);if(e instanceof AST_Sub)return t(e.expression,!0);if(e instanceof AST_SymbolRef)return e.definition().scope.resolve()!==se}return!1}}(e,l),fe&&0<n--;);return e;function _(e,n){if(!(e instanceof AST_BlockStatement))return e;for(var t=null,r=0;r<e.body.length;r++){var i=e.body[r];if(i instanceof AST_Var&&ee(i))n.push(i);else{if(t||P(i))return!1;t=i}}return t}function p(e){return e instanceof AST_Assign?[e]:e instanceof AST_Sequence?e.expressions.slice():void 0}function u(e,n,t){var r=p(n);if(r){for(var i=!1,o=r.length-(t||0);0<=--o;)if(u(f=r[o])){if(f.left instanceof AST_SymbolRef)a=r.slice(o+1);else{if(!(f.left instanceof AST_PropAccess&&u(f.left.expression)))continue;var a=r.slice(o+1),s=f.clone(),f=f.left.expression;s.left=s.left.clone(),s.left.expression=f.left.clone(),a.unshift(s)}0!=a.length&&A(f.left,f.right,a)&&(i=!0,r=r.slice(0,o).concat(f,a))}if(e instanceof AST_Definitions){t=t||0;for(o=e.definitions.length;0<=--o;){var c=e.definitions[o];if(c.value){A(c.name,c.value,r)&&(i=!0),function(e,n,t){if(l.option("conditionals")&&!(e.name instanceof AST_Destructured)){for(var r=!1,i=e.name.definition();n.length>t;){var o=dn(l,i,e.value,n[0]);if(!o)break;e.value=o,n.shift(),r=!0}return r}}(c,r,t)&&(i=!0);break}}e instanceof AST_Var&&d(e.definitions,r,t)&&(i=!0)}return i&&r}function u(e){return e instanceof AST_Assign&&"="==e.operator}}function S(e,n){if(e instanceof AST_SimpleStatement&&!ee(n)){var t=p(e.body);if(t){e=[];if(d(e,t.reverse(),0))return n.definitions=e.reverse().concat(n.definitions),t.reverse()}}}function d(e,n,t){for(var r=!1;n.length>t;){var i=n[0];if(!(i instanceof AST_Assign))break;if("="!=i.operator)break;var o=i.left;if(!(o instanceof AST_SymbolRef))break;if(he(o))break;if(o.scope.resolve()!==se)break;var a=o.definition();if(a.scope!==se)break;if(a.orig.length>a.eliminated+1)break;if("SymbolVar"!=a.orig[0].TYPE)break;o=de(AST_SymbolVar,o,o);e.push(de(AST_VarDef,i,{name:o,value:i.right})),a.orig.push(o),a.replaced++,n.shift(),r=!0}return r}function A(e,i,n){var o=Object.create(null);for(o[e.name]=!0;i instanceof AST_Assign&&"="==i.operator;)i.left instanceof AST_SymbolRef&&(o[i.left.name]=!0),i=i.right;if(i instanceof AST_Object){var t=!1;do{if(!function e(n){if(!(n instanceof AST_Assign))return;if("="!=n.operator)return;if(!(n.left instanceof AST_PropAccess))return;var t=n.left.expression;if(!(t instanceof AST_SymbolRef))return;if(!(t.name in o))return;if(!n.right.is_constant_expression(se))return;var r=n.left.property;r instanceof AST_Node&&(r=(r=e(r)?n.left.property=r.right.clone():r).evaluate(l));if(r instanceof AST_Node)return;r=""+r;t="__proto__"==r||l.has_directive("use strict")?function(e){e=e.key;return"string"==typeof e&&e!=r&&"__proto__"!=e}:function(e){var n=e.key;return e instanceof AST_ObjectGetter||e instanceof AST_ObjectSetter?"string"==typeof n&&n!=r:"__proto__"!==n};if(!all(i.properties,t))return;i.properties.push(de(AST_ObjectKeyVal,n,{key:r,value:n.right}));return!0}(n[0]))break}while(n.shift(),t=!0,n.length);return t}}}function $(r,i,o){var a,s=!1;function f(e){a?(a.push(e),R(e)||(a.required=!0)):o.push(e)}i.walk(new TreeWalker(function(e,n){if(e instanceof AST_DefClass)return e.extends=null,e.properties=[],f(e),!0;if(e instanceof AST_Definitions){var t=[];return e.remove_initializers(r,t)&&AST_Node.warn("Dropping initialization in unreachable code [{file}:{line},{col}]",e.start),0<t.length&&(e.definitions=t,f(e)),!0}if(e instanceof AST_LambdaDefinition)return f(e),!0;if(e instanceof AST_Scope)return!0;if(e instanceof AST_BlockScope){t=a;return a=[],n(),a.required?o.push(de(AST_BlockStatement,i,{body:a})):a.length&&[].push.apply(o,a),a=t,!0}e instanceof AST_LoopControl||(s=!0)})),s&&AST_Node.warn("Dropping unreachable code [{file}:{line},{col}]",i.start)}function ve(e,n){return e.is_undefined||e instanceof AST_Undefined||e instanceof AST_UnaryPrefix&&"void"==e.operator&&!(n&&e.expression.has_side_effects(n))}function V(e,n,t){switch(e){case"-":return n.is_negative_zero()&&(!(t instanceof AST_Constant)||0==t.value);case"&&":case"||":return n.is_negative_zero()||t.is_negative_zero();case"*":case"/":case"%":case"**":return!0;default:return!1}}function M(e,n){return n||/strict/.test(e.option("pure_getters"))}function z(e,n,t){switch(n){case"&&":return t.left.is_defined(e)&&t.right.is_defined(e);case"||":return t.left.is_truthy()||t.right.is_defined(e);case"??":return t.left.is_defined(e)||t.right.is_defined(e);default:return!0}}AST_SymbolRef.DEFMETHOD("is_declared",function(e){return this.defined||!this.definition().undeclared||e.option("unsafe")&&me[this.name]}),(se=function(e,n){e.DEFMETHOD("is_truthy",n)})(AST_Node,return_false),se(AST_Array,return_true),se(AST_Assign,function(){return"="==this.operator&&this.right.is_truthy()}),se(AST_Lambda,return_true),se(AST_Object,return_true),se(AST_RegExp,return_true),se(AST_Sequence,function(){return this.tail_node().is_truthy()}),se(AST_SymbolRef,function(){var e=this.fixed_value();if(!e)return!1;this.is_truthy=return_false;e=e.is_truthy();return delete this.is_truthy,e}),(se=function(e,n){e.DEFMETHOD("is_negative_zero",n)})(AST_Node,return_true),se(AST_Array,return_false),se(AST_Assign,function(){var e=this.operator;return"="==e?this.right.is_negative_zero():V(e.slice(0,-1),this.left,this.right)}),se(AST_Binary,function(){return V(this.operator,this.left,this.right)}),se(AST_Constant,function(){return 0==this.value&&1/this.value<0}),se(AST_Lambda,return_false),se(AST_Object,return_false),se(AST_RegExp,return_false),se(AST_Sequence,function(){return this.tail_node().is_negative_zero()}),se(AST_SymbolRef,function(){var e=this.fixed_value();if(!e)return!0;this.is_negative_zero=return_true;e=e.is_negative_zero();return delete this.is_negative_zero,e}),se(AST_UnaryPrefix,function(){return"+"==this.operator&&this.expression.is_negative_zero()||"-"==this.operator}),se=function(e,n){e.DEFMETHOD("_dot_throw",n)},AST_Node.DEFMETHOD("may_throw_on_access",function(e,n){return!e.option("pure_getters")||this._dot_throw(e,n)}),se(AST_Node,M),se(AST_Array,return_false),se(AST_Assign,function(e){var n=this.operator,t=this.left,r=this.right;return"="!=n?ye[n.slice(0,-1)]&&(t._dot_throw(e)||r._dot_throw(e)):!!r._dot_throw(e)&&(!(t instanceof AST_SymbolRef)||(!(r instanceof AST_Binary&&"||"==r.operator&&t.name==r.left.name)||r.right._dot_throw(e)))}),se(AST_Binary,function(e){return ye[this.operator]&&(this.left._dot_throw(e)||this.right._dot_throw(e))}),se(AST_Class,return_false),se(AST_Conditional,function(e){return this.consequent._dot_throw(e)||this.alternative._dot_throw(e)}),se(AST_Constant,return_false),se(AST_Dot,function(e,n){if(!M(e,n))return!1;n=this.expression;return n instanceof AST_SymbolRef&&(n=n.fixed_value()),!("prototype"==this.property&&O(n))}),se(AST_Lambda,return_false),se(AST_Null,return_true),se(AST_Object,function(n,t){return M(n,t)&&!all(this.properties,function(e){return e instanceof AST_ObjectKeyVal&&!("__proto__"===e.key&&e.value._dot_throw(n,t))})}),se(AST_ObjectIdentity,function(e,n){return M(e,n)&&!this.scope.resolve().new}),se(AST_Sequence,function(e){return this.tail_node()._dot_throw(e)}),se(AST_SymbolRef,function(e,n){if(this.is_undefined)return!0;if(!M(e,n))return!1;if(he(this)&&this.is_declared(e))return!1;if(this.is_immutable())return!1;n=this.definition();if(ue(n)&&!n.scope.rest&&all(n.scope.argnames,function(e){return e instanceof AST_SymbolFunarg}))return 2<n.scope.uses_arguments;n=this.fixed_value();return!n||(this._dot_throw=return_true,n._dot_throw(e)?(delete this._dot_throw,!0):(this._dot_throw=return_false,!1))}),se(AST_UnaryPrefix,function(){return"void"==this.operator}),se(AST_UnaryPostfix,return_false),se(AST_Undefined,return_true),(se=function(e,n){e.DEFMETHOD("is_defined",n)})(AST_Node,return_false),se(AST_Array,return_true),se(AST_Assign,function(e){var n=this.operator;return"="==n?this.right.is_defined(e):z(e,n.slice(0,-1),this)}),se(AST_Binary,function(e){return z(e,this.operator,this)}),se(AST_Conditional,function(e){return this.consequent.is_defined(e)&&this.alternative.is_defined(e)}),se(AST_Constant,return_true),se(AST_Hole,return_false),se(AST_Lambda,return_true),se(AST_Object,return_true),se(AST_Sequence,function(e){return this.tail_node().is_defined(e)}),se(AST_SymbolRef,function(e){if(this.is_undefined)return!1;if(he(this)&&this.is_declared(e))return!0;if(this.is_immutable())return!0;var n=this.fixed_value();if(!n)return!1;this.is_defined=return_false;e=n.is_defined(e);return delete this.is_defined,e}),se(AST_UnaryPrefix,function(){return"void"!=this.operator}),se(AST_UnaryPostfix,return_true),se(AST_Undefined,return_false),function(e){e(AST_Node,return_false),e(AST_Assign,function(e){return"="==this.operator&&this.right.is_boolean(e)});var n=makePredicate("in instanceof == != === !== < <= >= >");e(AST_Binary,function(e){return n[this.operator]||ye[this.operator]&&this.left.is_boolean(e)&&this.right.is_boolean(e)}),e(AST_Boolean,return_true);var t=makePredicate("every hasOwnProperty isPrototypeOf propertyIsEnumerable some");e(AST_Call,function(e){if(!e.option("unsafe"))return!1;e=this.expression;return e instanceof AST_Dot&&(t[e.property]||"test"==e.property&&e.expression instanceof AST_RegExp)}),e(AST_Conditional,function(e){return this.consequent.is_boolean(e)&&this.alternative.is_boolean(e)}),e(AST_New,return_false),e(AST_Sequence,function(e){return this.tail_node().is_boolean(e)}),e(AST_SymbolRef,function(e){var n=this.fixed_value();if(!n)return!1;this.is_boolean=return_false;e=n.is_boolean(e);return delete this.is_boolean,e});var r=makePredicate("! delete");e(AST_UnaryPrefix,function(){return r[this.operator]})}(function(e,n){e.DEFMETHOD("is_boolean",n)}),function(e){e(AST_Node,return_false);var n=makePredicate("- * / % ** & | ^ << >> >>>");e(AST_Assign,function(e){return n[this.operator.slice(0,-1)]||"="==this.operator&&this.right.is_number(e)}),e(AST_Binary,function(e){return!!n[this.operator]||"+"==this.operator&&((this.left.is_boolean(e)||this.left.is_number(e))&&(this.right.is_boolean(e)||this.right.is_number(e)))});var t=makePredicate(["charCodeAt","getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","indexOf","lastIndexOf","localeCompare","push","search","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toExponential","toFixed","toPrecision"]);e(AST_Call,function(e){if(!e.option("unsafe"))return!1;e=this.expression;return e instanceof AST_Dot&&(t[e.property]||he(e.expression)&&"Math"==e.expression.name)}),e(AST_Conditional,function(e){return this.consequent.is_number(e)&&this.alternative.is_number(e)}),e(AST_New,return_false),e(AST_Number,return_true),e(AST_Sequence,function(e){return this.tail_node().is_number(e)}),e(AST_SymbolRef,function(e){var n=this.fixed_value();if(!n)return!1;this.is_number=return_false;e=n.is_number(e);return delete this.is_number,e});var r=makePredicate("+ - ~ ++ --");e(AST_Unary,function(){return r[this.operator]})}(function(e,n){e.DEFMETHOD("is_number",n)}),function(e){e(AST_Node,return_false),e(AST_Assign,function(e){switch(this.operator){case"+=":if(this.left.is_string(e))return!0;case"=":return this.right.is_string(e)}}),e(AST_Binary,function(e){return"+"==this.operator&&(this.left.is_string(e)||this.right.is_string(e))});var n=makePredicate(["charAt","substr","substring","toLowerCase","toString","toUpperCase","trim"]);e(AST_Call,function(e){if(!e.option("unsafe"))return!1;e=this.expression;return e instanceof AST_Dot&&n[e.property]}),e(AST_Conditional,function(e){return this.consequent.is_string(e)&&this.alternative.is_string(e)}),e(AST_Sequence,function(e){return this.tail_node().is_string(e)}),e(AST_String,return_true),e(AST_SymbolRef,function(e){var n=this.fixed_value();if(!n)return!1;this.is_string=return_false;e=n.is_string(e);return delete this.is_string,e}),e(AST_Template,function(e){return!this.tag||xn(e,this.tag)}),e(AST_UnaryPrefix,function(){return"typeof"==this.operator})}(function(e,n){e.DEFMETHOD("is_string",n)});var ye=makePredicate("&& || ??");function H(e){AST_Node.warn("global_defs {node} redefined [{file}:{line},{col}]",{node:e,file:e.start.file,line:e.start.line,col:e.start.col})}function ne(e,n,t){return n.print_to_string().length-e.print_to_string().length<(t||0)?n:e}function W(e,n,t){return ne(de(AST_SimpleStatement,e,{body:e}),de(AST_SimpleStatement,n,{body:n}),t).body}function te(e,n,t,r){return(first_in_statement(e)?W:ne)(n,t,r)}function re(n){var t=Object.create(null);return Object.keys(n).forEach(function(e){t[e]=makePredicate(n[e])}),t}function ie(e){for(var n=0;n<e.length;n++){var t=e[n];if(!(t instanceof AST_Directive))return t}}function oe(){return this.value?de(AST_Return,this.value,{value:this.value}):ie(this.body)}function ae(e,n){var t=n.evaluate(e);return t===n?n:te(e,n,X(t,n).optimize(e),e.eval_threshold)}se=function(e,n){e.DEFMETHOD("_find_defs",n)},AST_Toplevel.DEFMETHOD("resolve_defines",function(o){return o.option("global_defs")?(this.figure_out_scope({ie:o.option("ie")}),this.transform(new TreeTransformer(function(e){var n=e._find_defs(o,"");if(n){for(var t,r=0,i=e;(t=this.parent(r++))&&t instanceof AST_PropAccess&&t.expression===i;)i=t;if(!is_lhs(i,t))return n;H(e)}}))):this}),se(AST_Node,noop),se(AST_Dot,function(e,n){return this.expression._find_defs(e,"."+this.property+n)}),se(AST_SymbolDeclaration,function(e){this.definition().global&&HOP(e.option("global_defs"),this.name)&&H(this)}),se(AST_SymbolRef,function(e,n){if(this.definition().global){e=e.option("global_defs"),n=this.name+n;return HOP(e,n)?function n(e,t){if(e instanceof AST_Node)return e.clone(!0);if(Array.isArray(e))return de(AST_Array,t,{elements:e.map(function(e){return n(e,t)})});if(e&&"object"==typeof e){var r,i=[];for(r in e)HOP(e,r)&&i.push(de(AST_ObjectKeyVal,t,{key:r,value:n(e[r],t)}));return de(AST_Object,t,{properties:i})}return X(e,t)}(e[n],this):void 0}}),AST_Arrow.DEFMETHOD("first_statement",oe),AST_AsyncArrow.DEFMETHOD("first_statement",oe),AST_Lambda.DEFMETHOD("first_statement",function(){return ie(this.body)}),AST_Lambda.DEFMETHOD("length",function(){for(var e=this.argnames,n=0;n<e.length&&!(e[n]instanceof AST_DefaultValue);n++);return n});var se=["constructor","toString","valueOf"],fe=re({Array:["indexOf","join","lastIndexOf","slice"].concat(se),Boolean:se,Function:se,Number:["toExponential","toFixed","toPrecision"].concat(se),Object:se,RegExp:["exec","test"].concat(se),String:["charAt","charCodeAt","concat","indexOf","italics","lastIndexOf","match","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase","trim"].concat(se)}),be=re({Array:["isArray"],Math:["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","atan2","pow","max","min"],Number:["isFinite","isNaN"],Object:["create","getOwnPropertyDescriptor","getOwnPropertyNames","getPrototypeOf","isExtensible","isFrozen","isSealed","keys"],String:["fromCharCode","raw"]});function ge(e){if(e instanceof AST_Dot){var n=e.expression;if(he(n)){var t=be[n.name];return t&&(t[e.property]||"Math"==n.name&&"random"==e.property)}}}function we(e){return de(AST_UnaryPrefix,e,{operator:"!",expression:e})}function xe(e,n,t){e=we(e);if(t){t=de(AST_SimpleStatement,n,{body:n});return ne(e,t)===t?n:e}return ne(e,n)}!function(e){e(AST_Node,return_false),e(AST_Constant,return_true),e(AST_RegExp,return_false);var n=makePredicate("! ~ - + void");e(AST_UnaryPrefix,function(){return n[this.operator]&&this.expression instanceof AST_Constant})}(function(e,n){e.DEFMETHOD("is_constant",n)}),function(e){AST_Node.DEFMETHOD("evaluate",function(e,n){if(!e.option("evaluate"))return this;var t=[],e=this._eval(e,n,t,1);return t.forEach(function(e){delete e._eval}),!n&&e&&!(e instanceof RegExp)&&("function"==typeof e||"object"==typeof e)?this:e});var p=new TreeWalker(function(e){e instanceof AST_Assign&&f(e.left),e instanceof AST_Unary&&UNARY_POSTFIX[e.operator]&&f(e.expression)});function f(e){e instanceof AST_DestructuredArray?e.elements.forEach(f):e instanceof AST_DestructuredObject?e.properties.forEach(function(e){f(e.value)}):e instanceof AST_PropAccess?f(e.expression):e instanceof AST_SymbolRef&&e.definition().references.forEach(function(e){delete e._eval})}e(AST_Statement,function(){throw new Error(string_template("Cannot evaluate a statement [{file}:{line},{col}]",this.start))}),e(AST_Accessor,return_this),e(AST_BigInt,return_this),e(AST_Class,return_this),e(AST_Node,return_this),e(AST_Constant,function(){return this.value}),e(AST_Assign,function(e,n,t,r){var i=this.left;if(!n){if(!(i instanceof AST_SymbolRef))return this;if(!HOP(i,"_eval")){if(!i.fixed)return this;var o=i.definition();if(!o.fixed)return this;if(o.undeclared)return this;if(o.last_ref!==i)return this;if("m"==o.single_use)return this}}var o=this.operator,o=!HOP(i,"_eval")&&i instanceof AST_SymbolRef&&i.fixed&&i.definition().fixed?i:"="==o?this.right:de(AST_Binary,this,{operator:o.slice(0,-1),left:i,right:this.right});i.walk(p);r=o._eval(e,n,t,r);return"object"==typeof r?this:(f(i),r)}),e(AST_Sequence,function(e,n,t,r){if(!n)return this;for(var i=this.expressions,o=0,a=i.length-1;o<a;o++)i[o].walk(p);var s=i[a],r=s._eval(e,n,t,r);return r===s?this:r}),e(AST_Lambda,function(e){if(e.option("unsafe")){function n(){}return n.node=this,n.toString=function(){return"function(){}"},n}return this}),e(AST_Array,function(e,n,t,r){if(e.option("unsafe")){for(var i=[],o=0;o<this.elements.length;o++){var a=this.elements[o];if(a instanceof AST_Hole)return this;var s=a._eval(e,n,t,r);if(a===s)return this;i.push(s)}return i}return this});var c=makePredicate("__proto__ toString valueOf");e(AST_Object,function(e,n,t,r){if(e.option("unsafe")){for(var i={},o=0;o<this.properties.length;o++){var a=this.properties[o];if(!(a instanceof AST_ObjectKeyVal))return this;var s=a.key;if(s instanceof AST_Node&&(s=s._eval(e,n,t,r))===a.key)return this;if(c[s])return this;if(i[s]=a.value._eval(e,n,t,r),i[s]===a.value)return this}return i}return this});var u=makePredicate("! typeof void");e(AST_UnaryPrefix,function(e,n,t,r){var i=this.expression,o=this.operator;if(e.option("typeofs")&&"typeof"==o&&(i instanceof AST_Lambda||i instanceof AST_SymbolRef&&i.fixed_value()instanceof AST_Lambda))return"function";var a=i instanceof AST_SymbolRef&&i.definition();u[o]||a&&a.fixed||r++,i.walk(p);var s=i._eval(e,n,t,r);if(s===i)return n&&"void"==o?void 0:this;switch(o){case"!":return!s;case"typeof":return s instanceof RegExp?this:typeof s;case"void":return;case"~":return~s;case"-":return-s;case"+":return+s;case"++":case"--":if(!a)return this;if(!n){if(a.undeclared)return this;if(a.last_ref!==i)return this}return HOP(i,"_eval")&&(s=+(o[0]+1)+ +s),f(i),s}return this}),e(AST_UnaryPostfix,function(e,n,t,r){var i=this.expression;if(i instanceof AST_SymbolRef){if(!HOP(i,"_eval")){if(!i.fixed)return this;if(!n){var o=i.definition();if(!o.fixed)return this;if(o.undeclared)return this;if(o.last_ref!==i)return this}}}else if(!n)return this;i instanceof AST_SymbolRef&&i.definition().fixed||r++,i.walk(p);r=i._eval(e,n,t,r);return r===i?this:(f(i),+r)});var l=makePredicate("&& || === !==");e(AST_Binary,function(e,n,t,r){l[this.operator]||r++;var i=this.left._eval(e,n,t,r);if(i===this.left)return this;if(this.operator==(i?"||":"&&"))return i;var o,a=this.right._eval(e,n&&!(i&&"object"==typeof i),t,r);if(a===this.right)return this;switch(this.operator){case"&&":o=i&&a;break;case"||":o=i||a;break;case"??":o=null==i?a:i;break;case"|":o=i|a;break;case"&":o=i&a;break;case"^":o=i^a;break;case"+":o=i+a;break;case"-":o=i-a;break;case"*":o=i*a;break;case"/":o=i/a;break;case"%":o=i%a;break;case"<<":o=i<<a;break;case">>":o=i>>a;break;case">>>":o=i>>>a;break;case"==":o=i==a;break;case"===":o=i===a;break;case"!=":o=i!=a;break;case"!==":o=i!==a;break;case"<":o=i<a;break;case"<=":o=i<=a;break;case">":o=a<i;break;case">=":o=a<=i;break;case"**":o=Math.pow(i,a);break;case"in":if(a&&"object"==typeof a&&HOP(a,i)){o=!0;break}default:return this}if(isNaN(o))return e.find_parent(AST_With)?this:o;if(e.option("unsafe_math")&&!n&&o&&"number"==typeof o&&("+"==this.operator||"-"==this.operator)){n=Math.max(0,s(i),s(a));if(n<16)return+o.toFixed(n)}return o;function s(e){e=/(\.[0-9]*)?(e.+)?$/.exec(+e);return(e[1]||".").length-1-(e[2]||"").slice(1)}}),e(AST_Conditional,function(e,n,t,r){var i=this.condition._eval(e,n,t,r);if(i===this.condition)return this;i=i?this.consequent:this.alternative,r=i._eval(e,n,t,r);return r===i?this:r}),e(AST_SymbolRef,function(e,n,t,r){var i,o=this.fixed_value();if(!o)return this;if(HOP(o,"_eval"))i=o._eval();else{if(this._eval=return_this,i=o._eval(e,n,t,r),delete this._eval,i===o)return this;o._eval=function(){return i},t.push(o)}return i&&"object"==typeof i&&!function(n,e){var t=n.definition().escaped;switch(t.length){case 0:return 1;case 1:var r=!1;return t[0].walk(new TreeWalker(function(e){return!!r||(e===n?r=!0:e instanceof AST_Scope||void 0)})),r;default:return e<=t.depth}}(this,r)?this:i});var S={Array:Array,Math:Math,Number:Number,Object:Object,String:String},s=re({Math:["E","LN10","LN2","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],Number:["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"]}),_=makePredicate("global ignoreCase multiline source");function d(e,n,t,r,i){for(var o=[],a=0;a<e.length;a++){var s=e[a],f=s._eval(n,t,r,i);if(s===f)return;o.push(f)}return o}e(AST_PropAccess,function(e,n,t,r){if(e.option("unsafe")){var i,o=this.expression;if(!he(o)&&(null==(i=o._eval(e,n,t,r+1))||i===o))return this;var a=this.property;if(a instanceof AST_Node&&(a=a._eval(e,n,t,r))===this.property)return this;if(void 0===i){r=s[o.name];if(!r||!r[a])return this;i=S[o.name]}else if(i instanceof RegExp){if(!_[a])return this}else if("object"==typeof i){if(!HOP(i,a))return this}else if("function"==typeof i)switch(a){case"name":return i.node.name?i.node.name.name:"";case"length":return i.node.length();default:return this}return i[a]}return this}),e(AST_Call,function(r,i,o,a){var e=this.expression,n=e instanceof AST_SymbolRef?e.fixed_value():e;if(n instanceof AST_Arrow||n instanceof AST_Defun||n instanceof AST_Function){if(n.evaluating)return this;if(n.name&&0<n.name.definition().recursive_refs)return this;if(this.is_expr_pure(r))return this;var s=d(this.args,r,i,o,a);if(!all(n.argnames,function(e,n){if(e instanceof AST_DefaultValue){if(!s)return!1;if(void 0===s[n]){var t=e.value._eval(r,i,o,a);if(t===e.value)return!1;s[n]=t}e=e.name}return!(e instanceof AST_Destructured)}))return this;if(n.rest instanceof AST_Destructured)return this;if(!s&&!i)return this;var t=n.first_statement();if(!(t instanceof AST_Return)){if(i){n.walk(p);var f=!1;if(n.evaluating=!0,walk_body(n,new TreeWalker(function(e){return!!f||(e instanceof AST_Return?(e.value&&void 0!==e.value._eval(r,!0,o,a)&&(f=!0),!0):e instanceof AST_Scope&&e!==n||void 0)})),delete n.evaluating,!f)return}return this}if(!(u=t.value))return;var c=[];return s&&(!all(n.argnames,function(e,n){return _(e,s[n])})||n.rest&&!_(n.rest,s.slice(n.argnames.length)))&&!i||(i&&n.argnames.forEach(function(e){e instanceof AST_DefaultValue&&e.value.walk(p)}),n.evaluating=!0,u=u._eval(r,i,o,a),delete n.evaluating),c.forEach(function(e){delete e._eval}),u===t.value?this:u}if(r.option("unsafe")&&e instanceof AST_PropAccess){var u,t=e.property;if(t instanceof AST_Node&&(t=t._eval(r,i,o,a))===e.property)return this;e=e.expression;if(he(e)){var l=be[e.name];if(!l||!l[t])return this;u=S[e.name]}else{if(null==(u=e._eval(r,i,o,a+1))||u===e)return this;l=fe[u.constructor.name];if(!l||!l[t])return this;if(u instanceof RegExp&&u.global&&!(e instanceof AST_RegExp))return this}if(!(s=d(this.args,r,i,o,a)))return this;if("replace"==t&&"function"==typeof s[1])return this;try{return u[t].apply(u,s)}catch(e){AST_Node.warn("Error evaluating {code} [{file}:{line},{col}]",{code:this,file:this.start.file,line:this.start.line,col:this.start.col})}finally{u instanceof RegExp&&(u.lastIndex=0)}}return this;function _(e,n){var t=(e=e instanceof AST_DefaultValue?e.name:e).definition();if(t.orig[t.orig.length-1]!==e)return!1;var r=n;return t.references.forEach(function(e){e._eval=function(){return r},c.push(e)}),!0}}),e(AST_New,return_this),e(AST_Template,function(e,n,t,r){if(!e.option("templates"))return this;if(this.tag){if(!xn(e,this.tag))return this;f=function(e){return e}}var i=d(this.expressions,e,n,t,r);if(!i)return this;for(var o=!1,a=f(this.strings[0]),s=0;s<i.length;s++)a+=i[s]+f(this.strings[s+1]);return o?(this._eval=return_this,this):a;function f(e){return"string"!=typeof(e=En(e))&&(o=!0),e}})}(function(e,n){e.DEFMETHOD("_eval",n)}),(se=function(e,t){e.DEFMETHOD("negate",function(e,n){return t.call(this,e,n)})})(AST_Node,function(){return we(this)}),se(AST_Statement,function(){throw new Error("Cannot negate a statement")}),se(AST_Binary,function(e,n){var t=this.clone(),r=this.operator;if(e.option("unsafe_comps"))switch(r){case"<=":return t.operator=">",t;case"<":return t.operator=">=",t;case">=":return t.operator="<",t;case">":return t.operator="<=",t}switch(r){case"==":return t.operator="!=",t;case"!=":return t.operator="==",t;case"===":return t.operator="!==",t;case"!==":return t.operator="===",t;case"&&":return t.operator="||",t.left=t.left.negate(e,n),t.right=t.right.negate(e),xe(this,t,n);case"||":return t.operator="&&",t.left=t.left.negate(e,n),t.right=t.right.negate(e),xe(this,t,n)}return we(this)}),se(AST_ClassExpression,function(){return we(this)}),se(AST_Conditional,function(e,n){var t=this.clone();return t.consequent=t.consequent.negate(e),t.alternative=t.alternative.negate(e),xe(this,t,n)}),se(AST_LambdaExpression,function(){return we(this)}),se(AST_Sequence,function(e){var n=this.expressions.slice();return n.push(n.pop().negate(e)),K(this,n)}),se(AST_UnaryPrefix,function(){return"!"==this.operator?this.expression:we(this)});var Ee=makePredicate("Boolean decodeURI decodeURIComponent Date encodeURI encodeURIComponent Error escape EvalError isFinite isNaN Number Object parseFloat parseInt RangeError ReferenceError String SyntaxError TypeError unescape URIError"),ke=makePredicate("Map Set WeakMap WeakSet");function De(e){for(;(e=e.tail_node())instanceof AST_SymbolRef;)if(!(e=e.fixed_value()))return!0;return!(e instanceof AST_Array||"Binary"==e.TYPE&&!ye[e.operator]||e instanceof AST_Constant||e instanceof AST_Lambda||e instanceof AST_Object&&all(e.properties,function(e){return!(e instanceof AST_ObjectGetter||e instanceof AST_Spread)})||e instanceof AST_ObjectIdentity||e instanceof AST_Unary)}function Oe(e,n,t){return!all(e,t?function(e){return e instanceof AST_Spread?!t(e,n):!e.has_side_effects(n)}:function(e){return!e.has_side_effects(n)})}function Ce(e,n){return!e.expression.is_string(n)||e.expression.has_side_effects(n)}function Ne(e,n){for(var t=e.length;0<=--t;)if(e[t].may_throw(n))return!0;return!1}function Fe(e,n){return!!e.may_throw(n)||(!((e=e instanceof AST_SymbolRef?e.fixed_value():e)instanceof AST_Lambda)||(!!Ne(e.argnames,n)||(!!Ne(e.body,n)||is_arrow(e)&&e.value&&e.value.may_throw(n))))}function Pe(e,n){for(var t=e.length;0<=--t;)if(!e[t].is_constant_expression(n))return!1;return!0}function Re(e){return e&&e.aborts()}function Be(){var e=this.body.length;return 0<e&&Re(this.body[e-1])}AST_Call.DEFMETHOD("is_expr_pure",function(e){if(e.option("unsafe")){var n=this.expression;if(he(n)){if(Ee[n.name])return!0;if(this instanceof AST_New&&ke[n.name])return!0}if(ge(n))return!0}return e.option("annotations")&&this.pure||!e.pure_funcs(this)}),AST_Template.DEFMETHOD("is_expr_pure",function(e){var n=this.tag;if(!n)return!0;if(e.option("unsafe")){if(he(n)&&Ee[n.name])return!0;if(n instanceof AST_Dot&&he(n.expression)){var t=be[n.expression.name];return t&&(t[n.property]||"Math"==n.expression.name&&"random"==n.property)}}return!e.pure_funcs(this)}),AST_Node.DEFMETHOD("is_call_pure",return_false),AST_Call.DEFMETHOD("is_call_pure",function(e){if(!e.option("unsafe"))return!1;var n=this.expression;if(!(n instanceof AST_Dot))return!1;var t,r=n.expression,i=n.property;if(r instanceof AST_Array)t=fe.Array;else if(r.is_boolean(e))t=fe.Boolean;else if(r.is_number(e))t=fe.Number;else if(r instanceof AST_RegExp)t=fe.RegExp;else if(r.is_string(e)){if(t=fe.String,"replace"==i){r=this.args[1];if(r&&!r.is_string(e))return!1}}else n.may_throw_on_access(e)||(t=fe.Object);return t&&t[i]}),(se=function(e,n){e.DEFMETHOD("has_side_effects",n)})(AST_Node,return_true),se(AST_Array,function(e){return Oe(this.elements,e,Ce)}),se(AST_Assign,function(e){var n=this.left;if(!(n instanceof AST_PropAccess))return!0;var t=n.expression;return!(t instanceof AST_ObjectIdentity)||!t.scope.resolve().new||n instanceof AST_Sub&&n.property.has_side_effects(e)||this.right.has_side_effects(e)}),se(AST_Binary,function(e){return this.left.has_side_effects(e)||this.right.has_side_effects(e)||"in"==this.operator&&!vn(this.right)}),se(AST_Block,function(e){return Oe(this.body,e)}),se(AST_Call,function(e){return!(this.is_expr_pure(e)||this.is_call_pure(e)&&!this.expression.has_side_effects(e))||Oe(this.args,e,Ce)}),se(AST_Case,function(e){return this.expression.has_side_effects(e)||Oe(this.body,e)}),se(AST_Class,function(e){var n=this.extends;return!(!n||c(n=n instanceof AST_SymbolRef?n.fixed_value():n))||Oe(this.properties,e)}),se(AST_ClassProperty,function(e){return this.key instanceof AST_Node&&this.key.has_side_effects(e)||this.static&&this.value&&this.value.has_side_effects(e)}),se(AST_Conditional,function(e){return this.condition.has_side_effects(e)||this.consequent.has_side_effects(e)||this.alternative.has_side_effects(e)}),se(AST_Constant,return_false),se(AST_Definitions,function(e){return Oe(this.definitions,e)}),se(AST_DestructuredArray,function(e){return Oe(this.elements,e)}),se(AST_DestructuredKeyVal,function(e){return this.key instanceof AST_Node&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),se(AST_DestructuredObject,function(e){return Oe(this.properties,e)}),se(AST_Dot,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)}),se(AST_EmptyStatement,return_false),se(AST_If,function(e){return this.condition.has_side_effects(e)||this.body&&this.body.has_side_effects(e)||this.alternative&&this.alternative.has_side_effects(e)}),se(AST_LabeledStatement,function(e){return this.body.has_side_effects(e)}),se(AST_Lambda,return_false),se(AST_Object,function(e){return Oe(this.properties,e,function(e,n){e=e.expression;return De(e)||e.has_side_effects(n)})}),se(AST_ObjectIdentity,return_false),se(AST_ObjectProperty,function(e){return this.key instanceof AST_Node&&this.key.has_side_effects(e)||this.value.has_side_effects(e)}),se(AST_Sequence,function(e){return Oe(this.expressions,e)}),se(AST_SimpleStatement,function(e){return this.body.has_side_effects(e)}),se(AST_Sub,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.has_side_effects(e)||this.property.has_side_effects(e)}),se(AST_Switch,function(e){return this.expression.has_side_effects(e)||Oe(this.body,e)}),se(AST_SymbolDeclaration,return_false),se(AST_SymbolRef,function(e){return!this.is_declared(e)||!_e(this,e)}),se(AST_Template,function(e){return!this.is_expr_pure(e)||Oe(this.expressions,e)}),se(AST_Try,function(e){return Oe(this.body,e)||this.bcatch&&this.bcatch.has_side_effects(e)||this.bfinally&&this.bfinally.has_side_effects(e)}),se(AST_Unary,function(e){return unary_side_effects[this.operator]||this.expression.has_side_effects(e)}),se(AST_VarDef,function(){return this.value}),(se=function(e,n){e.DEFMETHOD("may_throw",n)})(AST_Node,return_true),se(AST_Constant,return_false),se(AST_Destructured,return_true),se(AST_EmptyStatement,return_false),se(AST_Lambda,return_false),se(AST_ObjectIdentity,return_false),se(AST_SymbolDeclaration,return_false),se(AST_Array,function(e){return Ne(this.elements,e)}),se(AST_Assign,function(e){return!!this.right.may_throw(e)||!(!e.has_directive("use strict")&&"="==this.operator&&this.left instanceof AST_SymbolRef)&&this.left.may_throw(e)}),se(AST_Binary,function(e){return this.left.may_throw(e)||this.right.may_throw(e)||"in"==this.operator&&!vn(this.right)}),se(AST_Block,function(e){return Ne(this.body,e)}),se(AST_Call,function(e){if(Ne(this.args,e))return!0;if(this.is_expr_pure(e))return!1;this.may_throw=return_true;e=Fe(this.expression,e);return delete this.may_throw,e}),se(AST_Case,function(e){return this.expression.may_throw(e)||Ne(this.body,e)}),se(AST_Conditional,function(e){return this.condition.may_throw(e)||this.consequent.may_throw(e)||this.alternative.may_throw(e)}),se(AST_DefaultValue,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),se(AST_Definitions,function(e){return Ne(this.definitions,e)}),se(AST_Dot,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)}),se(AST_If,function(e){return this.condition.may_throw(e)||this.body&&this.body.may_throw(e)||this.alternative&&this.alternative.may_throw(e)}),se(AST_LabeledStatement,function(e){return this.body.may_throw(e)}),se(AST_Object,function(e){return Ne(this.properties,e)}),se(AST_ObjectProperty,function(e){return this.value.may_throw(e)||this.key instanceof AST_Node&&this.key.may_throw(e)}),se(AST_Return,function(e){return this.value&&this.value.may_throw(e)}),se(AST_Sequence,function(e){return Ne(this.expressions,e)}),se(AST_SimpleStatement,function(e){return this.body.may_throw(e)}),se(AST_Sub,function(e){return!this.optional&&this.expression.may_throw_on_access(e)||this.expression.may_throw(e)||this.property.may_throw(e)}),se(AST_Switch,function(e){return this.expression.may_throw(e)||Ne(this.body,e)}),se(AST_SymbolRef,function(e){return!this.is_declared(e)||!_e(this,e)}),se(AST_Template,function(e){if(Ne(this.expressions,e))return!0;if(this.is_expr_pure(e))return!1;if(!this.tag)return!1;this.may_throw=return_true;e=Fe(this.tag,e);return delete this.may_throw,e}),se(AST_Try,function(e){return(this.bcatch?this.bcatch.may_throw(e):Ne(this.body,e))||this.bfinally&&this.bfinally.may_throw(e)}),se(AST_Unary,function(e){return this.expression.may_throw(e)&&!("typeof"==this.operator&&this.expression instanceof AST_SymbolRef)}),se(AST_VarDef,function(e){return this.name.may_throw(e)||this.value&&this.value.may_throw(e)}),(se=function(e,n){e.DEFMETHOD("is_constant_expression",n)})(AST_Node,return_false),se(AST_Array,function(e){return Pe(this.elements,e)}),se(AST_Binary,function(e){return this.left.is_constant_expression(e)&&this.right.is_constant_expression(e)&&("in"!=this.operator||vn(this.right))}),se(AST_Class,function(e){var n=this.extends;return!(n&&!c(n))&&Pe(this.properties,e)}),se(AST_ClassProperty,function(e){return"string"==typeof this.key&&(!this.value||this.value.is_constant_expression(e))}),se(AST_Constant,return_true),se(AST_Lambda,function(r){var i=this,o=!0,a=[];return i.walk(new TreeWalker(function(e,n){if(!o)return!0;if(e instanceof AST_BlockScope)return e===i?void 0:(a.push(e),n(),a.pop(),!0);if(e instanceof AST_SymbolRef){if(i.inlined||e.redef)return!(o=!1);if(i.variables.has(e.name))return!0;var t=e.definition();if(member(t.scope,a))return!0;if(r&&!t.redefined()){n=r.find_variable(e.name);if(n?n===t:t.undeclared)return o="f",!0}return!(o=!1)}return e instanceof AST_ObjectIdentity?(is_arrow(i)&&all(a,function(e){return!(e instanceof AST_Scope)||is_arrow(e)})&&(o=!1),!0):void 0})),o}),se(AST_Object,function(e){return Pe(this.properties,e)}),se(AST_ObjectProperty,function(e){return"string"==typeof this.key&&this.value.is_constant_expression(e)}),se(AST_Unary,function(e){return this.expression.is_constant_expression(e)}),(se=function(e,n){e.DEFMETHOD("aborts",n)})(AST_Statement,return_null),se(AST_Jump,return_this),se(AST_BlockStatement,Be),se(AST_SwitchBranch,Be),se(AST_If,function(){return this.alternative&&Re(this.body)&&Re(this.alternative)&&this});var Le=makePredicate(["use asm","use strict"]);function je(e,n,t){switch(e.body.length){case 0:return t?List.skip:de(AST_EmptyStatement,e);case 1:var r=e.body[0];return R(r)?n instanceof AST_IterationStatement&&r instanceof AST_LambdaDefinition?e:r:e}return e}function qe(e,n){n.option("rests")&&(e.uses_arguments||e.rest instanceof AST_DestructuredArray&&n.drop_fargs(e,n.parent())&&(e.argnames=e.argnames.concat(e.rest.elements),e.rest=e.rest.rest))}function Ie(e,n){if(!n.option("arrows"))return e;qe(e,n);var t=U(e.value?[e.first_statement()]:e.body,n);switch(t.length){case 1:var r=t[0];if(r instanceof AST_Return){e.body.length=0,e.value=r.value;break}default:e.body=t,e.value=null}return e}e(AST_Directive,function(e,n){return!n.option("directives")||Le[e.value]&&n.has_directive(e.value)===e?e:de(AST_EmptyStatement,e)}),e(AST_Debugger,function(e,n){return n.option("drop_debugger")?de(AST_EmptyStatement,e):e}),e(AST_LabeledStatement,function(e,n){return n.option("dead_code")&&e.body instanceof AST_Break&&n.loopcontrol_target(e.body)===e.body?de(AST_EmptyStatement,e):n.option("unused")&&0==e.label.references.length?e.body:e}),e(AST_LoopControl,function(e,n){if(!n.option("dead_code"))return e;var t,r=e.label;return r&&(t=n.loopcontrol_target(e),e.label=null,n.loopcontrol_target(e)===t?remove(r.thedef.references,e):e.label=r),e}),e(AST_Block,function(e,n){return e.body=U(e.body,n),e}),e(AST_BlockStatement,function(e,n){return e.body=U(e.body,n),je(e,n.parent())}),e(AST_Lambda,function(e,n){return qe(e,n),e.body=U(e.body,n),e}),e(AST_Arrow,Ie),e(AST_AsyncArrow,Ie),e(AST_Function,function(n,e){qe(n,e),n.body=U(n.body,e);var t=e.parent();if(e.option("inline"))for(var r=0;r<n.body.length;r++){var i=n.body[r];if(!(i instanceof AST_Directive)){if(i instanceof AST_Return){if(r!=n.body.length-1)break;var o=i.value;if(!o||"Call"!=o.TYPE)break;if(o.is_expr_pure(e))break;var a=o.expression;if(a instanceof AST_SymbolRef){if(n.name&&n.name.definition()===a.definition())break;a=a.fixed_value()}if(!(a instanceof AST_Defun||a instanceof AST_Function))break;if(a.rest)break;if(a.uses_arguments)break;if(a===o.expression){if(a.parent_scope!==n)break;if(!all(a.enclosed,function(e){return e.scope!==n}))break}if(a.name&&(t instanceof AST_ClassMethod||t instanceof AST_ObjectMethod)&&t.value===e.self())break;if(a.contains_this())break;var s=a.argnames.length;if(0<s&&e.option("inline")<2)break;if(s>n.argnames.length)break;if(!all(n.argnames,function(e){return e instanceof AST_SymbolFunarg}))break;if(!all(o.args,function(e){return!(e instanceof AST_Spread)}))break;for(var f=0;f<s;f++){var c=o.args[f];if(!(c instanceof AST_SymbolRef))break;if(c.definition()!==n.argnames[f].definition())break}if(f<s)break;for(;f<o.args.length&&!o.args[f].has_side_effects(e);f++);if(f<o.args.length)break;if(s<n.argnames.length&&!e.drop_fargs(n,t)){if(!e.drop_fargs(a,o))break;for(;a.argnames.push(a.make_var(AST_SymbolFunarg,a,"argument_"+s)),++s<n.argnames.length;);}return o.expression}break}}return n});var Ue=makePredicate("arguments await yield");function $e(e,n){for(var t=n.length;0<=--t;)n[t]||(n[t]=de(AST_Hole,e))}function Ve(e,n){var t=de(AST_ClassExpression,e,e);return t.name=n?null:de(AST_SymbolClass,e.name,e.name),t}function Me(e,n){var t;switch(e.CTOR){case AST_AsyncDefun:t=AST_AsyncFunction;break;case AST_AsyncGeneratorDefun:t=AST_AsyncGeneratorFunction;break;case AST_Defun:t=AST_Function;break;case AST_GeneratorDefun:t=AST_GeneratorFunction}var r=de(t,e,e);return r.name=n?null:de(AST_SymbolLambda,e.name,e.name),r}function ze(n,t){n.walk(new TreeWalker(function(e){return e instanceof AST_Return?(t(e),!0):e instanceof AST_Scope&&e!==n||void 0}))}function He(e){var n=Object.create(null);return ze(e,function(e){var e=e.value;(e=e&&e.tail_node())instanceof AST_SymbolRef&&(e=e.definition().id,n[e]=(n[e]||0)+1)}),n}function We(e,n,t){return e.bool_fn+(n[e.id]||0)===e.references.length-e.replaced&&!t.exposed(e)}function Ye(e,r){ze(e,function(e){e.in_bool=!0;var n,t=e.value;t&&((n=tn(r,t))?n instanceof AST_Node||(t=t.drop_side_effect_free(r),e.value=t?K(e.value,[t,de(AST_Number,e.value,{value:1})]):de(AST_Number,e.value,{value:1})):(t=t.drop_side_effect_free(r),e.value=t?K(e.value,[t,de(AST_Number,e.value,{value:0})]):null))})}function Ge(e,n){if(!e.name||!n.option("ie"))return 1;e=e.name.definition();return!n.exposed(e)&&all(e.references,function(e){return!(e instanceof AST_SymbolRef)})}function Ke(e,n,t,r){for(var i=e.length,o=[],a=!1,s=0;s<i;s++){var f=e[s],c=r&&f instanceof AST_Spread?r(f,n,t):f.drop_side_effect_free(n,t);c!==f&&(a=!0),c&&(o.push(c),t=!1)}return o.length?a?o:e:null}function Xe(e,n,t){var r=e.expression;return r.is_string(n)?r.drop_side_effect_free(n,t):e}function Je(e){return e instanceof AST_Spread?de(AST_Array,e,{elements:[e]}):e}function Qe(o,n){var e,t=is_arrow(n),r=is_async(n),i=!1;if(t&&o.option("arrows")?n.value?r&&!yn(o,n.value)||(n.value=n.value.drop_side_effect_free(o)):i=!0:(n instanceof AST_AsyncFunction||n instanceof AST_Function)&&(i=!n.name||(e=n.name.definition()).references.length==e.replaced),i&&(n.process_expression(!1,function(e){var n=e.value;if(n){if(r&&!yn(o,n))return e;n=n.drop_side_effect_free(o,!0)}return n?de(AST_SimpleStatement,e,{body:n}):de(AST_EmptyStatement,e)}),ze(n,function(e){var n=e.value;n&&(r&&!yn(o,n)||(e.value=n.drop_side_effect_free(o)))})),r&&o.option("awaits")){i&&n.process_expression("awaits",function(e){var n=e.body;if(n instanceof AST_Await){if(yn(o,n.expression)){if(!(n=n.expression.drop_side_effect_free(o,!0)))return de(AST_EmptyStatement,e);e.body=n}}else if(n instanceof AST_Sequence){for(var t=n.expressions,r=t.length;0<=--r;){var i=t[r];if(!(i instanceof AST_Await))break;if(!yn(o,i.expression))break;if(t[r]=i.expression.drop_side_effect_free(o))break}switch(r){case-1:return de(AST_EmptyStatement,e);case 0:e.body=t[0];break;default:t.length=r+1}}return e});var a,s=!i&&n.name||t&&n.value&&!yn(o,n.value),f=new TreeWalker(function(e){return!!s||(f.parent()===n&&e.may_throw(o)||e instanceof AST_Await||e instanceof AST_ForAwaitOf?s=!0:e instanceof AST_Return?e.value&&!yn(o,e.value)?s=!0:void 0:e instanceof AST_Scope&&e!==n||void 0)});if(n.walk(f),!s){switch(n.CTOR){case AST_AsyncArrow:a=AST_Arrow;break;case AST_AsyncFunction:a=AST_Function;break;case AST_AsyncGeneratorFunction:a=AST_GeneratorFunction}return de(a,n,n)}}return i&&n.clone()}function Ze(e,n,t){for(var r=[],i=[],o=e.properties,a=0;a<o.length;a++){var s=o[a];if(s.key instanceof AST_Node&&r.push(s.key),s.static&&s.value&&s instanceof AST_ClassField&&s.value.has_side_effects(n)){if(s.value.contains_this())return e;i.push(s.value)}}var f=e.extends;if(f&&((f=!c(f=f instanceof AST_SymbolRef?f.fixed_value():f))||r.unshift(e.extends)),r=Ke(r,n,t),i=Ke(i,n,t=r?!1:t),!r){if(!f&&!i)return null;r=[]}return f&&((f=Ve(e,!0)).properties=[],r.length&&f.properties.push(de(AST_ClassMethod,e,{key:K(e,r),value:de(AST_Function,e,{argnames:[],body:[]}).init_vars(f)})),r=[f]),i&&r.push(de(AST_Call,e,{expression:de(AST_Arrow,e,{argnames:[],body:[],value:K(e,i)}).init_vars(e.parent_scope),args:[]})),K(e,r)}function en(n,e,t){t=t||AST_LoopControl;var r=!1,i=new TreeWalker(function(e){return!!(r||e instanceof AST_Scope)||(e instanceof t&&i.loopcontrol_target(e)===n?r=!0:void 0)});return e instanceof AST_LabeledStatement&&i.push(e),i.push(n),n.body.walk(i),r}function nn(e,n,t){if(e instanceof AST_Binary)if(e.left instanceof AST_String){if(e.right instanceof AST_UnaryPrefix&&"typeof"==e.right.operator){var r=e.right.expression;if(he(r)){var i,o,a,s="undefined"==e.left.value;switch(e.operator){case"==":i=s?t:n;break;case"!=":i=s?n:t;break;default:return}i&&(o=r.definition(),a=new TreeWalker(function(e){if(e instanceof AST_Scope){var n=a.parent();return n instanceof AST_Call&&n.expression===e?void 0:!0}e instanceof AST_SymbolRef&&e.definition()===o&&(e.defined=!0)}),i.walk(a))}}}else switch(e.operator){case"&&":nn(e.left,n),nn(e.right,n);break;case"||":nn(f(e.left),t),nn(f(e.right),t)}function f(e){if(e instanceof AST_Binary)switch(e.operator){case"==":return(e=e.clone()).operator="!=",e;case"!=":return(e=e.clone()).operator="==",e}}}function tn(e,n,t){return!!n.truthy||!(n.falsy&&!t)&&(!!n.is_truthy()||n.evaluate(e,!0))}function rn(e,n){var t,r=0,i=!1,o=e.self();if(!is_statement(o))for(;;){if(t=o,(o=e.parent(r++))instanceof AST_Binary){var a=o.operator;if(!ye[a])return;var s=o.left;if(s===t)continue;if(f(s))switch(a){case"&&":n[i?"falsy":"truthy"]=!0;break;case"||":case"??":n[i?"truthy":"falsy"]=!0}}else if(o instanceof AST_Conditional){a=o.condition;if(a===t)continue;if(f(a))switch(t){case o.consequent:n[i?"falsy":"truthy"]=!0;break;case o.alternative:n[i?"truthy":"falsy"]=!0}}else{if(o instanceof AST_Exit)break;if(o instanceof AST_If)break;if(o instanceof AST_Sequence){if(o.expressions[0]===t)continue}else if(o instanceof AST_SimpleStatement)break}return}for(;;){if(t=o,(o=e.parent(r++))instanceof AST_BlockStatement){if(o.body[0]===t)continue}else if(o instanceof AST_If&&f(o.condition))switch(t){case o.body:n[i?"falsy":"truthy"]=!0;break;case o.alternative:n[i?"truthy":"falsy"]=!0}return}function f(e){return n.equivalent_to(e)||e instanceof AST_UnaryPrefix&&("!"==e.operator&&(n.equivalent_to(e.expression)&&(i=!0)))}}function on(i){return function(n,t){var r=!1;return this.definitions.forEach(function(e){e.value&&(r=!0),e.name.match_symbol(function(e){e instanceof AST_SymbolDeclaration&&t.push(de(AST_VarDef,e,{name:e,value:i(n,e)}))},!0)}),r}}function an(e){return"arguments"!=e.name&&e.orig.length<(e.orig[0]instanceof AST_SymbolLambda?3:2)}function sn(e,n){if(e.exposed(n))return!0;for(var t=n.scope.resolve(),r=n.scope;r!==t;)if((r=r.parent_scope).var_names()[n.name])return!0}function fn(e){return de(AST_Var,e,{definitions:e.definitions.map(function(e){return de(AST_VarDef,e,{name:e.name.convert_symbol(AST_SymbolVar,function(e,n){var t=e.definition();t.orig[t.orig.indexOf(n)]=e;e=t.scope.resolve();t.scope!==e&&((t.scope=e).variables.set(t.name,t),e.enclosed.push(t),e.var_names()[t.name]=!0)}),value:e.value})})})}function cn(e,n){if(!n.fixed_value())return!1;n=n.definition();return an(n)&&wn(n)&&!sn(e,n)}function un(e,n){return n.option("varify")&&all(e.definitions,function(e){return!e.name.match_symbol(function(e){if(e instanceof AST_SymbolDeclaration)return!cn(n,e)},!0)})?fn(e):e}function ln(e,n){if(n.option("optional_chains")&&e.terminal)do{var t=e.expression;if(e.optional){var r=tn(n,t,!0);if(null==r)return de(AST_UnaryPrefix,e,{operator:"void",expression:t}).optimize(n);r instanceof AST_Node||(e.optional=!1)}}while(("Call"==(e=t).TYPE||e instanceof AST_PropAccess)&&!e.terminal)}function _n(e){var n=e.expression;if(!(n instanceof AST_Sequence))return e;var t=n.expressions.slice(),n=e.clone();return n.expression=t.pop(),t.push(n),K(e,t)}function pn(e,t,n){var r=e.expression,i=r instanceof AST_SymbolRef?r.fixed_value():r;if(i instanceof AST_Lambda&&(!i.uses_arguments&&!i.pinned()&&!(n&&n.indexOf(i)<0)&&all(s=e.args,function(e){return!(e instanceof AST_Spread)}))){var o=i.argnames,r=i===r&&!i.name;if(i.rest){if(!r||!t.option("rests"))return;for(var a=o.length,s=s.slice(0,a);s.length<a;)s.push(de(AST_Undefined,e).optimize(t));s.push(de(AST_Array,e,{elements:e.args.slice(a)})),o=o.concat(i.rest),i.rest=null}else s=s.slice(),o=o.slice();for(var f=0,c=0,u=r&&t.option("default_values"),l=r&&t.drop_fargs(i,e)?function(e,n){return!e||(e instanceof AST_DestructuredArray?0==e.elements.length&&!e.rest&&n instanceof AST_Array:e instanceof AST_DestructuredObject?0==e.properties.length&&!e.rest&&n&&!n.may_throw_on_access(t):e.__unused)}:return_false,_=[],p=0;p<s.length;p++){var S=o[p];if(u&&S instanceof AST_DefaultValue&&s[p].is_defined(t)&&(o[p]=S=S.name),!S||"__unused"in S){var d=s[p].drop_side_effect_free(t);if(l(S)){S&&o.splice(p,1),s.splice(p,1),d&&_.push(d),p--;continue}if(d)_.push(d),s[f++]=K(e,_),_=[];else if(S){if(!_.length){s[f++]=de(AST_Number,s[p],{value:0});continue}s[f++]=K(e,_),_=[]}}else{if(l(S,s[p])){d=s[p].drop_side_effect_free(t);o.splice(p,1),s.splice(p,1),d&&_.push(d),p--;continue}_.push(s[p]),s[f++]=K(e,_),_=[]}c=f}for(;p<o.length;p++)l(o[p])&&o.splice(p--,1);i.argnames=o,s.length=c,e.args=s,_.length&&(i=K(e,_),s.push(s.length<o.length?de(AST_UnaryPrefix,e,{operator:"void",expression:i}):i))}}function Sn(e){var n=[];return is_async(e)&&n.push("await"),is_generator(e)&&n.push("yield"),n.length&&makePredicate(n)}function dn(t,r,e,n){if(n instanceof AST_Binary&&("&&"==n.operator||"||"==n.operator)&&n.right instanceof AST_Assign&&"="==n.right.operator&&n.right.left instanceof AST_SymbolRef&&n.right.left.definition()===r&&!e.has_side_effects(t)&&i(n.left)&&i(n.right.right))return r.replaced++,"&&"==n.operator?de(AST_Conditional,n,{condition:n.left,consequent:n.right.right,alternative:e}):de(AST_Conditional,n,{condition:n.left,consequent:e,alternative:n.right.right});function i(e){if(!e.has_side_effects(t)){var n=!1;return e.walk(new TreeWalker(function(e){return!!n||(e instanceof AST_SymbolRef&&e.definition()===r?n=!0:void 0)})),!n}}}AST_Scope.DEFMETHOD("merge_variables",function(l){if(l.option("merge_vars")){var _,p,S={},d=this,a=[],s=[],f=0,A=new Dictionary,T=Object.create(null),c=Object.create(null),h=new TreeWalker(function(r,e){if(r instanceof AST_Assign){var n=r.left,t=r.right;if(n instanceof AST_Destructured){t.walk(h);var i=new TreeWalker(function(e){if(!(e instanceof AST_Destructured))return e instanceof AST_DefaultValue?(g(),e.value.walk(h),w(),e.name.walk(i)):e instanceof AST_DestructuredKeyVal?e.key instanceof AST_Node?(g(),(S.block=e).key.walk(h),e.value.walk(i),w()):e.value.walk(i):e instanceof AST_SymbolRef?x(e):e.walk(h),!0});return n.walk(i),!0}return ye[r.operator.slice(0,-1)]?(n.walk(h),g(),t.walk(h),n instanceof AST_SymbolRef&&x(n),w(),!0):n instanceof AST_SymbolRef?("="!=r.operator&&x(n,!0),t.walk(h),x(n),!0):void 0}if(r instanceof AST_Binary)return ye[r.operator]?(r.left.walk(h),g(),r.right.walk(h),w(),!0):void 0;var o,a;if(r instanceof AST_Break)return(o=h.loopcontrol_target(r))instanceof AST_IterationStatement||E(o),!0;if(r instanceof AST_Call){n=(f=r.expression).tail_node();return O(n)?(f!==n&&f.expressions.slice(0,-1).forEach(function(e){e.walk(h)}),r.args.forEach(function(e){e.walk(h)}),n.walk(h),!0):(e(),u(f))}if(r instanceof AST_Conditional)return r.condition.walk(h),g(),r.consequent.walk(h),w(),g(),r.alternative.walk(h),w(),!0;if(r instanceof AST_Continue)return(o=h.loopcontrol_target(r))instanceof AST_Do&&E(o),!0;if(r instanceof AST_Do){g(),S.block=r,S.loop=!0;var s=S;return r.body.walk(h),S.inserted===r&&(S=s),r.condition.walk(h),w(),!0}if(r instanceof AST_For)return r.init&&r.init.walk(h),g(),S.block=r,S.loop=!0,r.condition&&r.condition.walk(h),r.body.walk(h),r.step&&r.step.walk(h),w(),!0;if(r instanceof AST_ForEnumeration)return r.object.walk(h),g(),S.block=r,S.loop=!0,r.init.walk(h),r.body.walk(h),w(),!0;if(r instanceof AST_If)return r.condition.walk(h),g(),r.body.walk(h),w(),r.alternative&&(g(),r.alternative.walk(h),w()),!0;if(r instanceof AST_LabeledStatement){g(),S.block=r;s=S;return r.body.walk(h),S.inserted===r&&(S=s),w(),!0}if(r instanceof AST_Scope)return g(),(S.block=r)===d&&(p=S),r instanceof AST_Lambda&&(r.name&&(T[r.name.definition().id]=!1),i=r.uses_arguments&&!h.has_directive("use strict")?function(e){e instanceof AST_SymbolFunarg&&(T[e.definition().id]=!1)}:function(e){e instanceof AST_SymbolFunarg&&x(e)},a=new TreeWalker(function(e){if(e instanceof AST_SymbolDeclaration&&(T[e.definition().id]=!1),e instanceof AST_SymbolRef){var n=e.definition(),t=r.variables.get(e.name);return t&&(t===n||n.undeclared||r.parent_scope.find_variable(e.name)===n)?(T[n.id]=!1,T[t.id]=!1):(t=S,w(),x(e,!0),S=t),!0}}),r.argnames.forEach(function(e){e.mark_symbol(i,a)}),r.rest&&r.rest.mark_symbol(i,a)),walk_lambda(r,h),w(),!0;if(r instanceof AST_Sub){var f=r.expression;return r.optional?(f.walk(h),g(),r.property.walk(h),w()):e(),u(f)}if(r instanceof AST_Switch){r.expression.walk(h);s=S;return r.body.forEach(function(e){e instanceof AST_Default||(e.expression.walk(h),s===S&&g())}),S=s,r.body.forEach(function(e){g(),S.block=r;var n=S;walk_body(e,h),S.inserted===r&&(S=n),w()}),!0}if(r instanceof AST_SymbolConst||r instanceof AST_SymbolLet)return!(T[r.definition().id]=!1);if(r instanceof AST_SymbolRef)return x(r,!0),!0;if(r instanceof AST_Try){f=_,s=S;return walk_body(_=r,h),S=s,r.bcatch&&(r.bcatch.argname&&r.bcatch.argname.mark_symbol(function(e){e instanceof AST_SymbolCatch&&(e=e.definition(),T[e.id]=!1,(e=e.redefined())&&(T[e.id]=!1))},h),r.bfinally||(_=f)?walk_body(r.bcatch,h):(g(),walk_body(r.bcatch,h),w())),_=f,S=s,r.bfinally&&r.bfinally.walk(h),!0}if(r instanceof AST_Unary){if(!UNARY_POSTFIX[r.operator])return;var c=r.expression;return c instanceof AST_SymbolRef?(x(c,!0),!0):void 0}if(r instanceof AST_VarDef){c=r.value;return c?c.walk(h):c=S.block instanceof AST_ForEnumeration&&S.block.init===h.parent(),r.name.mark_symbol(c?function(e){if(e instanceof AST_SymbolDeclaration)return e instanceof AST_SymbolVar?x(e):T[e.definition().id]=!1,!0}:function(e){if(e instanceof AST_SymbolDeclaration){var n=e.definition().id;return e instanceof AST_SymbolVar?n in T?T[n]&&T[n].push(e):A.add(n,e):T[n]=!1,!0}},h),!0}return r instanceof AST_While?(g(),S.block=r,S.loop=!0,e(),w(),!0):void 0;function u(e){return!l.option("ie")||(e=root_expr(e))instanceof AST_SymbolRef&&e.walk(h),!0}});h.directives=Object.create(l.directives),d.walk(h);for(var e=!1,n=Object.create(null);a.length&&s.length;){var t=a.pop(),r=t.definition;if(r.id in c&&T[r.id]){for(var i={start:T[r.id].start};r.id in n;)r=n[r.id];i.end=T[r.id].end;var o=[];do{var u=s.pop();if(u&&!(u.index>t.index)){var m=u.definition.id,v=T[m];if(v){if(i.start.block===v.start.block&&D(i,v)&&(!i.start.loop&&wn(r)||D(v,i))&&(!l.option("webkit")||le(r)===le(u.definition))&&all(v,function(e){return e.scope.find_variable(r.name)===r})){var y=[],b=[];v.forEach(function(e){e.thedef=r,e.name=r.name,(e instanceof AST_SymbolRef?b:y).push(e)}),r.orig=y.concat(r.orig),r.references=b.concat(r.references),r.fixed=u.definition.fixed&&r.fixed,n[m]=r,e=!0;break}o.unshift(u)}}}while(s.length);o.length&&(s=s.concat(o))}}return e}function g(){S=Object.create(S)}function w(){S=Object.getPrototypeOf(S)}function x(e,n){var t,r,i=e.definition(),o=S;if(_&&(g(),o=S,w()),i.id in T){if(!(r=T[i.id]))return;if(r.start.block!==o.block)return T[i.id]=!1;if(r.push(e),r.end=o,i.id in c)s[c[i.id]]=null;else if(!n)return}else{if((t=d.variables.get(i.name))!==i)return t&&p===o&&(T[t.id]=!1),T[i.id]=!1;if(l.exposed(i)||Ue[e.name])return T[i.id]=!1;if((r=A.get(i.id)||[]).push(e),T[i.id]=r,!n)return r.start=o,a.push({index:f++,definition:i});if(o.block!==d)return T[i.id]=!1;r.start=p}c[i.id]=s.length,s.push({index:f++,definition:i})}function E(e){for(var n=[];;){if(HOP(S,"block")){var t=S.block;if((t=t instanceof AST_LabeledStatement?t.body:t)===e)break}n.push(S),w()}for(S.inserted=S.block,g();n.length;){var r=n.pop();g(),HOP(r,"block")&&(S.block=r.block),HOP(r,"loop")&&(S.loop=r.loop)}}function k(e,n){return e===n||e.isPrototypeOf(n)}function D(e,n){return k(e.start,e.end)||k(e.start,n.start)}}),AST_Scope.DEFMETHOD("drop_unused",function(x){if(x.option("unused")){var E=this,k=!(E instanceof AST_Toplevel)||x.toplevel.funcs,D=!(E instanceof AST_Toplevel)||x.toplevel.vars,O=/keep_assign/.test(x.option("unused"))?return_false:function(e,n){var t,r=!1;if(e instanceof AST_Assign?!e.write_only&&"="!=e.operator||(t=i(e.left,n)):e instanceof AST_Unary&&e.write_only&&(t=i(e.expression,n)),t instanceof AST_SymbolRef){n=t.definition();if(!o[n.id]&&!x.exposed(n)&&_e(t,x,r))return t}function i(e,n){if(e instanceof AST_PropAccess){var t=e.expression;if(!t.may_throw_on_access(x,!0))return r=!0,n&&e instanceof AST_Sub&&n.unshift(e.property),i(t,n)}else if(e instanceof AST_Assign&&"="==e.operator){e.write_only="p";t=i(e.right);return n?(n.assign=e,t instanceof AST_SymbolRef?t:e.left):t}return e}},C=Object.create(null),o=Object.create(null),c=function(e){return(c=function e(n,t,r){var i=x.parent(t);if(!i)return r;n=i instanceof AST_Lambda&&member(n,i.argnames);return e(i,t+1,n?function(e){var n=r(e);if(n)return n;if(n=i.variables.get(e)){e=n.orig[0];if(e instanceof AST_SymbolFunarg||e instanceof AST_SymbolLambda)return n}}:i.variables?function(e){return r(e)||i.variables.get(e)}:r)}(E,0,noop))(e)},N=Object.create(null),u=[],F=Object.create(null),l=Object.create(null),_=Object.create(null),P=Object.create(null);E instanceof AST_Toplevel&&x.top_retain&&E.variables.each(function(e){!x.top_retain(e)||e.id in F||(F[e.id]=!0,u.push(e))});var p=new Dictionary,S=new Dictionary,R=this;(d=new TreeWalker(function(s,e){if(s instanceof AST_Lambda&&s.uses_arguments&&!d.has_directive("use strict")&&s.each_argname(function(e){e=e.definition();e.id in F||(F[e.id]=!0,u.push(e))}),s!==E){if(R===E){if(s instanceof AST_DefClass){var t=s.name.definition();k&&!t.exported||t.id in F||(F[t.id]=!0,u.push(t)),s.extends&&s.extends.walk(d);var r=!1;return d.parent()instanceof AST_ExportDefault&&(r=!0,o[t.id]=!0),s.properties.forEach(function(e){var n;e.key instanceof AST_Node&&e.key.walk(d),e.value&&(r||e instanceof AST_ClassField&&e.static?(n=R,R=s,e.value.walk(d),R=n):S.add(t.id,e.value))}),!0}if(s instanceof AST_LambdaDefinition){t=s.name.definition();if(k&&!t.exported||t.id in F||(F[t.id]=!0,u.push(t)),S.add(t.id,s),!(d.parent()instanceof AST_ExportDefault))return!0;o[t.id]=!0}if(s instanceof AST_Definitions)return s.definitions.forEach(function(r){var i=r.value,o=i&&(r.name instanceof AST_Destructured||i.has_side_effects(x)),a=o&&"="==i.tail_node().operator;r.name.mark_symbol(function(e){if(e instanceof AST_SymbolDeclaration){var n,t=e.definition();return P[t.id]=(P[t.id]||0)+1,s instanceof AST_Var&&t.orig[0]instanceof AST_SymbolCatch&&((n=t.redefined())&&(P[n.id]=(P[n.id]||0)+1)),t.id in F||D&&!t.exported&&(s instanceof AST_Const?!t.redefined():!t.const_redefs)&&(s instanceof AST_Var||an(t))||(F[t.id]=!0,u.push(t)),i&&(o?a&&h(t,e,_[t.id]):S.add(t.id,i),p.add(t.id,r)),!0}},d),o&&i.walk(d)}),!0;if(s instanceof AST_SymbolFunarg){t=s.definition();return P[t.id]=(P[t.id]||0)+1,p.add(t.id,s),!0}if(s instanceof AST_SymbolImport)return(t=s.definition()).id in F||D&&an(t)||(F[t.id]=!0,u.push(t)),!0}return i(s,e,!0)}})).directives=Object.create(x.directives),E.walk(d);var B=x.option("keep_fnames")?return_false:x.option("ie")?function(e){return!x.exposed(e)&&e.references.length==e.replaced}:function(e){return!(e.id in F)||!(e.orig.length-e.eliminated<2)&&(e.orig[1]instanceof AST_SymbolFunarg||all(e.references,function(e){return!e.in_arg}))};x.option("ie")&&S.each(function(e,n){n in F||e.forEach(function(e){e.walk(new TreeWalker(function(e){return e instanceof AST_Function&&e.name&&!B(e.name.definition())?(e.walk(d),!0):e instanceof AST_Scope||void 0}))})});for(var d=new TreeWalker(i),e=0;e<u.length;e++){var n=S.get(u[e].id);n&&n.forEach(function(e){e.walk(d)})}Object.keys(C).forEach(function(e){var n,t=C[e];t?(t=t.reduce(function(n,e){return e.forEach(function(e){push_uniq(n,e)}),n},[]),n=(p.get(e)||[]).filter(function(n){return find_if(n instanceof AST_Unary?function(e){return e===n}:function(e){return e===n||!(e instanceof AST_Unary)&&r(e)===r(n)},t)}),t.length==n.length?C[e]=n:delete C[e]):delete C[e]});var L=[],j=[],q=[],I=[],U=new TreeTransformer(function(r){if(r instanceof AST_DefaultValue)return y(U,r);if(r instanceof AST_Destructured&&r.rest&&(r.rest=r.rest.transform(U)),r instanceof AST_DestructuredArray){for(var e=!r.rest,n=r.elements.length;0<=--n;){var t=r.elements[n].transform(U);t?(r.elements[n]=t,e=!1):e?r.elements.pop():r.elements[n]=de(AST_Hole,r.elements[n])}return r}if(r instanceof AST_DestructuredObject){var i=[];return r.properties.forEach(function(e){var n,t=!1;e.key instanceof AST_Node&&(e.key=e.key.transform($),t=e.key.has_side_effects(x)),(t||r.rest)&&((n=e.value)instanceof AST_DefaultValue?n.name:n)instanceof AST_SymbolDeclaration?(e.value=e.value.transform($),i.push(e)):(n=!(n=e.value.transform(U))&&r.rest?e.value instanceof AST_DestructuredArray?de(AST_DestructuredArray,e.value,{elements:[]}):de(AST_DestructuredObject,e.value,{properties:[]}):n)&&(e.value=n,i.push(e))}),r.properties=i,r}return r instanceof AST_SymbolDeclaration?r.definition().id in F?r:null:void 0}),$=new TreeTransformer(function(_,n,e){var t,r,i,p=$.parent();if(D){var o,a,s=[],f=O(_,s);if(f){if(a=_,r=(t=f).definition(),(!(i=F[r.id])||a[a instanceof AST_Assign?"left":"expression"]===t&&(i===t&&r.references.length-r.replaced==1||H(r,a)<0))&&(_ instanceof AST_Assign&&(o=W(_),!0===_.write_only&&(o=o.drop_side_effect_free(x))),o=o||de(AST_Number,_,{value:0})),o)switch(!s.assign||(a=s.assign.drop_side_effect_free(x))&&(a.write_only=!0,s.unshift(a)),p instanceof AST_Sequence&&p.tail_node()!==_&&!o.has_side_effects(x)||s.push(o),s.length){case 0:return List.skip;case 1:return Ae(0,p,_,s[0].transform($));default:return K(_,s.map(function(e){return e.transform($)}))}}else if(_ instanceof AST_UnaryPostfix&&_.expression instanceof AST_SymbolRef&&H(_.expression.definition(),_)<0)return de(AST_UnaryPrefix,_,{operator:"+",expression:_.expression})}if(_ instanceof AST_Call&&q.push(_),R===E){if(k&&_!==E&&_ instanceof AST_DefClass){var c=_.name.definition();if(!(c.id in F))return(V(_.name,"Dropping unused class {name}"),c.eliminated++,n(_,$),p instanceof AST_ExportDefault)?Ve(_,!0):(g=(g=_.drop_side_effect_free(x,!0))===_?Ve(_,!0):g)?de(AST_SimpleStatement,_,{body:g}):e?List.skip:de(AST_EmptyStatement,_)}if(_ instanceof AST_ClassExpression&&_.name&&B(_.name.definition())&&j.push(_),_ instanceof AST_Lambda){if(k&&_!==E&&_ instanceof AST_LambdaDefinition)if(!((c=_.name.definition()).id in F))return V(_.name,"Dropping unused function {name}"),c.eliminated++,p instanceof AST_ExportDefault?(w(),Me(_,!0)):e?List.skip:de(AST_EmptyStatement,_);if(_ instanceof AST_LambdaExpression&&_.name&&B(_.name.definition())&&j.push(_),!(_ instanceof AST_Accessor)){_.rest&&((o=_.rest.transform(U))instanceof AST_Destructured&&!o.rest&&(!_.uses_arguments||$.has_directive("use strict"))&&(o instanceof AST_DestructuredArray?0==o.elements.length&&(o=null):0==o.properties.length&&(o=null)),_.rest=o);for(var u=_.argnames,l=x.drop_fargs(_,p)&&!_.rest,S=l?-1:_.length(),d=u.length;0<=--d;)(f=u[d])instanceof AST_SymbolFunarg?(c=f.definition()).id in F?(l=!1,H(c,f)<0&&(f.__unused=null)):l?(V(f,"Dropping unused function argument {name}"),u.pop()):f.__unused=!0:f.transform(U)?l=!1:l?(V(f.name,"Dropping unused default argument {name}"),u.pop()):S<d?(V(f.name,"Dropping unused default argument assignment {name}"),f.name.__unused=!0,u[d]=f.name):(V(f.name,"Dropping unused default argument value {name}"),f.value=de(AST_Number,f,{value:0}));I.push(_)}}if(_ instanceof AST_Catch&&_.argname instanceof AST_Destructured&&_.argname.transform(U),_ instanceof AST_Definitions&&!(p instanceof AST_ForEnumeration&&p.init===_)){var A=[],T=[],h=[],m=[],v=0,y=_ instanceof AST_Var;switch(_.definitions.forEach(function(e){e.value&&(e.value=e.value.transform($));var n=e.value;if(e.name instanceof AST_Destructured){var t=Y(e.name,n,function(e){return!D||e.definition().id in F||u(e)||y&&!_e(e)?e:null},!0);t.name?(e=de(AST_VarDef,e,{name:t.name,value:n=t.value}),l()):t.value&&m.push(t.value)}else{var r,i,o,a=e.name.definition(),s=y?_e(e.name):an(a);if(!s||!D||a.id in F)if(n&&H(a,e)<0&&((n=n.drop_side_effect_free(x))&&(AST_Node.warn("Side effects in last use of variable {name} [{file}:{line},{col}]",M(e.name)),m.push(n)),n=null,L.push(e)),n||_ instanceof AST_Let)if(x.option("functions")&&!x.option("ie")&&s&&1==P[a.id]&&0==a.assignments&&n instanceof AST_LambdaExpression&&!ue(a)&&!is_arrow(n)&&(o=n,0==(t=a.references).length?o===e.name.fixed_value():all(t,function(e){return o===e.fixed_value()}))&&(f=n,y&&!x.has_directive("use strict")&&f instanceof AST_Function?p instanceof AST_Block||p instanceof AST_For&&p.init===_||p instanceof AST_If:p instanceof AST_Scope)&&!1!==(r=function(t,r){if(!t.name)return null;var i,e=t.name.definition();if(1<e.orig.length)return null;if(0<e.assignments)return!1;if(e.name==r)return e;switch(r){case"await":i=is_async;break;case"yield":i=is_generator}return all(e.references,function(e){var n=e.scope;if(n.find_variable(r)!==a)return!1;if(i)do{if(n=n.resolve(),i(n))return!1}while(n!==t&&(n=n.parent_scope));return!0})&&e}(n,e.name.name))){switch(AST_Node.warn("Declaring {name} as function [{file}:{line},{col}]",M(e.name)),n.CTOR){case AST_AsyncFunction:i=AST_AsyncDefun;break;case AST_AsyncGeneratorFunction:i=AST_AsyncGeneratorDefun;break;case AST_Function:i=AST_Defun;break;case AST_GeneratorFunction:i=AST_GeneratorDefun}var f=de(i,e,n);f.name=de(AST_SymbolDefun,e.name,e.name);var c=e.name.scope.resolve().def_function(f.name);r&&r.forEach(function(e){e.name=c.name,e.thedef=c,e.reference()}),A.push(f)}else s&&1<P[a.id]&&!(p instanceof AST_ExportDeclaration)&&a.orig.indexOf(e.name)>a.eliminated&&(P[a.id]--,v++),l();else p instanceof AST_ExportDeclaration?l():s&&1<P[a.id]?(AST_Node.info("Dropping declaration of variable {name} [{file}:{line},{col}]",M(e.name)),P[a.id]--,a.eliminated++):T.push(e);else u(e.name)?((n=n&&n.drop_side_effect_free(x))&&m.push(n),1<P[a.id]?(AST_Node.warn("Dropping duplicated declaration of variable {name} [{file}:{line},{col}]",M(e.name)),P[a.id]--,a.eliminated++):(e.value=null,T.push(e))):((n=n&&!n.single_use&&n.drop_side_effect_free(x))?(AST_Node.warn("Side effects in initialization of unused variable {name} [{file}:{line},{col}]",M(e.name)),m.push(n)):V(e.name,"Dropping unused variable {name}"),a.eliminated++)}function u(e){var n=e.definition();return n.orig[0]instanceof AST_SymbolCatch&&n.scope.resolve()===e.scope.resolve()}function l(){0<m.length&&(0==h.length?A.push(de(AST_SimpleStatement,_,{body:K(_,m)})):n?(m.push(n),e.value=K(n,m)):e.value=de(AST_UnaryPrefix,e,{operator:"void",expression:K(e,m)}),m=[]),h.push(e)}}),T.length){case 0:if(0==h.length)break;if(h.length==v){[].unshift.apply(m,h.map(function(e){AST_Node.info("Dropping duplicated definition of variable {name} [{file}:{line},{col}]",M(e.name));var n=e.name.definition(),t=de(AST_SymbolRef,e.name,e.name);n.references.push(t);t=de(AST_Assign,e,{operator:"=",left:t,right:e.value}),e=H(n,e);return 0<=e&&(C[n.id][e]=t),n.eliminated++,t}));break}case 1:if(0==h.length){var b=T[0].name.definition().id;if(b in N){_.definitions=T,N[b].init=_;break}}default:_.definitions=T.concat(h),A.push(_)}return 0<m.length&&A.push(de(AST_SimpleStatement,_,{body:K(_,m)})),z(A,_,e)}if(_ instanceof AST_Assign)return(n(_,$),_.left instanceof AST_Destructured)?(g=Y(_.left,_.right,function(e){return e},!0===_.write_only)).name?de(AST_Assign,_,{operator:_.operator,left:g.name,right:g.value}):g.value||(p instanceof AST_Sequence&&p.tail_node()!==_?List.skip:de(AST_Number,_,{value:0})):_;if(_ instanceof AST_LabeledStatement&&_.body instanceof AST_For){if(n(_,$),_.body instanceof AST_BlockStatement){var g=_.body;return _.body=g.body.pop(),g.body.push(_),e?List.splice(g.body):g}return _}return _ instanceof AST_Scope?(w(),_):_ instanceof AST_SymbolImport?!x.option("imports")||_.definition().id in F?_:e?List.skip:null:void 0}function w(){var e=R;n(R=_,$),R=e}},function(e,n){if(e instanceof AST_BlockStatement)return je(e,$.parent(),n);if(e instanceof AST_For)return e.init instanceof AST_BlockStatement&&(i=e.init,e.init=i.body.pop(),i.body.push(e)),e.init instanceof AST_Defun?((i=i||de(AST_BlockStatement,e,{body:[e]})).body.splice(-1,0,e.init),e.init=null):e.init instanceof AST_SimpleStatement?e.init=e.init.body:Q(e.init)&&(e.init=null),i?n?List.splice(i.body):i:e;if(e instanceof AST_ForIn){if(!D||!x.option("loops"))return;if(!Q(e.body))return;var t=m(e);if(!t)return;var r=t.definition();if(r.id in F)return;V(t,"Dropping unused loop variable {name}"),N[r.id]===e&&delete N[r.id];var i=[],t=e.object.drop_side_effect_free(x);return t&&(AST_Node.warn("Side effects in object of for-in loop [{file}:{line},{col}]",t.start),i.push(de(AST_SimpleStatement,e,{body:t}))),e.init instanceof AST_Definitions&&r.orig[0]instanceof AST_SymbolCatch&&i.push(e.init),z(i,e,n)}return e instanceof AST_Import?(e.properties&&0==e.properties.length&&(e.properties=null),e):e instanceof AST_Sequence&&!(1<e.expressions.length)?Ae(0,$.parent(),e,e.expressions[0]):void 0});$.push(x.parent()),E.transform($),E instanceof AST_Lambda&&1==E.body.length&&E.body[0]instanceof AST_Directive&&"use strict"==E.body[0].value&&(E.body.length=0),L.forEach(function(e){e.value=null}),j.forEach(function(e){e.name=null}),q.forEach(function(e){pn(e,x,I)})}function V(e,n){AST_Node[0<e.definition().references.length?"info":"warn"](n+" [{file}:{line},{col}]",M(e))}function M(e){return{name:e.name,file:e.start.file,line:e.start.line,col:e.start.col}}function r(e){return e[e instanceof AST_Assign?"right":"value"]}function z(e,n,t){switch(e.length){case 0:return t?List.skip:de(AST_EmptyStatement,n);case 1:return e[0];default:return t?List.splice(e):de(AST_BlockStatement,n,{body:e})}}function A(e,n){return e.scope.resolve()===E&&(e.fixed&&n.fixed||(C[e.id]=!1),!1!==C[e.id])}function T(e,n){C[e.id]||(C[e.id]=[]),n.fixed.assigns&&push_uniq(C[e.id],n.fixed.assigns)}function H(e,n){e=C[e.id];return e&&e.indexOf(n)}function h(e,n,t){e.id in F||(n&&t?(F[e.id]=n,u.push(e)):(l[e.id]=n,_[e.id]=t))}function W(e){var n=e.right;if(!e.write_only)return n;if(!(n instanceof AST_Binary&&ye[n.operator]))return n;if(!(n.left instanceof AST_SymbolRef))return n;if(!(e.left instanceof AST_SymbolRef))return n;e=e.left.definition();return n.left.definition()!==e||n.right.has_side_effects(x)?n:(A(e,n.left)&&T(e,n.left),n.right)}function m(e){var n=e.init;if(n instanceof AST_Definitions)return(n=n.definitions[0].name)instanceof AST_SymbolDeclaration&&n;for(;n instanceof AST_PropAccess;)n=n.expression.tail_node();return n instanceof AST_SymbolRef?n:void 0}function i(e,n,t){e instanceof AST_Assign&&e.left instanceof AST_SymbolRef&&(r=e.left.definition()).scope.resolve()===E&&p.add(r.id,e),e instanceof AST_Unary&&e.expression instanceof AST_SymbolRef&&(r=e.expression.definition()).scope.resolve()===E&&p.add(r.id,e);var r,i=[],o=O(e,i);if(o&&((f=o.definition()).scope.resolve()===E||E.variables.get(o.name)===f)&&(!ue(f)||all(E.argnames,function(e){return!e.match_symbol(function(e){if(e instanceof AST_SymbolFunarg){e=e.definition();return e.references.length>e.replaced}},!0)}))){if("p"===e.write_only&&e.right.may_throw_on_access(x,!0))return;var a,s=i.assign;return s&&(s.write_only=!0,s.walk(d)),i.forEach(function(e){e.walk(d)}),e instanceof AST_Assign&&(s=W(e),i=!1,t&&!0===e.write_only&&!s.has_side_effects(x)?S.add(f.id,s):(s.walk(d),i="="==s.tail_node().operator),e.left===o?e.write_only&&!i||h(f,o,_[f.id]):(a=o.fixed_value())&&a.is_constant()||h(f,l[f.id],!0)),A(f,o)&&is_lhs(o,e)!==o&&T(f,o),!0}if(e instanceof AST_ForIn){if(e.init instanceof AST_SymbolRef&&R===E&&((a=e.init.definition().id)in N||(N[a]=e)),!D||!x.option("loops"))return;if(!Q(e.body))return;if(e.init.has_side_effects(x))return;if(!(o=m(e)))return;if((r=o.definition()).scope.resolve()!==E){o=c(o.name);if(o===r||o&&o.redefined()===r)return}return e.object.walk(d),!0}if(e instanceof AST_SymbolRef)return(f=e.definition()).id in F||(F[f.id]=!0,u.push(f)),v(f.scope,e.scope)&&(!(r=f.redefined())||r.id in F||(F[r.id]=!0,u.push(r))),A(f,e)&&T(f,e),!0;if(e instanceof AST_Scope){var f=R;return R=e,n(),R=f,!0}}function y(e,n){if(n.value=n.value.transform($),!n.name.transform(e)){if(n.name instanceof AST_Destructured)return null;e=n.value.drop_side_effect_free(x);if(!e)return null;V(n.name,"Side effects in default value of unused variable {name}"),n.name.__unused=null,n.value=e}return n}function Y(e,d,A,T){var h=new TreeTransformer(function(i){if(i instanceof AST_DefaultValue){if(!(x.option("default_values")&&d&&d.is_defined(x))){var e=T;T=!1;var n=y(h,i);return T=e,!n&&T&&d&&(d=d.drop_side_effect_free(x)),n}i=i.name}if(i instanceof AST_DestructuredArray){var e=T,t=d;d instanceof AST_SymbolRef&&(T=!1,d=d.fixed_value());var r=d instanceof AST_Array&&d.elements,o=[],a=T&&[],s=0;if(i.elements.forEach(function(e,n){(d=r&&r[n])instanceof AST_Hole?d=null:d instanceof AST_Spread&&(T&&(a.length=s,$e(t,a),[].push.apply(a,r.slice(n)),t.elements=a),d=r=!1),(e=e.transform(h))&&(o[s]=e),T&&d&&(a[s]=d),!e&&!d&&T&&r||s++}),d=r&&de(AST_Array,t,{elements:r.slice(i.elements.length)}),i.rest&&(n=T,T=!1,i.rest=i.rest.transform(x.option("rests")?h:$),T=n,i.rest&&(o.length=s)),T&&(d=(d=d&&!i.rest?d.drop_side_effect_free(x):d)instanceof AST_Array?d.elements:d instanceof AST_Sequence?d.expressions:d&&[d])&&d.length&&(a.length=s,[].push.apply(a,d)),d=t,T=e,r&&a&&($e(d,a),d.elements=a),!i.rest&&(d instanceof AST_Array||d&&d.is_string(x)))switch(o.length){case 0:return T&&(d=d.drop_side_effect_free(x)),null;case 1:if(!T)break;var f=o[0];if(f.has_side_effects(x))break;if(d.has_side_effects(x)&&f.match_symbol(function(e){return e instanceof AST_PropAccess}))break;return d=de(AST_Sub,i,{expression:d,property:de(AST_Number,i,{value:0})}),f}return $e(i,o),i.elements=o,i}if(i instanceof AST_DestructuredObject){var c,u,e=T,t=d;d instanceof AST_SymbolRef&&(T=!1,d=d.fixed_value()),d instanceof AST_Object&&(c=[],u=Object.create(null),d.properties.forEach(function(e,n){if(e instanceof AST_Spread)return u=!1;var t=e.key;(t=t instanceof AST_Node?t.evaluate(x,!0):t)instanceof AST_Node?u=!1:!u||e instanceof AST_ObjectSetter||(u[t]=e),c[n]=t})),i.rest&&(d=!1,i.rest=i.rest.transform(x.option("rests")?h:$));var l=Object.create(null),_=T&&Object.create(null),p=[];if(i.properties.map(function(e){var n=e.key;return n instanceof AST_Node&&(e.key=n=n.transform($),n=n.evaluate(x,!0)),n instanceof AST_Node?_=!1:l[n]=!(n in l),n}).forEach(function(e,n){var t,r=i.properties[n];e instanceof AST_Node?(d=T=!1,t=r.value.transform(h)||v(r.value)):(T=_&&l[e],(!(n=u&&u[e])||(d=n.value)instanceof AST_Accessor)&&(d=!1),(t=r.value.transform(h))?_&&(_[e]=!1):((i.rest||m(r))&&(t=v(r.value)),!_||e in _||(n?(_[e]=n,null===d&&(u[e]=m(n)&&de(AST_ObjectKeyVal,n,{key:n.key,value:de(AST_Number,n,{value:0})}))):_[e]=!0)),d&&(n.value=d)),t&&(r.value=t,p.push(r))}),d=t,T=e,_&&c&&(d.properties=List(d.properties,function(e,n){if(e instanceof AST_Spread)return e;var t=c[n];if(t instanceof AST_Node)return e;if(t in _){n=_[t];if(!n)return e;if(n===e)return u[t]||List.skip}else if(i.rest)return e;t=e.value.drop_side_effect_free(x);return t?(e.value=t,e):m(e)?de(AST_ObjectKeyVal,e,{key:e.key,value:de(AST_Number,e,{value:0})}):List.skip})),d&&!i.rest)switch(p.length){case 0:if(d.may_throw_on_access(x,!0))break;return T&&(d=d.drop_side_effect_free(x)),null;case 1:if(!T)break;var S=p[0];if(S.key instanceof AST_Node)break;if(S.value.has_side_effects(x))break;if(d.has_side_effects(x)&&S.value.match_symbol(function(e){return e instanceof AST_PropAccess}))break;return d=de(AST_Sub,i,{expression:d,property:X(S.key,S)}),S.value}return i.properties=p,i}return!(i=i instanceof AST_Hole?null:A(i))&&T&&d&&(d=d.drop_side_effect_free(x)),i});return{name:e.transform(h),value:d};function m(e){return e.key instanceof AST_Node&&e.key.has_side_effects(x)}function v(e){return e instanceof AST_DefaultValue?v(e.name):e instanceof AST_Destructured?(null===d?d=de(AST_Number,e,{value:0}):d&&(!0===d.tail_node().write_only||d.may_throw_on_access(x,!0))&&(d=de(AST_Array,e,{elements:d instanceof AST_Sequence?d.expressions:[d]})),de(AST_DestructuredObject,e,{properties:[]})):(e.__unused=null,e)}}}),AST_Scope.DEFMETHOD("hoist_declarations",function(a){var s,f,c,n,u,l,_,p,S,d,A;a.has_directive("use asm")||(s=a.option("hoist_funs"),f=a.option("hoist_vars"),c=this,f&&(n=0,c.walk(new TreeWalker(function(e){return 1<n||(e instanceof AST_ExportDeclaration||(e instanceof AST_Scope&&e!==c||(e instanceof AST_Var?(n++,!0):void 0)))})),n<=1&&(f=!1)),(s||f)&&(u=Object.create(null),l=[],_=[],p=new Dictionary,S=0,d=new TreeTransformer(function(e,n,t){if(e!==c){if(e instanceof AST_Directive)return l.push(e),t?List.skip:de(AST_EmptyStatement,e);var r;if(e instanceof AST_LambdaDefinition)return s?(r=d.parent())instanceof AST_ExportDeclaration||r instanceof AST_ExportDefault||r!==c&&a.has_directive("use strict")?e:(_.push(e),t?List.skip:de(AST_EmptyStatement,e)):e;if(e instanceof AST_Var){if(!f)return e;if((r=d.parent())instanceof AST_ExportDeclaration)return e;if(!all(e.definitions,function(e){e=e.name;return e instanceof AST_SymbolVar&&!u[e.name]&&c.find_variable(e.name)===e.definition()}))return e;e.definitions.forEach(function(e){p.set(e.name.name,e),++S});var i=e.to_assignments();if(r instanceof AST_ForEnumeration&&r.init===e){if(i)return i;var o=e.definitions[0].name;return de(AST_SymbolRef,o,o)}return r instanceof AST_For&&r.init===e?i:i?de(AST_SimpleStatement,e,{body:i}):t?List.skip:de(AST_EmptyStatement,e)}return e instanceof AST_Scope?e:e instanceof AST_SymbolConst?(u[e.name]=!0,e):void 0}}),c.transform(d),0<S&&(A=[],c instanceof AST_Lambda&&c.each_argname(function(e){p.del(e.name)}),p.each(function(e,n){(e=e.clone()).value=null,A.push(e),p.set(n,e)}),0<A.length&&(function e(n){for(;n.length;){var t=n[0];if(t instanceof AST_SimpleStatement){var r,i,o,a=t.body;if(a instanceof AST_Assign&&"="==a.operator&&(r=a.left)instanceof AST_Symbol&&p.has(r.name)){if((o=p.get(r.name)).value)break;var s=a.right;s instanceof AST_Sequence&&(s=s.clone()),o.value=s,remove(A,o),A.push(o),n.shift();continue}if(a instanceof AST_Sequence&&(i=a.expressions[0])instanceof AST_Assign&&"="==i.operator&&(r=i.left)instanceof AST_Symbol&&p.has(r.name)){if((o=p.get(r.name)).value)break;o.value=i.right,remove(A,o),A.push(o),t.body=K(a,a.expressions.slice(1));continue}}if(t instanceof AST_EmptyStatement)n.shift();else{if(!(t instanceof AST_BlockStatement)||e(t.body))break;n.shift()}}return n.length}(c.body),A=de(AST_Var,c,{definitions:A}),_.push(A))),c.body=l.concat(_,c.body)))}),AST_Scope.DEFMETHOD("process_boolean_returns",noop),AST_Defun.DEFMETHOD("process_boolean_returns",function(e){var n;e.option("booleans")&&(n=He(this),We(this.name.definition(),n,e)&&(e.parent()instanceof AST_ExportDefault||Ye(this,e)))}),AST_Function.DEFMETHOD("process_boolean_returns",function(e){if(e.option("booleans")){var n=He(this);if(!this.name||We(this.name.definition(),n,e)){var t=e.parent();if(t instanceof AST_Assign){if("="!=t.operator)return;if(!((r=t.left)instanceof AST_SymbolRef))return;if(!We(r.definition(),n,e))return}else if(t instanceof AST_Call&&t.expression!==this){var r,i=t.expression;if(!((i=i instanceof AST_SymbolRef?i.fixed_value():i)instanceof AST_Lambda))return;if(i.uses_arguments||i.pinned())return;if((r=(r=i.argnames[t.args.indexOf(this)])instanceof AST_DefaultValue?r.name:r)instanceof AST_SymbolFunarg&&!We(r.definition(),n,e))return}else{if("Call"!=t.TYPE)return;e.pop();t=e.in_boolean_context();if(e.push(this),!t)return}Ye(this,e)}}}),AST_BlockScope.DEFMETHOD("var_names",function(){var t=this._var_names;return t||(this._var_names=t=Object.create(null),this.enclosed.forEach(function(e){t[e.name]=!0}),this.variables.each(function(e,n){t[n]=!0})),t}),AST_Scope.DEFMETHOD("make_var",function(e,n,t){var r=[this];n instanceof AST_SymbolDeclaration&&n.definition().references.forEach(function(e){var n=e.scope;if(!member(n,r))for(;push_uniq(r,n),(n=n.parent_scope)&&n!==this;);});for(var i=t=t.replace(/(?:^[^a-z_$]|[^a-z0-9_$])/gi,"_"),o=0;!all(r,function(e){return!e.var_names()[i]});o++)i=t+"$"+o;var n=de(e,n,{name:i,scope:this}),a=this.def_variable(n);return r.forEach(function(e){e.enclosed.push(a),e.var_names()[i]=!0}),n}),AST_Scope.DEFMETHOD("hoist_properties",function(i){var s,o,f;function c(e,n,t){if(e instanceof AST_Symbol){var r=e.definition();if(r.assignments==t&&r.references.length-r.replaced!=t&&!r.single_use&&!o(r)&&e.fixed_value()===n){r=e.fixed||r.fixed;return r.direct_access?void 0:(!r.escaped||1!=r.escaped.depth)&&(n instanceof AST_Object&&0<n.properties.length&&all(n.properties,Fn)&&_e(e,i))}}}i.option("hoist_props")&&!i.has_directive("use asm")&&(o=(s=this)instanceof AST_Toplevel&&i.top_retain||return_false,f=Object.create(null),s.transform(new TreeTransformer(function(t,e){if(t instanceof AST_Assign){if("="!=t.operator)return;if(!t.write_only)return;if(!c(t.left,t.right,1))return;e(t,this);var r=new Dictionary,i=[],o=[];return t.right.properties.forEach(function(e){var n=a(AST_SymbolVar,t.left,e.key);o.push(de(AST_VarDef,t,{name:n,value:null}));n=de(AST_SymbolRef,t,{name:n.name,scope:s,thedef:n.definition()});n.reference(),i.push(de(AST_Assign,t,{operator:"=",left:n,right:e.value}))}),r.value=t.right,f[t.left.definition().id]=r,s.body.splice(s.body.indexOf(this.stack[1])+1,0,de(AST_Var,t,{definitions:o})),K(t,i)}if(t instanceof AST_Scope)return t===s?void 0:t;if(t instanceof AST_VarDef&&c(t.name,t.value,0)){e(t,this);var r=new Dictionary,n=[],e=t.clone();return e.value=t.name instanceof AST_SymbolConst?de(AST_Number,t,{value:0}):null,n.push(e),t.value.properties.forEach(function(e){n.push(de(AST_VarDef,t,{name:a(t.name.CTOR,t.name,e.key),value:e.value}))}),r.value=t.value,f[t.name.definition().id]=r,List.splice(n)}function a(e,n,t){n=s.make_var(e,n,n.name+"_"+t);return r.set(t,n.definition()),n}})),s.transform(new TreeTransformer(function(e,n){if(e instanceof AST_PropAccess){if(!(e.expression instanceof AST_SymbolRef))return;if(!(r=f[e.expression.definition().id]))return;if(e.expression.fixed_value()!==r.value)return;var t=r.get(e.get_property()),t=de(AST_SymbolRef,e,{name:t.name,scope:e.expression.scope,thedef:t});return t.reference(),t}if(e instanceof AST_SymbolRef){var r=f[e.definition().id];if(r&&e.fixed_value()===r.value)return de(AST_Object,e,{properties:[]})}})))}),(se=function(e,n){e.DEFMETHOD("drop_side_effect_free",n)})(AST_Node,return_this),se(AST_Accessor,return_null),se(AST_Array,function(e,n){n=Ke(this.elements,e,n,Xe);return n?n===this.elements&&all(n,function(e){return e instanceof AST_Spread})?this:K(this,n.map(Je)):null}),se(AST_Assign,function(e){var n=this.left;if(n instanceof AST_PropAccess){var t=n.expression;if(t.may_throw_on_access(e,!0))return this;if(e.has_directive("use strict")&&t.is_constant())return this}return n.has_side_effects(e)||ye[this.operator.slice(0,-1)]?this:(this.write_only=!0,root_expr(n).is_constant_expression(e.find_parent(AST_Scope))?this.right.drop_side_effect_free(e):this)}),se(AST_Await,function(e){if(!e.option("awaits"))return this;var n=this.expression;if(!yn(e,n))return this;var t=this.clone();return t.expression=n.drop_side_effect_free(e)||de(AST_Number,this,{value:0}),t}),se(AST_Binary,function(e,n){var t=this.left,r=this.right,i=this.operator;if("in"==i&&!vn(r))return(o=t.drop_side_effect_free(e,n))===t?this:((s=this.clone()).left=o||de(AST_Number,t,{value:0}),s);var o,a=r.drop_side_effect_free(e,n);if(!a)return t.drop_side_effect_free(e,n);if(ye[i]&&a.has_side_effects(e)){var s=this;if(a!==r&&((s=s.clone()).right=a.drop_side_effect_free(e)),"??"==i)return s;i=de(AST_Binary,this,{operator:"&&"==i?"||":"&&",left:t.negate(e,n),right:s.right});return(n?W:ne)(s,i)}return(o=t.drop_side_effect_free(e,n))?(a=a.drop_side_effect_free(e))?K(this,[o,a]):o:a}),se(AST_Call,function(e,n){var t=this;if(t.is_expr_pure(e)){t.pure&&AST_Node.warn("Dropping __PURE__ call [{file}:{line},{col}]",t.start);var r=Ke(t.args,e,n,Xe);return r&&K(t,r.map(Je))}var i=t.expression;if(t.is_call_pure(e))return(a=t.args.slice()).unshift(i.expression),(a=Ke(a,e,n,Xe))&&K(t,a.map(Je));if(e.option("yields")&&is_generator(i)){r=t.clone();r.expression=de(AST_Function,i,i),r.expression.body=[];var o=r.transform(e);if(o!==r)return o.drop_side_effect_free(e,n)}o=Qe(e,i);if(o&&((t=t.clone()).expression=o,i._squeezed&&(t.expression._squeezed=!0)),t instanceof AST_New){var a,o=i;if((o=o instanceof AST_SymbolRef?o.fixed_value():o)instanceof AST_Lambda){if(function(e,n){e.new=!0;var t=all(e.body,function(e){return!e.has_side_effects(n)})&&all(e.argnames,function(e){return!e.match_symbol(return_false)})&&!(e.rest&&e.rest.match_symbol(return_false));return delete e.new,t}(o,e))return(a=t.args.slice()).unshift(i),(a=Ke(a,e,n,Xe))&&K(t,a.map(Je));o.contains_this()||(t=de(AST_Call,t,t))}}return t.call_only=!0,t}),se(AST_ClassExpression,function(e,n){var t=this.name;return t&&t.fixed_value()!==this&&0<t.definition().references.length?this:Ze(this,e,n)}),se(AST_Conditional,function(e){var n,t,r=this.consequent.drop_side_effect_free(e),i=this.alternative.drop_side_effect_free(e);return r===this.consequent&&i===this.alternative?this:(e.option("ie")&&(n=[],r instanceof AST_Function&&(n.push(r),r=null),i instanceof AST_Function&&(n.push(i),i=null)),r?i?((t=this.clone()).consequent=r,t.alternative=i):t=de(AST_Binary,this,{operator:"&&",left:this.condition,right:r}):t=i?de(AST_Binary,this,{operator:"||",left:this.condition,right:i}):this.condition.drop_side_effect_free(e),e.option("ie")?(t&&n.push(t),0==n.length?null:K(this,n)):t)}),se(AST_Constant,return_null),se(AST_DefClass,function(e,n){return Ze(this,e,n)}),se(AST_Dot,function(e,n){var t=this.expression;return!this.optional&&t.may_throw_on_access(e)?this:t.drop_side_effect_free(e,n)}),se(AST_Function,function(e){return Ge(this,e)?null:this}),se(AST_LambdaExpression,return_null),se(AST_Object,function(e,n){var t=[];this.properties.forEach(function(e){e instanceof AST_Spread?t.push(e):(e.key instanceof AST_Node&&t.push(e.key),t.push(e.value))});n=Ke(t,e,n,function(e,n,t){var r=e.expression;return De(r)?e:r.drop_side_effect_free(n,t)});return n?n!==t||all(n,function(e){return!(e instanceof AST_Spread)})?K(this,n.map(function(e){return e instanceof AST_Spread?de(AST_Object,e,{properties:[e]}):e})):this:null}),se(AST_ObjectIdentity,return_null),se(AST_Sequence,function(e,n){var t=Ke(this.expressions,e,n);if(!t)return null;var r,i,o,a=t.length-1,s=t[a];return e.option("awaits")&&0<a&&s instanceof AST_Await&&s.expression.is_constant()&&(t=t.slice(0,-1),s.expression=t[--a],t[a]=s),e.option("conditionals")&&0<a&&(r=t[a-1])instanceof AST_Assign&&"="==r.operator&&(o=r.left)instanceof AST_SymbolRef&&(i=dn(e,o.definition(),r.right,s))&&((r=r.clone()).right=i,(t=t.slice(0,-2)).push(r.drop_side_effect_free(e,n))),t===this.expressions?this:K(this,t)}),se(AST_Sub,function(e,n){var t=this.expression,r=this.property;if(t.may_throw_on_access(e)){if(!this.optional)return this;if(r.has_side_effects(e)){if(!(r=r.drop_side_effect_free(e)))return t.drop_side_effect_free(e,n);var i=this.clone();return i.property=r,i}}return(t=t.drop_side_effect_free(e,n))?(r=r.drop_side_effect_free(e))?K(this,[t,r]):t:r.drop_side_effect_free(e,n)}),se(AST_SymbolRef,function(e){return this.is_declared(e)&&_e(this,e)?null:this}),se(AST_Template,function(e,n){var t=this;if(t.is_expr_pure(e)){var r=t.expressions;return 0==r.length?null:K(t,r).drop_side_effect_free(e,n)}n=t.tag,e=Qe(e,n);return e&&((t=t.clone()).tag=e,n._squeezed&&(t.tag._squeezed=!0)),t}),se(AST_Unary,function(e,n){var t=this.expression;if(unary_side_effects[this.operator])return this.write_only=!t.has_side_effects(e),this;if("typeof"==this.operator&&t instanceof AST_SymbolRef&&_e(t,e))return null;var r=t.drop_side_effect_free(e,n);return n&&r&&Z(r)?r===t&&"!"==this.operator?this:r.negate(e,n):r}),e(AST_SimpleStatement,function(e,n){if(n.option("side_effects")){var t=e.body,n=t.drop_side_effect_free(n,!0);if(!n)return AST_Node.warn("Dropping side-effect-free statement [{file}:{line},{col}]",e.start),de(AST_EmptyStatement,e);if(n!==t)return de(AST_SimpleStatement,e,{body:n})}return e}),e(AST_While,function(e,n){return n.option("loops")?de(AST_For,e,e).optimize(n):e}),e(AST_Do,function(t,e){if(!e.option("loops"))return t;var n=tn(e,t.condition);if(!(n instanceof AST_Node)){if(n&&!en(t,e.parent(),AST_Continue))return de(AST_For,t,{body:de(AST_BlockStatement,t.body,{body:[t.body,de(AST_SimpleStatement,t.condition,{body:t.condition})]})}).optimize(e);if(!en(t,e.parent()))return de(AST_BlockStatement,t.body,{body:[t.body,de(AST_SimpleStatement,t.condition,{body:t.condition})]}).optimize(e)}if(t.body instanceof AST_BlockStatement&&!en(t,e.parent(),AST_Continue)){for(var r=t.body.body,i=r.length;0<=--i;){var o=r[i];if(o instanceof AST_If&&!o.alternative&&o.body instanceof AST_Break&&e.loopcontrol_target(o.body)===t){if(a(o.condition))break;t.condition=de(AST_Binary,t,{operator:"&&",left:o.condition.negate(e),right:t.condition}),r.splice(i,1)}else if(o instanceof AST_SimpleStatement){if(a(o.body))break;t.condition=K(t,[o.body,t.condition]),r.splice(i,1)}else if(!q(o,!0))break}t.body=je(t.body,e.parent())}return t.body instanceof AST_EmptyStatement?de(AST_For,t,t).optimize(e):t.body instanceof AST_SimpleStatement?de(AST_For,t,{condition:K(t.condition,[t.body.body,t.condition]),body:de(AST_EmptyStatement,t)}).optimize(e):t;function a(e){var n=!1;return e.walk(new TreeWalker(function(e){return!!n||(e instanceof AST_SymbolRef?(member(e.definition(),t.enclosed)||(n=!0),!0):void 0)})),n}}),e(AST_For,function(e,n){if(!n.option("loops"))return e;if(n.option("side_effects")&&(e.init&&(e.init=e.init.drop_side_effect_free(n)),e.step&&(e.step=e.step.drop_side_effect_free(n))),e.condition){var t=tn(n,e.condition);if(t)t instanceof AST_Node||(e.body=de(AST_BlockStatement,e.body,{body:[de(AST_SimpleStatement,e.condition,{body:e.condition}),e.body]}),e.condition=null);else if(n.option("dead_code")){t=[];return is_statement(e.init)?t.push(e.init):e.init&&t.push(de(AST_SimpleStatement,e.init,{body:e.init})),t.push(de(AST_SimpleStatement,e.condition,{body:e.condition})),$(n,e.body,t),de(AST_BlockStatement,e,{body:t}).optimize(n)}}return function n(t,r){var e=a(t.body);if(r.option("dead_code")&&(e instanceof AST_Break||e instanceof AST_Continue&&s(e)||e instanceof AST_Exit)){var i=[];is_statement(t.init)?i.push(t.init):t.init&&i.push(de(AST_SimpleStatement,t.init,{body:t.init}));var o=s(e)||e instanceof AST_Exit;return t.condition&&o?i.push(de(AST_If,t,{condition:t.condition,body:e,alternative:null})):t.condition?i.push(de(AST_SimpleStatement,t.condition,{body:t.condition})):o&&i.push(e),$(r,t.body,i),de(AST_BlockStatement,t,{body:i})}if(e instanceof AST_If){if((o=a(e.body))instanceof AST_Break&&!s(o))return t.condition?t.condition=de(AST_Binary,t.condition,{left:t.condition,operator:"&&",right:e.condition.negate(r)}):t.condition=e.condition.negate(r),i=B(e.alternative),$(r,e.body,i),f(i);if((o=a(e.alternative))instanceof AST_Break&&!s(o))return t.condition?t.condition=de(AST_Binary,t.condition,{left:t.condition,operator:"&&",right:e.condition}):t.condition=e.condition,i=B(e.body),$(r,e.alternative,i),f(i)}return t;function a(e){return e instanceof AST_BlockStatement?e.body[0]:e}function s(e){return r.loopcontrol_target(e)!==r.self()}function f(e){return t.body instanceof AST_BlockStatement?(t.body=t.body.clone(),t.body.body=e.concat(t.body.body.slice(1)),t.body=t.body.transform(r)):t.body=de(AST_BlockStatement,t.body,{body:e}).transform(r),n(t,r)}}(e,n)}),e(AST_ForEnumeration,function(e,n){var t;return n.option("varify")&&P(e.init)&&(((t=e.init.definitions[0].name)instanceof AST_Destructured||t instanceof AST_SymbolLet)&&!t.match_symbol(function(e){if(e instanceof AST_SymbolDeclaration){e=e.definition();return!wn(e)||sn(n,e)}},!0)&&(e.init=fn(e.init))),e}),e(AST_If,function(e,f){if(Q(e.alternative)&&(e.alternative=null),!f.option("conditionals"))return e;if(f.option("booleans")&&!e.condition.has_side_effects(f)&&rn(f,e.condition),f.option("dead_code")){var n=tn(f,e.condition);if(!n){AST_Node.warn("Condition always false [{file}:{line},{col}]",e.condition.start);var t=[de(AST_SimpleStatement,e.condition,{body:e.condition})];return $(f,e.body,t),e.alternative&&t.push(e.alternative),de(AST_BlockStatement,e,{body:t}).optimize(f)}if(!(n instanceof AST_Node)){AST_Node.warn("Condition always true [{file}:{line},{col}]",e.condition.start);t=[de(AST_SimpleStatement,e.condition,{body:e.condition}),e.body];return e.alternative&&$(f,e.alternative,t),de(AST_BlockStatement,e,{body:t}).optimize(f)}}var r=e.condition.negate(f),i=e.condition.print_to_string().length,o=r.print_to_string().length,a=o<i;e.alternative&&a&&(a=!1,e.condition=r,u=e.body,e.body=e.alternative||de(AST_EmptyStatement,e),e.alternative=u);var t=[],s=[],c=[],n=_(e.body,t,s,c),u=_(e.alternative,t,s,c);if(n&&u)return 0<s.length&&t.push(de(AST_Var,e,{definitions:s})),0==n.length?t.push(de(AST_SimpleStatement,e.condition,{body:0<u.length?de(AST_Binary,e,{operator:"||",left:e.condition,right:K(e.alternative,u)}).transform(f):e.condition.clone()}).optimize(f)):0==u.length?(i===o&&!a&&e.condition instanceof AST_Binary&&"||"==e.condition.operator&&(a=!0),t.push(de(AST_SimpleStatement,e,{body:de(AST_Binary,e,{operator:a?"||":"&&",left:a?r:e.condition,right:K(e.body,n)}).transform(f)}).optimize(f))):t.push(de(AST_SimpleStatement,e,{body:de(AST_Conditional,e,{condition:e.condition,consequent:K(e.body,n),alternative:K(e.alternative,u)})}).optimize(f)),c.forEach(function(e){e.definition().references.push(e)}),de(AST_BlockStatement,e,{body:t}).optimize(f);if((e=Q(e.body)?de(AST_If,e,{condition:r,body:e.alternative,alternative:null}):e).body instanceof AST_Exit&&e.alternative instanceof AST_Exit&&e.body.TYPE==e.alternative.TYPE){var l=de(e.body.CTOR,e,{value:de(AST_Conditional,e,{condition:e.condition,consequent:e.body.value||de(AST_Undefined,e.body).transform(f),alternative:e.alternative.value||de(AST_Undefined,e.alternative).transform(f)})});return l instanceof AST_Return&&(l.in_bool=e.body.in_bool||e.alternative.in_bool),l}if(Re((e=e.body instanceof AST_If&&!e.body.alternative&&!e.alternative?de(AST_If,e,{condition:de(AST_Binary,e.condition,{operator:"&&",left:e.condition,right:e.body.condition}),body:e.body.body,alternative:null}):e).body)&&e.alternative){l=e.alternative;return e.alternative=null,de(AST_BlockStatement,e,{body:[e,l]}).optimize(f)}if(Re(e.alternative)){t=e.body;return e.body=e.alternative,e.condition=a?r:e.condition.negate(f),e.alternative=null,de(AST_BlockStatement,e,{body:[e,t]}).optimize(f)}return f.option("typeofs")&&nn(e.condition,e.body,e.alternative),e;function _(e,n,t,r){if(null==e)return[];if(e instanceof AST_BlockStatement){for(var i=[],o=0;o<e.body.length;o++){var a=e.body[o];if(a instanceof AST_LambdaDefinition)n.push(a);else if(!(a instanceof AST_EmptyStatement))if(a instanceof AST_SimpleStatement){if(!f.option("sequences")&&0<i.length)return;i.push(a.body)}else{if(!(a instanceof AST_Var))return;if(!f.option("sequences")&&0<i.length)return;a.remove_initializers(f,t),a.definitions.forEach(s)}}return i}if(e instanceof AST_LambdaDefinition)return n.push(e),[];if(e instanceof AST_EmptyStatement)return[];if(e instanceof AST_SimpleStatement)return[e.body];if(e instanceof AST_Var){i=[];return e.remove_initializers(f,t),e.definitions.forEach(s),i}function s(e){e.value&&i.push(de(AST_Assign,e,{operator:"=",left:e.name.convert_symbol(AST_SymbolRef,function(e){r.push(e)}),right:e.value}))}}}),e(AST_Switch,function(r,t){if(!t.option("switches"))return r;if(!t.option("dead_code"))return r;for(var e,n,i,o=[],a=[],s=[],f=0,c=r.body.length;f<c;f++){if((e=r.body[f])instanceof AST_Default){var u=o[o.length-1];if(n||v(e.body[0],t)&&(!u||Re(u))){b(e,u);continue}n=e}else{var l=e.expression,_=de(AST_Binary,r,{operator:"===",left:r.expression,right:l}).evaluate(t,!0);if(!_){l.has_side_effects(t)&&s.push(l),b(e,o[o.length-1]);continue}if(!(_ instanceof AST_Node))for(n&&(_=o.indexOf(n),o.splice(_,1),b(n,o[_-1]),n=null),l.has_side_effects(t)?i=e:n=e=de(AST_Default,e,e);++f<c;)b(r.body[f],e)}if(c<=f+1||Re(e)){var p,u=o[o.length-1],S=e.body;if(Re(u))switch(u.body.length-S.length){case 1:if(!v(p=u.body[u.body.length-1],t))break;S=S.concat(p);case 0:var d=de(AST_BlockStatement,u,u),A=de(AST_BlockStatement,e,{body:S});d.equivalent_to(A)&&(u.body=[])}}s.length&&(e instanceof AST_Default?o.push(de(AST_Case,r,{expression:K(r,s),body:[]})):(s.push(e.expression),e.expression=K(r,s)),s=[]),o.push(e)}for(s.length&&!i&&o.push(de(AST_Case,r,{expression:K(r,s),body:[]}));e=o[o.length-1];){if(v(p=e.body[e.body.length-1],t)&&e.body.pop(),e===n){if(!L(e))break}else{if(e.expression.has_side_effects(t))break;if(n){if(!L(n))break;if(o[o.length-2]!==n)break;n.body=n.body.concat(e.body),e.body=[]}else if(!L(e))break}b(e),o.pop()===n&&(n=null)}if(!e)return a.push(de(AST_SimpleStatement,r.expression,{body:r.expression})),s.length&&a.push(de(AST_SimpleStatement,r,{body:K(r,s)})),de(AST_BlockStatement,r,{body:a}).optimize(t);if(e===n)for(;(e=o[o.length-2])&&!(e instanceof AST_Default)&&L(e);){if((l=e.expression).has_side_effects(t)){if((u=o[o.length-3])&&!Re(u))break;n.body.unshift(de(AST_SimpleStatement,r,{body:l}))}b(e),o.splice(-2,1)}if(o[0].body=a.concat(o[0].body),r.body=o,t.option("conditionals"))switch(o.length){case 1:if(!y(o[0]))break;l=o[0].expression,S=o[0].body.slice();return o[0]!==n&&o[0]!==i?de(AST_If,r,{condition:de(AST_Binary,r,{operator:"===",left:r.expression,right:l}),body:de(AST_BlockStatement,r,{body:S}),alternative:null}).optimize(t):(l&&S.unshift(de(AST_SimpleStatement,l,{body:l})),S.unshift(de(AST_SimpleStatement,r.expression,{body:r.expression})),de(AST_BlockStatement,r,{body:S}).optimize(t));case 2:if(!member(n,o)||!y(o[1]))break;var T=(S=o[0].body.slice()).length&&v(S[S.length-1],t);if(T&&S.pop(),!all(S,y))break;var h=o[1].body.length&&de(AST_BlockStatement,o[1],o[1]),m=de(AST_If,r,{condition:de(AST_Binary,r,o[0]===n?{operator:"!==",left:r.expression,right:o[1].expression}:{operator:"===",left:r.expression,right:o[0].expression}),body:de(AST_BlockStatement,o[0],{body:S}),alternative:T&&h||null});return(m=!T&&h?de(AST_BlockStatement,r,{body:[m,h]}):m).optimize(t)}return r;function v(e,n){return e instanceof AST_Break&&n.loopcontrol_target(e)===r}function y(e){var n=!1,t=new TreeWalker(function(e){if(n||e instanceof AST_Lambda||e instanceof AST_SimpleStatement)return!0;v(e,t)&&(n=!0)});return t.push(r),e.walk(t),!n}function b(e,n){n&&!Re(n)?n.body=n.body.concat(e.body):$(t,e,a)}}),e(AST_Try,function(e,n){if(e.body=U(e.body,n),n.option("dead_code")){if(L(e)&&!(e.bcatch&&e.bcatch.argname&&e.bcatch.argname.match_symbol(function(e){return e instanceof AST_SymbolCatch&&!_e(e)},!0))){var t=[];return e.bcatch&&($(n,e.bcatch,t),t.forEach(function(e){e instanceof AST_Var&&e.definitions.forEach(function(e){var n=e.name.definition().redefined();n&&(e.name=e.name.clone(),e.name.thedef=n)})})),t.unshift(de(AST_BlockStatement,e,e).optimize(n)),e.bfinally&&t.push(de(AST_BlockStatement,e.bfinally,e.bfinally).optimize(n)),de(AST_BlockStatement,e,{body:t}).optimize(n)}if(e.bfinally&&L(e.bfinally)){t=de(AST_BlockStatement,e.bfinally,e.bfinally).optimize(n);if(t=e.body.concat(t),!e.bcatch)return de(AST_BlockStatement,e,{body:t}).optimize(n);e.body=t,e.bfinally=null}}return e}),AST_Const.DEFMETHOD("remove_initializers",on(function(e,n){return de(AST_Undefined,n).optimize(e)})),AST_Let.DEFMETHOD("remove_initializers",on(return_null)),AST_Var.DEFMETHOD("remove_initializers",on(return_null)),AST_Definitions.DEFMETHOD("to_assignments",function(){var e=this.definitions.reduce(function(e,n){var t,r,i=n.name.definition(),o=n.value;return o&&(o instanceof AST_Sequence&&(o=o.clone()),t=de(AST_SymbolRef,n.name,n.name),r=de(AST_Assign,n,{operator:"=",left:t,right:o}),e.push(r),(o=function(){return r.right}).assigns=[r],o.direct_access=i.direct_access,o.escaped=i.escaped,t.fixed=o,i.references.forEach(function(e){e=e.fixed&&e.fixed.assigns;e&&e[0]===n&&(e[0]=r)}),i.references.push(t)),i.assignments++,i.eliminated++,i.single_use=!1,e},[]);return 0==e.length?null:K(this,e)}),e(AST_Const,un),e(AST_Let,un),e(AST_Call,function(l,f){var a=l.expression,e=ln(l,f);if(e)return e;if(f.option("sequences"))if(a instanceof AST_PropAccess){if((m=_n(a))!==a){e=l.clone();return e.expression=m.expressions.pop(),m.expressions.push(e),m.optimize(f)}}else if(!J(0,a.tail_node()))if((m=_n(l))!==l)return m.optimize(f);if(f.option("unused")&&pn(l,f),f.option("unsafe"))if(he(a))switch(a.name){case"Array":if(1==l.args.length){if((c=l.args[0])instanceof AST_Number)try{var n=c.value;if(6<n)break;for(var t=Array(n),r=0;r<n;r++)t[r]=de(AST_Hole,l);return de(AST_Array,l,{elements:t})}catch(e){AST_Node.warn("Invalid array length: {length} [{file}:{line},{col}]",{length:n,file:l.start.file,line:l.start.line,col:l.start.col});break}if(!c.is_boolean(f)&&!c.is_string(f))break}return de(AST_Array,l,{elements:l.args});case"Object":if(0==l.args.length)return de(AST_Object,l,{properties:[]});break;case"String":if(0==l.args.length)return de(AST_String,l,{value:""});if(1==l.args.length)return de(AST_Binary,l,{operator:"+",left:de(AST_String,l,{value:""}),right:l.args[0]}).optimize(f);break;case"Number":if(0==l.args.length)return de(AST_Number,l,{value:0});if(1==l.args.length)return de(AST_UnaryPrefix,l,{operator:"+",expression:de(AST_Binary,l,{operator:"+",left:de(AST_String,l,{value:""}),right:l.args[0]})}).optimize(f);break;case"Boolean":if(0==l.args.length)return de(AST_False,l).optimize(f);if(1==l.args.length)return de(AST_UnaryPrefix,l,{operator:"!",expression:de(AST_UnaryPrefix,l,{operator:"!",expression:l.args[0]})}).optimize(f);break;case"RegExp":var i=[];if(all(l.args,function(e){var n=e.evaluate(f);return i.unshift(n),e!==n}))try{return te(f,l,de(AST_RegExp,l,{value:RegExp.apply(RegExp,i)}))}catch(e){AST_Node.warn("Error converting {expr} [{file}:{line},{col}]",{expr:l,file:l.start.file,line:l.start.line,col:l.start.col})}}else if(a instanceof AST_Dot)switch(a.property){case"toString":var o=a.expression;if(0==l.args.length&&!(o.may_throw_on_access(f)||o instanceof AST_Super))return de(AST_Binary,l,{operator:"+",left:de(AST_String,l,{value:""}),right:o}).optimize(f);break;case"join":if(a.expression instanceof AST_Array&&l.args.length<2)e:{var s=l.args[0];if(0==a.expression.elements.length&&!(s instanceof AST_Spread))return s?K(l,[s,de(AST_String,l,{value:""})]).optimize(f):de(AST_String,l,{value:""});if(!(s&&(s=s.evaluate(f))instanceof AST_Node)){for(var c,t=[],u=[],r=0;r<a.expression.elements.length;r++){var _=a.expression.elements[r];if((w=_.evaluate(f))!==_)u.push(w);else{if(_ instanceof AST_Spread)break e;0<u.length&&(t.push(de(AST_String,l,{value:u.join(s)})),u.length=0),t.push(_)}}return(0<u.length&&t.push(de(AST_String,l,{value:u.join(s)})),1==t.length)?t[0].is_string(f)?t[0]:de(AST_Binary,t[0],{operator:"+",left:de(AST_String,l,{value:""}),right:t[0]}):""==s?(c=t[0].is_string(f)||t[1].is_string(f)?t.shift():de(AST_String,l,{value:""}),t.reduce(function(e,n){return de(AST_Binary,n,{operator:"+",left:e,right:n})},c).optimize(f)):((B=l.clone()).expression=B.expression.clone(),B.expression.expression=B.expression.expression.clone(),B.expression.expression.elements=t,te(f,l,B))}}break;case"charAt":if(l.args.length<2)return(B=de(AST_Binary,l,{operator:"||",left:de(AST_Sub,l,{expression:a.expression,property:l.args.length?de(AST_Binary,l.args[0],{operator:"|",left:de(AST_Number,l,{value:0}),right:l.args[0]}):de(AST_Number,l,{value:0})}).optimize(f),right:de(AST_String,l,{value:""})})).is_string=return_true,B.optimize(f);break;case"apply":if(2==l.args.length&&l.args[1]instanceof AST_Array)return(N=l.args[1].elements.slice()).unshift(l.args[0]),de(AST_Call,l,{expression:de(AST_Dot,a,{expression:a.expression,property:"call"}),args:N}).optimize(f);break;case"call":o=a.expression;if((o=o instanceof AST_SymbolRef?o.fixed_value():o)instanceof AST_Lambda&&!o.contains_this())return(l.args.length?K(this,[l.args[0],de(AST_Call,l,{expression:a.expression,args:l.args.slice(1)})]):de(AST_Call,l,{expression:a.expression,args:[]})).optimize(f)}if(f.option("unsafe_Function")&&he(a)&&"Function"==a.name){if(0==l.args.length)return de(AST_Function,l,{argnames:[],body:[]}).init_vars(a.scope);if(all(l.args,function(e){return e instanceof AST_String}))try{var p=parse(T="n(function("+l.args.slice(0,-1).map(function(e){return e.value}).join()+"){"+l.args[l.args.length-1].value+"})"),S={ie:f.option("ie")};p.figure_out_scope(S);var d,A=new Compressor(f.options);(p=p.transform(A)).figure_out_scope(S),p.compute_char_frequency(S),p.mangle_names(S),p.walk(new TreeWalker(function(e){return!!d||(e instanceof AST_Lambda?(d=e,!0):void 0)}));var T=OutputStream();return AST_BlockStatement.prototype._codegen.call(d,T),l.args=[de(AST_String,l,{value:d.argnames.map(function(e){return e.print_to_string()}).join()}),de(AST_String,l.args[l.args.length-1],{value:T.get().replace(/^\{|\}$/g,"")})],l}catch(e){if(!(e instanceof JS_Parse_Error))throw e;AST_Node.warn("Error parsing code passed to new Function [{file}:{line},{col}]",l.args[l.args.length-1].start),AST_Node.warn(e.toString())}}var h=a instanceof AST_SymbolRef?a.fixed_value():a,m=f.parent(),v=f.self(),A=h instanceof AST_Lambda&&(!is_async(h)||f.option("awaits")&&m instanceof AST_Await)&&(!is_generator(h)||f.option("yields")&&v instanceof AST_Yield&&v.nested),S=A&&h.first_statement(),y=0,b=!1,g=!all(l.args,function(e){return!(e instanceof AST_Spread)}),p=A&&all(h.argnames,function(e,n){if(1==y&&l.args[n]instanceof AST_Spread&&(y=2),e instanceof AST_DefaultValue){n=1==(y=y||1)&&l.args[n];if(n&&!ve(n)&&(y=2),j(e.value))return!1;e=e.name}return!(e instanceof AST_Destructured&&(b=!0,j(e)))})&&!(h.rest instanceof AST_Destructured&&j(h.rest)),T=p&&f.option("inline")&&!l.is_expr_pure(f);if(T&&S instanceof AST_Return){var w=S.value;if(a===h&&!h.name&&(!w||w.is_constant_expression())&&U(h,f.find_parent(AST_Scope)))return K(l,I(w)).optimize(f)}if(A){var x=!1;if(T&&!h.uses_arguments&&!h.pinned()&&!(h.name&&h instanceof AST_LambdaExpression)&&(a===h||!gn(f,P=a.definition(),h)&&h.is_constant_expression(Y(f)))&&!g&&(w=function(e){var n=h.body.length;if(n<2&&(e=V(e)))return e;if(f.option("inline")<3)return!1;e=null;for(var t=0;t<n;t++){var r=h.body[t];if(r instanceof AST_Var){var i=x||!ee(r);if(i&&(x=!0,e))return!1}else if(!(r instanceof AST_AsyncDefun||r instanceof AST_Defun||r instanceof AST_EmptyStatement)){if(e)return!1;e=r}}return V(e)}(S))&&!h.contains_this()){var E,k,D,O,C=a===h||P.single_use&&P.references.length-P.replaced==1;if(function(){if(!(y||b||x||h.rest)&&!(f.option("inline")<2&&h.argnames.length)&&h.variables.all(function(e){return e.references.length-e.replaced<2&&e.orig[0]instanceof AST_SymbolFunarg})){var r,n=f.find_parent(AST_Scope),i=!1,o=Sn(n),a=[],s=!1;if(w.walk(new TreeWalker(function(e,n){if(i)return!0;if(!(e instanceof AST_Binary&&ye[e.operator]||e instanceof AST_Conditional)){if(e instanceof AST_Scope)return i=!0;if(o&&e instanceof AST_Symbol&&o[e.name])return i=!0;if(e instanceof AST_SymbolRef){var t=e.definition();if(h.variables.get(e.name)!==t)return void(a=null);if(t.init instanceof AST_LambdaDefinition)return i=!0;if(is_lhs(e,this.parent()))return i=!0;t=M(t);return(r<t||(r=t),a)?void(s?a=null:a.push(h.argnames[t])):void 0}return e.has_side_effects(f)?(n(),s=!0):void 0}a=null})),!i){var e=l.args.length;if(a&&h.argnames.length>=e){for(e=h.argnames.length;e-- >r&&h.argnames[e]===a.pop(););e++}return e<=r||all(l.args.slice(r,e),s&&!a?function(e){return e.is_constant_expression(n)}:function(e){return!e.has_side_effects(f)})}}}()){var N=l.args.slice(),F=[],S=w.clone(!0).transform(new TreeTransformer(function(e){if(e instanceof AST_SymbolRef){var n=e.definition();if(h.variables.get(e.name)!==n)return F.push(e),e;var t=M(n),n=N[t];if(!n)return de(AST_Undefined,l);N[t]=null;t=this.parent();return t?Ae(0,t,e,n):n}})),P=h.inlined;a!==h&&(h.inlined=!0);var R=[];N.forEach(function(e){e&&((e=e.clone(!0)).walk(new TreeWalker(function(e){e instanceof AST_SymbolRef&&F.push(e)})),R.push(e))},[]),R.push(S);var B=K(l,R).optimize(f);if(h.inlined=P,B=Ae(0,m,v,B),C||ne(B,l)===B)return F.forEach(function(e){e.scope=a===h?h.parent_scope:a.scope,e.reference();e=e.definition();C&&e.replaced++,e.single_use=!1}),B;B.has_side_effects(f)||(l.drop_side_effect_free=function(e,n){var t=this.args.slice();return t.unshift(this.expression),K(this,t).drop_side_effect_free(e,n)})}if(C&&function(){var e,n=Object.create(null),t=0;O=v;do{if(O.variables&&O.variables.each(function(e){n[e.name]=!0}),e=O,(O=f.parent(t++))instanceof AST_DWLoop)D=[];else if(O instanceof AST_For)O.init!==e&&(D=[]);else if(O instanceof AST_ForEnumeration)O.init!==e&&O.object!==e&&(D=[]);else if(O instanceof AST_SymbolRef&&O.fixed_value()instanceof AST_Scope)return!1}while(!(O instanceof AST_Scope));if(!(k=O.body.indexOf(e)+1))return!1;if(!U(h,O))return!1;var r=a!==h||h.parent_scope.resolve()===O;O instanceof AST_Toplevel&&(f.toplevel.vars?n.arguments=!0:r=!1);var i=f.option("inline");if(E=Object.create(n),!function(n,t,r){var i=!1;return h.each_argname(function(e){if(!i&&!e.__unused){if(!r||z(n,e.name))return i=!0;t[e.name]=!0,D&&D.push(e.definition())}}),!i}(n,E,2<=i&&r))return!1;var o=Object.create(E);return!!function(n,e,t){for(var r=0;r<h.body.length;r++){var i=h.body[r];if(i instanceof AST_LambdaDefinition){if(!t||z(e,i.name.name))return!1;if(!all(i.enclosed,function(e){return e.scope===i||!n[e.name]}))return!1;D&&D.push(i.name.definition())}else if(i instanceof AST_Var){if(!t)return!1;for(var o=i.definitions.length;0<=--o;){var a=i.definitions[o].name;if(z(n,a.name))return!1;D&&D.push(a.definition())}}}return!0}(n,o,3<=i&&r)&&(!D||0==D.length||!Dn(h,D))}()){h._squeezed=!0,a!==h&&(h.parent_scope=a.scope);B=K(l,function(){var e=[],n=[];(1<y||b||h.rest?function(r,i){function n(e,n){var t=n.definition();t.references.push(e);n=de(AST_SymbolVar,n,n);t.orig.push(n),H(r,i,n)}i.push(de(AST_Assign,l,{operator:"=",left:de(AST_DestructuredArray,l,{elements:h.argnames.map(function(e){return e.__unused?de(AST_Hole,e):e.convert_symbol(AST_SymbolRef,n)}),rest:h.rest&&h.rest.convert_symbol(AST_SymbolRef,n)}),right:de(AST_Array,l,{elements:l.args.slice()})}))}:function(e,n){for(var t=h.argnames.length,r=l.args.length;--r>=t;)n.push(l.args[r]);var i,o=[];for(r=t;0<=--r;){var a=h.argnames[r];i=a instanceof AST_DefaultValue?(o.push(a),a.name):a;var s,f=l.args[r];i.__unused||O.var_names()[i.name]?f&&n.push(f):(s=de(AST_SymbolVar,i,i),i.definition().orig.push(s),"__unused"in i?(H(e,n,s),f&&n.push(f)):(!f&&D&&a===i&&(f=de(AST_Undefined,l)),H(e,n,s,f)))}for(e.reverse(),n.reverse(),r=o.length;0<=--r;){var c,u=o[r];"__unused"in u.name?n.push(u.value):(c=de(AST_SymbolRef,u.name,u.name),u.name.definition().references.push(c),n.push(de(AST_Assign,u,{operator:"=",left:c,right:u.value})))}})(e,n);var t=function(e,n){for(var t=[k,0],r=[],i=[],o=[],a=0;a<h.body.length;a++){var s=h.body[a];if(s instanceof AST_LambdaDefinition)D?((_=de(AST_SymbolVar,s.name,W(s.name))).definition().orig.push(_),H(e,n,_,Me(s,!0))):(c=s.name.definition(),O.functions.set(c.name,c),O.variables.set(c.name,c),O.enclosed.push(c),O.var_names()[c.name]=!0,t.push(s));else if(s instanceof AST_Var)for(var f=0;f<s.definitions.length;f++){var c,u,l=s.definitions[f],_=W(l.name);H(r,i,_,l.value),D&&!HOP(E,_.name)&&(c=h.variables.get(_.name),u=de(AST_SymbolRef,_,_),c.references.push(u),o.push(de(AST_Assign,l,{operator:"=",left:u,right:de(AST_Undefined,_)})))}}return[].push.apply(e,r),[].push.apply(n,o),[].push.apply(n,i),t}(e,n);n.push(w),e.length&&t.push(de(AST_Var,h,{definitions:e}));return[].splice.apply(O.body,t),h.enclosed.forEach(function(e){O.var_names()[e.name]||(O.enclosed.push(e),O.var_names()[e.name]=!0)}),n}()).optimize(f);return Ae(0,m,v,B)}}if(f.option("side_effects")&&p&&all(h.body,Q)&&(h===a?Ge(h,f):!y&&!b&&!h.rest)&&(!is_arrow(h)||!h.value)&&U(h,f.find_parent(AST_Scope)))return K(l,I()).optimize(f)}if(f.option("drop_console")&&a instanceof AST_PropAccess){for(var L=a.expression;L.expression;)L=L.expression;if(he(L)&&"console"==L.name)return de(AST_Undefined,l).optimize(f)}return f.option("negate_iife")&&m instanceof AST_SimpleStatement&&Z(v)?l.negate(f,!0):ae(f,l);function j(e){var n=!1;return e.walk(new TreeWalker(function(e){return!!n||(e instanceof AST_SymbolRef&&h.variables.get(e.name)===e.definition()?n=!0:void 0)})),n}function q(e){return de(AST_Dot,e,{expression:de(AST_Array,e,{elements:[]}),property:"e"})}function I(e){var a,t,n=l.args.slice(),r=1<y||b||h.rest;return(r||g)&&(n=[de(AST_Array,l,{elements:n})]),r?(a=new TreeTransformer(function(r,e){if(r instanceof AST_DefaultValue)return de(AST_DefaultValue,r,{name:r.name.transform(a)||q(r),value:r.value});if(r instanceof AST_DestructuredArray){var t=[];return r.elements.forEach(function(e,n){(e=e.transform(a))&&(t[n]=e)}),$e(r,t),de(AST_DestructuredArray,r,{elements:t})}if(r instanceof AST_DestructuredObject){var i=[],o=[];return r.properties.forEach(function(e){var n=e.key,t=e.value.transform(a);t?(o.length&&(n instanceof AST_Node||(n=X(n,e)),o.push(n),n=K(r,o),o=[]),i.push(de(AST_DestructuredKeyVal,e,{key:n,value:t}))):n instanceof AST_Node&&o.push(n)}),o.length&&i.push(de(AST_DestructuredKeyVal,r,{key:K(r,o),value:q(r)})),de(AST_DestructuredObject,r,{properties:i})}return r instanceof AST_SymbolFunarg?null:void 0}),t=[],h.argnames.forEach(function(e,n){(e=e.transform(a))&&(t[n]=e)}),(r=h.rest&&h.rest.transform(a))&&(t.length=h.argnames.length),$e(h,t),n[0]=de(AST_Assign,l,{operator:"=",left:de(AST_DestructuredArray,h,{elements:t,rest:r}),right:n[0]})):h.argnames.forEach(function(e){e instanceof AST_DefaultValue&&n.push(e.value)}),n.push(e||de(AST_Undefined,l)),n}function U(e,n){var t=Sn(n);if(!t)return 1;var r=!0,i=new TreeWalker(function(e){if(!r)return!0;if(e instanceof AST_Scope){if(e===h)return;if(is_arrow(e))for(var n=0;r&&n<e.argnames.length;n++)e.argnames[n].walk(i);else e instanceof AST_LambdaDefinition&&t[e.name.name]&&(r=!1);return!0}e instanceof AST_Symbol&&t[e.name]&&e!==h.name&&(r=!1)});return e.walk(i),r}function $(){return l.call_only?de(AST_Number,l,{value:0}):de(AST_Undefined,l)}function V(e){return e?e instanceof AST_Return?e.value||$():e instanceof AST_SimpleStatement?l.call_only?e.body:de(AST_UnaryPrefix,e,{operator:"void",expression:e.body}):void 0:$()}function M(e){for(var n=h.argnames.length;0<=--n;)if(h.argnames[n].definition()===e)return n}function z(e,n){return e[n]||G[n]||O.var_names()[n]}function H(e,n,t,r){var i=t.definition();O.var_names()[t.name]||(O.var_names()[t.name]=!0,e.push(de(AST_VarDef,t,{name:t,value:null}))),O.variables.set(t.name,i),O.enclosed.push(i),r&&(t=de(AST_SymbolRef,t,t),i.references.push(t),n.push(de(AST_Assign,l,{operator:"=",left:t,right:r})))}function W(e){var n=e.definition().redefined();return n&&((e=e.clone()).thedef=n),e}}),e(AST_New,function(e,n){if(n.option("sequences")){var t=_n(e);if(t!==e)return t.optimize(n)}if(n.option("unused")&&pn(e,n),n.option("unsafe")){t=e.expression;if(he(t))switch(t.name){case"Object":case"RegExp":case"Function":case"Error":case"Array":return de(AST_Call,e,e).transform(n)}}return e}),e(AST_Sequence,function(e,o){var a=function(){if(!o.option("side_effects"))return e.expressions;var t=[],r=first_in_statement(o),i=e.expressions.length-1;return e.expressions.forEach(function(e,n){(e=n<i?e.drop_side_effect_free(o,r):e)&&(F(t,e),r=!1)}),t}(),s=a.length-1;return function(){for(var e=1;e<s;e++){var n=a[e-1],t=f(n);if(t){var r=a[e];if(o.option("conditionals")){var i=dn(o,t,n.right,r);if(i){n.right=i,a.splice(e--,1),s--;continue}}o.option("dead_code")&&f(r)===t&&r.right.is_constant_expression(t.scope.resolve())&&(a[--e]=n.right)}}}(),function(){if(o.option("side_effects")){for(;0<s&&ve(a[s],o);)s--;s<a.length-1&&(a[s]=de(AST_UnaryPrefix,e,{operator:"void",expression:a[s]}),a.length=s+1)}}(),0==s?(e=Ae(0,o.parent(),o.self(),a[0]))instanceof AST_Sequence?e:e.optimize(o):(e.expressions=a,e);function f(e){return e instanceof AST_Assign&&"="==e.operator&&e.left instanceof AST_SymbolRef&&e.left.definition()}}),e(AST_UnaryPostfix,function(e,n){if(n.option("sequences")){var t=_n(e);if(t!==e)return t.optimize(n)}return ae(n,e)});var An=makePredicate("+ -"),Tn=makePredicate("* / %");e(AST_UnaryPrefix,function(e,n){var t=e.operator,r=e.expression;if(n.option("evaluate")&&"delete"==t&&!a(r))return K(e,[r,de(AST_True,e)]).optimize(n);if(n.option("sequences")&&function(){switch(t){case"delete":return!a(r.tail_node());case"typeof":return!he(r.tail_node());default:return!0}}()){var i=_n(e);if(i!==e)return i.optimize(n)}if(n.option("side_effects")&&"void"==t)return(r=r.drop_side_effect_free(n))?(e.expression=r,e):de(AST_Undefined,e).optimize(n);if(n.option("booleans")){if("!"==t&&r.is_truthy())return K(e,[r,de(AST_False,e)]).optimize(n);if(n.in_boolean_context())switch(t){case"!":if(r instanceof AST_UnaryPrefix&&"!"==r.operator)return r.expression;r instanceof AST_Binary&&(e=te(n,e,r.negate(n,first_in_statement(n))));break;case"typeof":AST_Node.warn("Boolean expression always true [{file}:{line},{col}]",e.start);var o=[de(AST_True,e)];return r instanceof AST_SymbolRef&&_e(r,n)||o.unshift(r),K(e,o).optimize(n)}}return"-"==t&&r instanceof AST_Infinity&&(r=r.transform(n)),n.option("evaluate")&&r instanceof AST_Binary&&An[t]&&Tn[r.operator]&&(r.left.is_constant()||!r.right.has_side_effects(n))?de(AST_Binary,e,{operator:r.operator,left:de(AST_UnaryPrefix,r.left,{operator:t,expression:r.left}),right:r.right}):"-"==t&&(r instanceof AST_Number||r instanceof AST_Infinity)?e:ae(n,e);function a(e){return e instanceof AST_Infinity||e instanceof AST_NaN||e instanceof AST_NewTarget||e instanceof AST_PropAccess||e instanceof AST_SymbolRef||e instanceof AST_Undefined}}),e(AST_Await,function(e,n){if(!n.option("awaits"))return e;if(n.option("sequences")){var t=_n(e);if(t!==e)return t.optimize(n)}if(n.option("side_effects")){var r=e.expression;if(r instanceof AST_Await)return r.optimize(n);if(r instanceof AST_UnaryPrefix){if(r.expression instanceof AST_Await)return r.optimize(n);if("void"==r.operator)return de(AST_UnaryPrefix,e,{operator:"void",expression:de(AST_Await,e,{expression:r.expression})}).optimize(n)}for(var i,o=0,a=e;i=n.parent(o++);a=i){if(is_arrow(i)){if(i.value===a)return r.optimize(n)}else if(i instanceof AST_Return){var s=!0;do{if(a=i,(i=n.parent(o++))instanceof AST_Try&&(i.bfinally||i.bcatch)!==a){s=!1;break}}while(i&&!(i instanceof AST_Scope));if(s)return r.optimize(n)}else if(i instanceof AST_Sequence&&i.tail_node()===a)continue;break}}return e}),e(AST_Yield,function(e,n){if(!n.option("yields"))return e;if(n.option("sequences")){var t=_n(e);if(t!==e)return t.optimize(n)}t=e.expression;if(e.nested&&"Call"==t.TYPE){n=t.clone().optimize(n);if("Call"!=n.TYPE)return n}return e}),AST_Binary.DEFMETHOD("lift_sequences",function(e){if(this.left instanceof AST_PropAccess){if(!(this.left.expression instanceof AST_Sequence))return this;var n=this.left.expression.expressions.slice();return(t=this.clone()).left=t.left.clone(),t.left.expression=n.pop(),n.push(t),K(this,n)}if(this.left instanceof AST_Sequence){n=this.left.expressions.slice();return(t=this.clone()).left=n.pop(),n.push(t),K(this,n)}if(this.right instanceof AST_Sequence){if(this.left.has_side_effects(e))return this;for(var t,r="="==this.operator&&this.left instanceof AST_SymbolRef,i=(n=this.right.expressions).length-1,o=0;o<i&&(r||!n[o].has_side_effects(e));o++);if(o==i)return n=n.slice(),(t=this.clone()).right=n.pop(),n.push(t),K(this,n);if(0<o)return(t=this.clone()).right=K(this.right,n.slice(o)),(n=n.slice(0,o)).push(t),K(this,n)}return this});var hn=makePredicate("indexOf lastIndexOf"),mn=makePredicate("== === != !== * & | ^");function vn(e){return e instanceof AST_Assign?"="==e.operator&&vn(e.right):e instanceof AST_Sequence?vn(e.tail_node()):e instanceof AST_SymbolRef?vn(e.fixed_value()):e instanceof AST_Array||e instanceof AST_Class||e instanceof AST_Lambda||e instanceof AST_New||e instanceof AST_Object}function yn(e,n){if(n.is_constant())return!0;if(n instanceof AST_Assign)return"="!=n.operator||yn(e,n.right);if(n instanceof AST_Binary)return!ye[n.operator]||yn(e,n.left)&&yn(e,n.right);if(n instanceof AST_Conditional)return yn(e,n.consequent)&&yn(e,n.alternative);if(n instanceof AST_Sequence)return yn(e,n.tail_node());if(n instanceof AST_SymbolRef){var t=n.fixed_value();return t&&yn(e,t)}return n instanceof AST_Template?!n.tag||xn(e,n.tag):n instanceof AST_Unary||void 0}function bn(e,n){return n instanceof AST_Dot?bn(e,n.expression):n instanceof AST_Sub?bn(e,n.expression)&&bn(e,n.property):n instanceof AST_Symbol||!n.has_side_effects(e)}function gn(e,n,t){var r=0,i=e.self();do{if(i===t)return i;if(O(i)&&i.name&&i.name.definition()===n)return i}while(i=e.parent(r++))}function wn(e){var n=e.scope.resolve();return all(e.references,function(e){return n===e.scope.resolve()})}function xn(e,n){return e.option("unsafe")&&n instanceof AST_Dot&&"raw"==n.property&&he(n.expression)&&"String"==n.expression.name}function En(e){var t=!1;if(e=e.replace(/\\(u\{[^{}]*\}?|u[\s\S]{0,4}|x[\s\S]{0,2}|[0-9]+|[\s\S])/g,function(e,n){n=decode_escape_sequence(n);if("string"==typeof n)return n;t=!0}),!t)return e}function kn(e,n){return e instanceof AST_SymbolRef||e.TYPE===n.TYPE}function Dn(t,n){var r=!1,i=new TreeWalker(function(e){return!!r||(e instanceof AST_SymbolRef&&member(e.definition(),n)?r=!0:void 0)}),o=new TreeWalker(function(e){if(r)return!0;if(e instanceof AST_Lambda&&e!==t){if(!(e.name||is_async(e)||is_generator(e))){var n=o.parent();if(n instanceof AST_Call&&n.expression===e)return}return e.walk(i),!0}});return t.walk(o),r}e(AST_Binary,function(t,a){function n(){return t.left.is_constant()||t.right.is_constant()||!t.left.has_side_effects(a)&&!t.right.has_side_effects(a)}function e(e){n()&&(e&&(t.operator=e),e=t.left,t.left=t.right,t.right=e)}function r(){var e=t.right;t.left=de(AST_Binary,t,{operator:t.operator,left:t.left,right:e.left,start:t.left.start,end:e.left.end}),t.right=e.right,t.left=t.left.transform(a)}if(!mn[t.operator]||!t.right.is_constant()||t.left.is_constant()||t.left instanceof AST_Binary&&PRECEDENCE[t.left.operator]>=PRECEDENCE[t.operator]||e(),a.option("sequences")){var i=t.lift_sequences(a);if(i!==t)return i.optimize(a)}if(a.option("assignments")&&ye[t.operator]){var o=t.right;if(t.left instanceof AST_SymbolRef&&o instanceof AST_Assign&&"="==o.operator&&t.left.equivalent_to(o.left))return t.right=o.right,o.right=t,o}if(a.option("comparisons"))switch(t.operator){case"===":case"!==":if(ve(t.left,a)&&t.right.is_defined(a))return AST_Node.warn("Expression always defined [{file}:{line},{col}]",t.start),K(t,[t.right,de("==="==t.operator?AST_False:AST_True,t)]).optimize(a);var s=!0;(t.left.is_string(a)&&t.right.is_string(a)||t.left.is_number(a)&&t.right.is_number(a)||t.left.is_boolean(a)&&t.right.is_boolean(a)||bn(a,t.left)&&t.left.equivalent_to(t.right))&&(t.operator=t.operator.slice(0,2));case"==":case"!=":if(!s&&ve(t.left,a))t.left=de(AST_Null,t.left);else if(a.option("typeofs")&&t.left instanceof AST_String&&"undefined"==t.left.value&&t.right instanceof AST_UnaryPrefix&&"typeof"==t.right.operator){var f=t.right.expression;(f instanceof AST_SymbolRef?!f.is_declared(a):f instanceof AST_PropAccess&&a.option("ie"))||(t.right=f,t.left=de(AST_Undefined,t.left).optimize(a),2==t.operator.length&&(t.operator+="="))}else if(t.left instanceof AST_SymbolRef&&t.right instanceof AST_SymbolRef&&t.left.definition()===t.right.definition()&&vn(t.left))return de("="==t.operator[0]?AST_True:AST_False,t).optimize(a);break;case"&&":case"||":if((_=(_=t.left).operator==t.operator?_.right:_)instanceof AST_Binary&&_.operator==("&&"==t.operator?"!==":"===")&&t.right instanceof AST_Binary&&_.operator==t.right.operator&&(ve(_.left,a)&&t.right.left instanceof AST_Null||_.left instanceof AST_Null&&ve(t.right.left,a))&&!_.right.has_side_effects(a)&&_.right.equivalent_to(t.right.right)){f=de(AST_Binary,t,{operator:_.operator.slice(0,-1),left:de(AST_Null,t),right:_.right});return f=_!==t.left?de(AST_Binary,t,{operator:t.operator,left:t.left.left,right:f}):f}}var c,u=!1,l=a.parent();if(a.option("booleans")){var _=t.left;if(ye[t.operator]&&!_.has_side_effects(a)){if(_.equivalent_to(t.right))return Ae(0,l,a.self(),_).optimize(a);rn(a,_)}u=a.in_boolean_context()}if(u)switch(t.operator){case"+":var p=t.left.evaluate(a),S=t.right.evaluate(a);if(p&&"string"==typeof p)return AST_Node.warn("+ in boolean context always true [{file}:{line},{col}]",t.start),K(t,[t.right,de(AST_True,t)]).optimize(a);if(S&&"string"==typeof S)return AST_Node.warn("+ in boolean context always true [{file}:{line},{col}]",t.start),K(t,[t.left,de(AST_True,t)]).optimize(a);break;case"==":if(t.left instanceof AST_String&&""==t.left.value&&t.right.is_string(a))return de(AST_UnaryPrefix,t,{operator:"!",expression:t.right}).optimize(a);break;case"!=":if(t.left instanceof AST_String&&""==t.left.value&&t.right.is_string(a))return t.right.optimize(a)}if(a.option("comparisons")&&t.is_boolean(a)){if(!(l instanceof AST_Binary)||l instanceof AST_Assign){o=te(a,t,de(AST_UnaryPrefix,t,{operator:"!",expression:t.negate(a,first_in_statement(a))}));if(o!==t)return o}switch(t.operator){case">":e("<");break;case">=":e("<=")}}if(a.option("conditionals")&&ye[t.operator]&&t.right instanceof AST_Binary&&t.operator==t.right.operator&&r(),a.option("strings")&&"+"==t.operator){if(t.right instanceof AST_String&&""==t.right.value&&t.left.is_string(a))return t.left.optimize(a);if(t.left instanceof AST_String&&""==t.left.value&&t.right.is_string(a))return t.right.optimize(a);if(t.left instanceof AST_Binary&&"+"==t.left.operator&&t.left.left instanceof AST_String&&""==t.left.left.value&&t.right.is_string(a)&&(t.left.right.is_constant()||!t.right.has_side_effects(a)))return t.left=t.left.right,t.optimize(a);t.right instanceof AST_Binary&&t.operator==t.right.operator&&(t.left.is_string(a)&&t.right.is_string(a)||t.right.left.is_string(a)&&(t.left.is_constant()||!t.right.right.has_side_effects(a)))&&r()}if(a.option("evaluate")){var d,A=!0;switch(t.operator){case"&&":if(!(p=tn(a,t.left)))return AST_Node.warn("Condition left of && always false [{file}:{line},{col}]",t.start),Ae(0,l,a.self(),t.left).optimize(a);if(!(p instanceof AST_Node))return AST_Node.warn("Condition left of && always true [{file}:{line},{col}]",t.start),K(t,[t.left,t.right]).optimize(a);if(S=t.right.evaluate(a)){if(!(S instanceof AST_Node)&&(u||"&&"==l.operator&&l.left===a.self()))return AST_Node.warn("Dropping side-effect-free && [{file}:{line},{col}]",t.start),t.left.optimize(a)}else{if(u)return AST_Node.warn("Boolean && always false [{file}:{line},{col}]",t.start),K(t,[t.left,de(AST_False,t)]).optimize(a);t.falsy=!0}if("||"==t.left.operator)if(!(h=tn(a,t.left.right)))return de(AST_Conditional,t,{condition:t.left.left,consequent:t.right,alternative:t.left.right}).optimize(a);break;case"??":var T=!0;case"||":var h,p=tn(a,t.left,T);if(T?null==p:!p)return AST_Node.warn("Condition left of {operator} always {value} [{file}:{line},{col}]",{operator:t.operator,value:T?"nulish":"false",file:t.start.file,line:t.start.line,col:t.start.col}),K(t,[t.left,t.right]).optimize(a);if(!(p instanceof AST_Node))return AST_Node.warn("Condition left of {operator} always {value} [{file}:{line},{col}]",{operator:t.operator,value:T?"defined":"true",file:t.start.file,line:t.start.line,col:t.start.col}),Ae(0,l,a.self(),t.left).optimize(a);if(S=t.right.evaluate(a)){if(!(T||S instanceof AST_Node)){if(u)return AST_Node.warn("Boolean || always true [{file}:{line},{col}]",t.start),K(t,[t.left,de(AST_True,t)]).optimize(a);t.truthy=!0}}else if(u||"||"==l.operator&&l.left===a.self())return AST_Node.warn("Dropping side-effect-free {operator} [{file}:{line},{col}]",{operator:t.operator,file:t.start.file,line:t.start.line,col:t.start.col}),t.left.optimize(a);if(!T&&"&&"==t.left.operator)if((h=tn(a,t.left.right))&&!(h instanceof AST_Node))return de(AST_Conditional,t,{condition:t.left.left,consequent:t.left.right,alternative:t.right}).optimize(a);break;case"+":if((t=(t=t.left instanceof AST_Constant&&t.right instanceof AST_Binary&&"+"==t.right.operator&&t.right.left instanceof AST_Constant&&t.right.is_string(a)?de(AST_Binary,t,{operator:"+",left:de(AST_String,t.left,{value:""+t.left.value+t.right.left.value,start:t.left.start,end:t.right.left.end}),right:t.right.right}):t).right instanceof AST_Constant&&t.left instanceof AST_Binary&&"+"==t.left.operator&&t.left.right instanceof AST_Constant&&t.left.is_string(a)?de(AST_Binary,t,{operator:"+",left:t.left.left,right:de(AST_String,t.right,{value:""+t.left.right.value+t.right.value,start:t.left.right.start,end:t.right.end})}):t).right instanceof AST_UnaryPrefix&&"-"==t.right.operator&&t.left.is_number(a)){t=de(AST_Binary,t,{operator:"-",left:t.left,right:t.right.expression});break}if(t.left instanceof AST_UnaryPrefix&&"-"==t.left.operator&&n()&&t.right.is_number(a)){t=de(AST_Binary,t,{operator:"-",left:t.right,right:t.left.expression});break}if(a.option("unsafe_math")&&t.left instanceof AST_Binary&&PRECEDENCE[t.left.operator]==PRECEDENCE[t.operator]&&t.right.is_constant()&&(t.right.is_boolean(a)||t.right.is_number(a))&&t.left.is_number(a)&&!t.left.right.is_constant()&&(t.left.left.is_boolean(a)||t.left.left.is_number(a))){t=de(AST_Binary,t,{operator:t.left.operator,left:de(AST_Binary,t,{operator:t.operator,left:t.right,right:t.left.left}),right:t.left.right});break}case"-":if(t.right instanceof AST_UnaryPrefix&&"-"==t.right.operator&&t.left.is_number(a)&&t.right.expression.is_number(a)){t=de(AST_Binary,t,{operator:"+",left:t.left,right:t.right.expression});break}case"*":case"/":A=a.option("unsafe_math"),"+"!=t.operator&&["left","right"].forEach(function(e){var n=t[e];n instanceof AST_UnaryPrefix&&"+"==n.operator&&(((n=n.expression).is_boolean(a)||n.is_number(a)||n.is_string(a))&&(t[e]=n))});case"&":case"|":case"^":if("-"==t.operator||"/"==t.operator||!t.left.is_boolean(a)&&!t.left.is_number(a)||!t.right.is_boolean(a)&&!t.right.is_number(a)||!n()||t.left instanceof AST_Binary&&t.left.operator!=t.operator&&PRECEDENCE[t.left.operator]>=PRECEDENCE[t.operator]||(h=de(AST_Binary,t,{operator:t.operator,left:t.right,right:t.left}),t=t.right instanceof AST_Constant&&!(t.left instanceof AST_Constant)?te(a,h,t):te(a,t,h)),!A||!t.is_number(a))break;!(t.right instanceof AST_Binary&&"%"!=t.right.operator&&PRECEDENCE[t.right.operator]==PRECEDENCE[t.operator]&&t.right.is_number(a)&&("+"!=t.operator||t.right.left.is_boolean(a)||t.right.left.is_number(a)))||"-"==t.operator&&t.left.is_negative_zero()||!t.right.left.is_constant_expression()&&t.right.right.has_side_effects(a)||(d=t.right.right,c=!1,d.walk(new TreeWalker(function(e){if(c)return!0;if(e instanceof AST_Assign){if(e.left instanceof AST_PropAccess)return c=!0}else if(e instanceof AST_Unary&&unary_side_effects[e.operator]&&e.expression instanceof AST_PropAccess)return c=!0})),c)||"+"!=(t=de(AST_Binary,t,{operator:b(t.operator,t.right.operator),left:de(AST_Binary,t.left,{operator:t.operator,left:t.left,right:t.right.left,start:t.left.start,end:t.right.left.end}),right:t.right.right})).operator||t.right.is_boolean(a)||t.right.is_number(a)||(t.right=de(AST_UnaryPrefix,t.right,{operator:"+",expression:t.right})),t.right instanceof AST_Constant&&t.left instanceof AST_Binary&&"%"!=t.left.operator&&PRECEDENCE[t.left.operator]==PRECEDENCE[t.operator]&&t.left.is_number(a)&&(t.left.left instanceof AST_Constant?(_=g(t.left,t.operator,t.left.left,t.right,t.left.left.start,t.right.end),t=g(t,t.left.operator,ae(a,_),t.left.right)):t.left.right instanceof AST_Constant&&(d=b(t.left.operator,t.operator),!(d=ae(a,g(t.left,d,t.left.right,t.right))).is_constant()||"-"==t.left.operator&&0!=t.right.value&&0==+d.value&&t.left.left.is_negative_zero()||(t=g(t,t.left.operator,t.left.left,d))))}if(!(l instanceof AST_UnaryPrefix&&"delete"==l.operator)){if(t.left instanceof AST_Number&&!t.right.is_constant())switch(t.operator){case"+":if(0==t.left.value){if(t.right.is_boolean(a))return de(AST_UnaryPrefix,t,{operator:"+",expression:t.right}).optimize(a);if(t.right.is_number(a)&&!t.right.is_negative_zero())return t.right}break;case"*":if(1==t.left.value)return t.right.is_number(a)?t.right:de(AST_UnaryPrefix,t,{operator:"+",expression:t.right}).optimize(a)}if(t.right instanceof AST_Number&&!t.left.is_constant())switch(t.operator){case"+":if(0==t.right.value){if(t.left.is_boolean(a))return de(AST_UnaryPrefix,t,{operator:"+",expression:t.left}).optimize(a);if(t.left.is_number(a)&&!t.left.is_negative_zero())return t.left}break;case"-":if(0==t.right.value)return t.left.is_number(a)?t.left:de(AST_UnaryPrefix,t,{operator:"+",expression:t.left}).optimize(a);break;case"/":if(1==t.right.value)return t.left.is_number(a)?t.left:de(AST_UnaryPrefix,t,{operator:"+",expression:t.left}).optimize(a)}}}if(a.option("typeofs"))switch(t.operator){case"&&":nn(t.left,t.right,null);break;case"||":nn(t.left,null,t.right)}if(a.option("unsafe")){var m=w(t.right);if(u&&m&&("=="==t.operator||"!="==t.operator)&&t.left instanceof AST_Number&&0==t.left.value)return("=="==t.operator?de(AST_UnaryPrefix,t,{operator:"!",expression:t.right}):t.right).optimize(a);var v=w(t.left);if(a.option("comparisons")&&function(){switch(t.operator){case"<=":return m&&t.left instanceof AST_Number&&0==t.left.value;case"<":if(v&&t.right instanceof AST_Number&&0==t.right.value)return!0;case"==":case"!=":return m?t.left instanceof AST_Number&&-1==t.left.value||t.left instanceof AST_UnaryPrefix&&"-"==t.left.operator&&t.left.expression instanceof AST_Number&&1==t.left.expression.value:!1}}()){var y=de(AST_UnaryPrefix,t,{operator:"!",expression:de(AST_UnaryPrefix,t,{operator:"~",expression:v?t.left:t.right})});switch(t.operator){case"<":if(v)break;case"<=":case"!=":y=de(AST_UnaryPrefix,t,{operator:"!",expression:y})}return y.optimize(a)}}return ae(a,t);function b(e,n){switch(e){case"-":return"+"==n?"-":"+";case"/":return"*"==n?"/":"*";default:return n}}function g(e,n,t,r,i,o){return"+"==n&&(t.is_boolean(a)||t.is_number(a)||(t=de(AST_UnaryPrefix,t,{operator:"+",expression:t})),r.is_boolean(a)||r.is_number(a)||(r=de(AST_UnaryPrefix,r,{operator:"+",expression:r}))),de(AST_Binary,e,{operator:n,left:t,right:r,start:i,end:o})}function w(e){return"Call"==e.TYPE&&e.expression instanceof AST_Dot&&hn[e.expression.property]}}),e(AST_SymbolExport,function(e){return e}),e(AST_SymbolRef,function(e,n){if(!n.option("ie")&&he(e)&&(!e.scope.resolve().uses_with||!n.find_parent(AST_With)))switch(e.name){case"undefined":return de(AST_Undefined,e).optimize(n);case"NaN":return de(AST_NaN,e).optimize(n);case"Infinity":return de(AST_Infinity,e).optimize(n)}var t=n.parent();if(n.option("reduce_vars")&&is_lhs(n.self(),t)!==n.self()){var r,i,o,a,s=e.definition(),f=e.fixed_value(),t=s.single_use&&!(t instanceof AST_Call&&t.is_expr_pure(n));if(t)if(O(f)){if(s.scope===e.scope.resolve()&&!s.in_loop||n.option("reduce_funcs")&&1!=s.escaped.depth&&!f.inlined)if(gn(n,s,f))t=!1;else if(f.name&&f.name.definition()!==s)t=!1;else if(f.parent_scope!==e.scope||le(s)){if("f"==(t=f.is_constant_expression(e.scope)))for(var c=e.scope;(c instanceof AST_LambdaDefinition||c instanceof AST_LambdaExpression)&&(c.inlined=!0),c=c.parent_scope;);}else(f.name&&("await"==f.name.name&&is_async(f)||"yield"==f.name.name&&is_generator(f))||f.has_side_effects(n)||n.option("ie")&&f instanceof AST_Class)&&(t=!1);else t=!1;t&&(f.parent_scope=e.scope)}else(!f||0<s.recursive_refs||!f.is_constant_expression()||f.drop_side_effect_free(n))&&(t=!1);if(t)return s.single_use=!1,f._squeezed=!0,f.single_use=!0,O(f=(f=f instanceof AST_DefClass?Ve(f):f)instanceof AST_LambdaDefinition?Me(f):f)&&(c=e.scope.resolve(),f.enclosed.forEach(function(e){f.variables.has(e.name)||c.var_names()[e.name]||(c.enclosed.push(e),c.var_names()[e.name]=!0)})),0<s.recursive_refs?(r=(p=f.clone(!0)).name.definition(),i=p.variables.get(p.name.name),o=i&&i.orig[0],l=p instanceof AST_Class?(a="def_function",AST_SymbolClass):(a="def_variable",AST_SymbolLambda),o instanceof l||(((o=de(l,p.name,p.name)).scope=p).name=o,(i=p[a](o)).recursive_refs=s.recursive_refs),p.walk(new TreeWalker(function(e){var n,t;e instanceof AST_SymbolDeclaration?e!==o&&((n=e.definition()).orig.push(e),n.eliminated++):e instanceof AST_SymbolRef&&((n=e.definition())===r?e.thedef=n=i:(n.single_use=!1,O(t=e.fixed_value())&&t.name&&t.name.definition()===n&&n.scope===t.name.scope&&f.variables.get(t.name.name)===n&&(t.name=t.name.clone(),e.thedef=n=p.variables.get(t.name.name)||p[a](t.name))),n.references.push(e))}))):(f instanceof AST_Scope?(n.push(f),p=f.optimize(n),n.pop()):p=f.optimize(n),p=p.transform(new TreeTransformer(function(e,n){return e instanceof AST_Scope||n(e=e.clone(),this),e}))),s.replaced++,p;var u,l,_,p,t=e.fixed!==s.fixed;if(f&&(t||!1!==s.should_replace))if(f instanceof AST_This?!le(s)&&wn(s)&&(u=f):(_=f.evaluate(n,!0))!==f&&"function"!=typeof _&&(null===_||"object"!=typeof _||n.option("unsafe_regexp")&&_ instanceof RegExp&&!s.cross_loop&&wn(s))&&(u=X(_,f)),u)if(t||void 0!==s.should_replace||(l=u.optimize(n).print_to_string().length,S(f)||(l=Math.min(l,f.print_to_string().length)),_=s.name.length,n.option("unused")&&!n.exposed(s)&&(_+=(_+2+l)/(s.references.length-s.replaced-s.assignments)),_=l-Math.floor(_),s.should_replace=_<n.eval_threshold),t||s.should_replace)return S(f)?(p=u.optimize(n))===u&&(p=p.clone(!0)):(p=ne(u.optimize(n),f))!==u&&p!==f||(p=p.clone(!0)),s.replaced++,p}return e;function S(e){var n;return e.walk(new TreeWalker(function(e){if(n=e instanceof AST_SymbolRef?!0:n)return!0})),n}}),e(AST_Template,function(e,t){if(!t.option("templates"))return e;var r=e.tag;if(!r||xn(t,r)){for(var n,i=[],o=[],a=0;a<e.strings.length;a++){var s,f=e.strings[a];if(r||(s=En(f))&&(f=p(s)),0<a){var c=e.expressions[a-1],u=function(e){var n=e.evaluate(t);if(n!==e&&!(r&&/\r|\\|`/.test(n)||(n=p(""+n)).length>e.print_to_string().length+"${}".length))return n}(c);if(u){var l,u=o[o.length-1]+u+f;if(r||typeof(l=En(u))==n){o[o.length-1]=l?p(l):u;continue}}i.push(c)}o.push(f),r||(n=typeof s)}if(!r&&1<o.length){if(""==o[o.length-1])return de(AST_Binary,e,{operator:"+",left:de(AST_Template,e,{expressions:i.slice(0,-1),strings:o.slice(0,-1),tag:r}).transform(t),right:i[i.length-1]}).optimize(t);if(""==o[0]){for(var _=de(AST_Binary,e,{operator:"+",left:de(AST_String,e,{value:""}),right:i[0]}),a=1;""==o[a]&&a<i.length;a++)_=de(AST_Binary,e,{operator:"+",left:_,right:i[a]});return te(t,e,de(AST_Binary,e,{operator:"+",left:_.transform(t),right:de(AST_Template,e,{expressions:i.slice(a),strings:o.slice(a),tag:r}).transform(t)}).optimize(t))}}e.expressions=i,e.strings=o}return ae(t,e);function p(e){return e.replace(/\r|\\|`|\${/g,function(e){return"\\"+("\r"==e?"r":e)})}}),e(AST_Undefined,function(e,n){if(n.option("unsafe_undefined")){var t=Y(n).find_variable("undefined");if(t){t=de(AST_SymbolRef,e,{name:"undefined",scope:t.scope,thedef:t});return t.is_undefined=!0,t}}n=is_lhs(n.self(),n.parent());return n&&kn(n,e)?e:de(AST_UnaryPrefix,e,{operator:"void",expression:de(AST_Number,e,{value:0})})}),e(AST_Infinity,function(e,n){var t=is_lhs(n.self(),n.parent());return(!t||!kn(t,e))&&(!n.option("keep_infinity")||t||Y(n).find_variable("Infinity"))?de(AST_Binary,e,{operator:"/",left:de(AST_Number,e,{value:1}),right:de(AST_Number,e,{value:0})}):e}),e(AST_NaN,function(e,n){var t=is_lhs(n.self(),n.parent());return(!t||!kn(t,e))&&(t||Y(n).find_variable("NaN"))?de(AST_Binary,e,{operator:"/",left:de(AST_Number,e,{value:0}),right:de(AST_Number,e,{value:0})}):e});var On=makePredicate("+ - * / % >> << >>> | ^ &"),Cn=makePredicate("* | ^ &");function Nn(e,n){if(e){var t=n.parent();return"Call"!=t.TYPE?1:t.expression!==n.self()||(!(e instanceof AST_SymbolRef)||(e=e.fixed_value()))&&(e instanceof AST_Lambda&&!e.contains_this())}}function Fn(e){return e instanceof AST_ObjectKeyVal&&"string"==typeof e.key&&!(e instanceof AST_ObjectMethod&&e.value.contains_super())}e(AST_Assign,function(o,a){if(a.option("dead_code"))if(o.left instanceof AST_PropAccess){if("="==o.operator){if(o.__drop){var e=[o.left.expression];return o.left instanceof AST_Sub&&e.push(o.left.property),e.push(o.right),K(o,e).optimize(a)}if(o.left.equivalent_to(o.right)&&!o.left.has_side_effects(a))return o.right;e=o.left.expression;if(e instanceof AST_Lambda||!a.has_directive("use strict")&&e instanceof AST_Constant&&!e.may_throw_on_access(a))return o.left instanceof AST_Dot?o.right:K(o,[o.left.property,o.right]).optimize(a)}}else if(o.left instanceof AST_SymbolRef&&_e(o.left,a)){if("="==o.operator&&o.left.equivalent_to(o.right)&&!((f=a.parent())instanceof AST_UnaryPrefix&&"delete"==f.operator))return o.right;if(o.left.is_immutable())return p();var n,t=o.left.definition(),s=t.scope.resolve(),r=s===a.find_parent(AST_Lambda),i=0,f=a.self();if(!s.uses_arguments||!le(t)||a.has_directive("use strict"))do{if(n=f,(f=a.parent(i++))instanceof AST_Assign){if(f.left instanceof AST_SymbolRef&&f.left.definition()===t){if(_(i,f))break;return p(t)}if(f.left.match_symbol(function(e){if(e instanceof AST_PropAccess)return!0}))break}else{if(f instanceof AST_Exit){if(!r)break;if(_(i,f))break;if(Dn(s,[t]))break;return p(t)}if(f instanceof AST_SimpleStatement){if(!r)break;if(Dn(s,[t]))break;do{if(u=f,(f=a.parent(i++))===s&&I(f.body,u))return p(t)}while(c=u,(u=f)instanceof AST_BlockStatement||u instanceof AST_Catch||u instanceof AST_Finally?I(u.body,c):u instanceof AST_If?u.body===c||u.alternative===c:u instanceof AST_Try?u.bfinally?u.bfinally===c:u.bcatch===c:void 0);break}if(f instanceof AST_VarDef&&f.name instanceof AST_SymbolDeclaration&&f.name.definition()===t){if(_(i,f))break;return p(t)}}}while(function(e,n){if(n instanceof AST_Binary)return n.right===e||n.right.is_constant_expression(s);if(n instanceof AST_Conditional)return n.condition!==e||n.consequent.is_constant_expression(s)&&n.alternative.is_constant_expression(s);if(n instanceof AST_Sequence){var t=n.expressions,r=t.indexOf(e);if(r<0)return!1;for(var i=t.length;--i>r;)if(!t[i].is_constant_expression(s))return!1;return!0}if(n instanceof AST_UnaryPrefix)return!0}(n,f))}var c,u;if(a.option("sequences")){var l=o.lift_sequences(a);if(l!==o)return l.optimize(a)}if(a.option("assignments")){if("="==o.operator&&o.left instanceof AST_SymbolRef&&o.right instanceof AST_Binary){if(o.right.left instanceof AST_SymbolRef&&o.right.left.name==o.left.name&&On[o.right.operator])return de(AST_Assign,o,{operator:o.right.operator+"=",left:o.left,right:o.right.right});if(o.right.right instanceof AST_SymbolRef&&o.right.right.name==o.left.name&&Cn[o.right.operator]&&!o.right.left.has_side_effects(a))return de(AST_Assign,o,{operator:o.right.operator+"=",left:o.left,right:o.right.left})}if(("-="==o.operator||"+="==o.operator&&(o.left.is_boolean(a)||o.left.is_number(a)))&&o.right instanceof AST_Number&&1==o.right.value){l=o.operator.slice(0,-1);return de(AST_UnaryPrefix,o,{operator:l+l,expression:o.left})}}return ae(a,o);function _(e,n){var t=o.right;o.right=de(AST_Null,t);var r,i=n.may_throw(a);for(o.right=t;r=a.parent(e++);n=r){if(r===s)return;if(r instanceof AST_Try){if(r.bfinally&&r.bfinally!==n)return 1;if(i&&r.bcatch&&r.bcatch!==n)return 1}}}function p(e){return e&&(e.fixed=!1),("="!=o.operator?de(AST_Binary,o,{operator:o.operator.slice(0,-1),left:o.left,right:o.right}):Ae(0,a.parent(),o,o.right)).optimize(a)}}),e(AST_Conditional,function(i,n){if(n.option("sequences")&&i.condition instanceof AST_Sequence){var e=i.condition.expressions.slice();return i.condition=e.pop(),e.push(i),K(i,e)}if(!n.option("conditionals"))return i;var o=i.condition;if(n.option("booleans")&&!o.has_side_effects(n)&&rn(n,o),!(o=tn(n,o)))return AST_Node.warn("Condition always false [{file}:{line},{col}]",i.start),K(i,[i.condition,i.alternative]).optimize(n);if(!(o instanceof AST_Node))return AST_Node.warn("Condition always true [{file}:{line},{col}]",i.start),K(i,[i.condition,i.consequent]).optimize(n);var t=o.negate(n,first_in_statement(n));te(n,o,t)===t&&(i=de(AST_Conditional,i,{condition:t,consequent:i.alternative,alternative:i.consequent}),t=o,o=i.condition);var r=i.consequent,a=i.alternative;if(bn(n,o)){if(o.equivalent_to(r))return de(AST_Binary,i,{operator:"||",left:o,right:a}).optimize(n);if(o.equivalent_to(a))return de(AST_Binary,i,{operator:"&&",left:o,right:r}).optimize(n)}var s=r.tail_node();if(s instanceof AST_Assign){var f="="==s.operator,e=f?a.tail_node():a;if((f||r===s)&&e instanceof AST_Assign&&s.operator==e.operator&&s.left.equivalent_to(e.left)&&(f&&s.left instanceof AST_SymbolRef||!o.has_side_effects(n)&&A(r)&&A(a)))return de(AST_Assign,i,{operator:s.operator,left:s.left,right:de(AST_Conditional,i,{condition:o,consequent:T(r),alternative:T(a)})})}if(r.equivalent_to(a))return K(i,[o,r]).optimize(n);var c,f=function e(n,t,r){if(!d(n,t))return!r&&de(AST_Conditional,i,{condition:o,consequent:n,alternative:t});r=n.clone();r.expression=e(n.expression,t.expression);return r}(r,a,!0);if(f)return f;if(r instanceof AST_Call&&a.TYPE==r.TYPE&&0<=(c=S(r,a))&&r.expression.equivalent_to(a.expression)&&!o.has_side_effects(n)&&!r.expression.has_side_effects(n)){s=r.clone(),f=r.args[c];return s.args[c]=f instanceof AST_Spread?de(AST_Spread,i,{expression:de(AST_Conditional,i,{condition:o,consequent:f.expression,alternative:a.args[c].expression})}):de(AST_Conditional,i,{condition:o,consequent:f,alternative:a.args[c]}),s}if(r instanceof AST_Conditional&&r.alternative.equivalent_to(a))return de(AST_Conditional,i,{condition:de(AST_Binary,i,{left:o,operator:"&&",right:r.condition}),consequent:r.consequent,alternative:a});if(r instanceof AST_Conditional&&r.consequent.equivalent_to(a))return de(AST_Conditional,i,{condition:de(AST_Binary,i,{left:t,operator:"||",right:r.condition}),consequent:a,alternative:r.alternative});if(a instanceof AST_Conditional&&r.equivalent_to(a.consequent))return de(AST_Conditional,i,{condition:de(AST_Binary,i,{left:o,operator:"||",right:a.condition}),consequent:r,alternative:a.alternative});if(a instanceof AST_Conditional&&r.equivalent_to(a.alternative))return de(AST_Conditional,i,{condition:de(AST_Binary,i,{left:t,operator:"&&",right:a.condition}),consequent:a.consequent,alternative:r});if((r instanceof AST_Sequence||a instanceof AST_Sequence)&&r.tail_node().equivalent_to(a.tail_node()))return K(i,[de(AST_Conditional,i,{condition:o,consequent:h(r),alternative:h(a)}),r.tail_node()]).optimize(n);if(r instanceof AST_Binary&&"&&"==r.operator&&r.right.equivalent_to(a))return de(AST_Binary,i,{operator:"&&",left:de(AST_Binary,i,{operator:"||",left:t,right:r.left}),right:a}).optimize(n);if(r instanceof AST_Binary&&"||"==r.operator&&r.right.equivalent_to(a))return de(AST_Binary,i,{operator:"||",left:de(AST_Binary,i,{operator:"&&",left:o,right:r.left}),right:a}).optimize(n);if(a instanceof AST_Binary&&"&&"==a.operator&&a.right.equivalent_to(r))return de(AST_Binary,i,{operator:"&&",left:de(AST_Binary,i,{operator:"||",left:o,right:a.left}),right:r}).optimize(n);if(a instanceof AST_Binary&&"||"==a.operator&&a.right.equivalent_to(r))return de(AST_Binary,i,{operator:"||",left:de(AST_Binary,i,{operator:"&&",left:t,right:a.left}),right:r}).optimize(n);var u=n.option("booleans")&&n.in_boolean_context();return _(r)?p(a)?l(o):de(AST_Binary,i,{operator:"||",left:l(o),right:a}):p(r)?_(a)?l(o.negate(n)):de(AST_Binary,i,{operator:"&&",left:l(o.negate(n)),right:a}):_(a)?de(AST_Binary,i,{operator:"||",left:l(o.negate(n)),right:r}):p(a)?de(AST_Binary,i,{operator:"&&",left:l(o),right:r}):(n.option("typeofs")&&nn(o,r,a),i);function l(e){return e.is_boolean(n)?e:de(AST_UnaryPrefix,e,{operator:"!",expression:e.negate(n)})}function _(e){return e instanceof AST_True||u&&e instanceof AST_Constant&&e.value||e instanceof AST_UnaryPrefix&&"!"==e.operator&&e.expression instanceof AST_Constant&&!e.expression.value}function p(e){return e instanceof AST_False||u&&(e instanceof AST_Constant&&!e.value||e instanceof AST_UnaryPrefix&&"void"==e.operator&&!e.expression.has_side_effects(n))||e instanceof AST_UnaryPrefix&&"!"==e.operator&&e.expression instanceof AST_Constant&&e.expression.value}function S(e,n){var t=e.args,r=n.args,i=t.length;if(i!=r.length)return-2;for(var o=0;o<i;o++)if(!t[o].equivalent_to(r[o])){if(t[o]instanceof AST_Spread!=r[o]instanceof AST_Spread)return-3;for(var a=o+1;a<i;a++)if(!t[a].equivalent_to(r[a]))return-2;return o}return-1}function d(e,n){if(e.TYPE==n.TYPE&&e.optional==n.optional){if(e instanceof AST_Call)return-1!=S(e,n)?void 0:"Call"!=e.TYPE||!(e.expression instanceof AST_PropAccess||n.expression instanceof AST_PropAccess)||d(e.expression,n.expression);if(e instanceof AST_PropAccess){var t=e.property,r=n.property;return(t instanceof AST_Node?t.equivalent_to(r):t==r)&&!(e.expression instanceof AST_Super||n.expression instanceof AST_Super)}}}function A(e){return e===e.tail_node()||all(e.expressions.slice(0,-1),function(e){return!e.has_side_effects(n)})}function T(e){if(!(e instanceof AST_Sequence))return e.right;var n=e.expressions.slice();return n.push(n.pop().right),K(e,n)}function h(e){return e instanceof AST_Sequence?K(e,e.expressions.slice(0,-1)):de(AST_Number,e,{value:0})}}),e(AST_Boolean,function(e,n){if(!n.option("booleans"))return e;if(n.in_boolean_context())return de(AST_Number,e,{value:+e.value});n=n.parent();return n instanceof AST_Binary&&("=="==n.operator||"!="==n.operator)?(AST_Node.warn("Non-strict equality against boolean: {operator} {value} [{file}:{line},{col}]",{operator:n.operator,value:e.value,file:n.start.file,line:n.start.line,col:n.start.col}),de(AST_Number,e,{value:+e.value})):de(AST_UnaryPrefix,e,{operator:"!",expression:de(AST_Number,e,{value:1-e.value})})}),e(AST_Spread,function(e,n){var t=e.expression;return n.option("spreads")&&t instanceof AST_Array&&!(n.parent()instanceof AST_Object)?List.splice(t.elements.map(function(e){return e instanceof AST_Hole?de(AST_Undefined,e).optimize(n):e})):e}),e(AST_Sub,function(e,t){var n=e.expression,r=e.property,i=ln(e,t);if(i)return i;if(t.option("properties")){var o=r.evaluate(t);if(o!==r){"string"==typeof o&&("undefined"==o?o=void 0:(A=parseFloat(o)).toString()==o&&(o=A));var r=e.property=ne(r,X(o,r).transform(t)),a=""+o;if(is_identifier_string(a)&&a.length<=r.print_to_string().length+1)return de(AST_Dot,e,{optional:e.optional,expression:n,property:a}).optimize(t)}}var s,f,c,u,l=t.parent(),i=is_lhs(t.self(),l);if(t.option("arguments")&&n instanceof AST_SymbolRef&&ue(s=n.definition())&&!n.in_arg&&r instanceof AST_Number&&Math.floor(S=r.value)==S&&(f=s.scope)===function(){var e,n=0;for(;e=t.parent(n++);)if(e instanceof AST_Lambda){if(e instanceof AST_Accessor)return;if(!is_arrow(e))return c=t.parent(n),e}}()&&f.uses_arguments<(i?2:3)){l instanceof AST_UnaryPrefix&&"delete"==l.operator&&(s.deleted||(s.deleted=[]),s.deleted[S]=!0);var _=f.argnames[S];if(s.deleted&&s.deleted[S])_=null;else if(_)(!(_ instanceof AST_SymbolFunarg&&"await"!=_.name&&n.scope.find_variable(_.name)===(p=_.definition()))||(t.has_directive("use strict")||f.name||f.rest||!(c instanceof AST_Call&&S<c.args.length&&all(c.args.slice(0,S+1),function(e){return!(e instanceof AST_Spread)}))||!all(f.argnames,function(e){return e instanceof AST_SymbolFunarg}))&&(y()||p.assignments||1<p.orig.length))&&(_=null);else if((i||!y())&&S<f.argnames.length+5&&t.drop_fargs(f,c)&&!f.rest)for(;S>=f.argnames.length;)_=f.make_var(AST_SymbolFunarg,f,"argument_"+f.argnames.length),f.argnames.push(_);if(_&&find_if(function(e){return e.name===_.name},f.argnames)===_){i&&s.reassigned--;var p=de(AST_SymbolRef,e,_);return p.reference(),delete _.__unused,p}}if(i)return e;if(t.option("sequences")&&"Call"!=l.TYPE&&!(l instanceof AST_ForEnumeration&&l.init===e)){l=_n(e);if(l!==e)return l.optimize(t)}if(o===r||(d=e.flatten_object(a,t))&&(n=e.expression=d.expression,r=e.property=d.property),t.option("properties")&&t.option("side_effects")&&r instanceof AST_Number&&n instanceof AST_Array&&all(u=n.elements,function(e){return!(e instanceof AST_Spread)})){var S,d=u[S=r.value];if(Nn(d,t)){for(var A,T=d instanceof AST_Hole,h=!T,m=[],v=u.length;--v>S;)(A=u[v].drop_side_effect_free(t))&&(m.unshift(A),h&&A.has_side_effects(t)&&(h=!1));for(h||m.unshift(d);0<=--v;)(A=u[v].drop_side_effect_free(t))?m.unshift(A):T?m.unshift(de(AST_Hole,u[v])):S--;return h?(m.push(d),K(e,m).optimize(t)):de(AST_Sub,e,{expression:de(AST_Array,n,{elements:m}),property:de(AST_Number,r,{value:S})})}}return ae(t,e);function y(){return!t.option("reduce_vars")||s.reassigned}}),AST_Arrow.DEFMETHOD("contains_super",return_false),AST_AsyncArrow.DEFMETHOD("contains_super",return_false),AST_Lambda.DEFMETHOD("contains_super",function(){var n,t=this;return t.walk(new TreeWalker(function(e){return!!n||(e instanceof AST_Super?n=!0:e!==t&&e instanceof AST_Scope&&!is_arrow(e)||void 0)})),n}),AST_LambdaDefinition.DEFMETHOD("contains_super",return_false),AST_Scope.DEFMETHOD("contains_super",return_false),AST_Arrow.DEFMETHOD("contains_this",return_false),AST_AsyncArrow.DEFMETHOD("contains_this",return_false),AST_Node.DEFMETHOD("contains_this",function(){var n,t=this;return t.walk(new TreeWalker(function(e){return!!n||(e instanceof AST_This?n=!0:e!==t&&e instanceof AST_Scope&&!is_arrow(e)||void 0)})),n}),AST_PropAccess.DEFMETHOD("flatten_object",function(e,n){if(n.option("properties")&&"__proto__"!==e){var t=this.expression;if(t instanceof AST_Object)for(var r=t.properties,i=r.length;0<=--i;){var o=r[i];if(o.key===e){if(!all(r,Fn))return;if(!Nn(o.value,n))return;for(var a=[],s=0;s<r.length;s++){var f=r[s].value;if(r[s]instanceof AST_ObjectMethod){var c,u,l,_=!(f.uses_arguments||is_generator(f)||f.contains_this());if(_&&(u=Sn(c=c||n.find_parent(AST_Scope)),f.each_argname(function(e){u[e.name]&&(_=!1)})),_)l=is_async(f)?AST_AsyncArrow:AST_Arrow;else{if(!(i!==s||n.parent()instanceof AST_Call))return;l=f.CTOR}f=de(l,f,f)}a.push(f)}return de(AST_Sub,this,{expression:de(AST_Array,t,{elements:a}),property:de(AST_Number,this,{value:i})})}}}}),e(AST_Dot,function(e,n){"arguments"!=e.property&&"caller"!=e.property||AST_Node.warn("Function.prototype.{prop} not supported [{file}:{line},{col}]",{prop:e.property,file:e.start.file,line:e.start.line,col:e.start.col});var t=n.parent();if(is_lhs(n.self(),t))return e;var r=ln(e,n);if(r)return r;if(n.option("sequences")&&"Call"!=t.TYPE&&!(t instanceof AST_ForEnumeration&&t.init===e)){var i=_n(e);if(i!==e)return i.optimize(n)}if(n.option("unsafe_proto")&&e.expression instanceof AST_Dot&&"prototype"==e.expression.property){var o=e.expression.expression;if(he(o))switch(o.name){case"Array":e.expression=de(AST_Array,e.expression,{elements:[]});break;case"Function":e.expression=de(AST_Function,e.expression,{argnames:[],body:[]}).init_vars(o.scope);break;case"Number":e.expression=de(AST_Number,e.expression,{value:0});break;case"Object":e.expression=de(AST_Object,e.expression,{properties:[]});break;case"RegExp":e.expression=de(AST_RegExp,e.expression,{value:/t/});break;case"String":e.expression=de(AST_String,e.expression,{value:""})}}i=e.flatten_object(e.property,n);return i?i.optimize(n):ae(n,e)}),e(AST_DestructuredArray,function(e,n){return n.option("rests")&&e.rest instanceof AST_DestructuredArray?de(AST_DestructuredArray,e,{elements:e.elements.concat(e.rest.elements),rest:e.rest.rest}):e}),e(AST_DestructuredKeyVal,function(e,n){var t;return!n.option("objects")||(t=e.key)instanceof AST_Node&&(t=t.evaluate(n))!==e.key&&(e.key=""+t),e}),e(AST_Object,function(t,r){if(!r.option("objects"))return t;var e,i=!1,o=!1,a=!1,s=r.has_directive("use strict"),f=new Dictionary,c=[];return t.properties.forEach(function(e){if(!(e instanceof AST_Spread))return l(e);o=!0;var n=e.expression;r.option("spreads")&&n instanceof AST_Object&&all(n.properties,function(e){return!(e instanceof AST_ObjectGetter)&&(!(e instanceof AST_Spread)&&("__proto__"!==e.key||(e instanceof AST_ObjectSetter||!e.value.has_side_effects(r))))})?(i=!0,n.properties.forEach(function(e){var n=e.key,t=e instanceof AST_ObjectSetter;if("__proto__"===n){if(!t)return;n=X(n,e)}l(t?de(AST_ObjectKeyVal,e,{key:n,value:de(AST_Undefined,e).optimize(r)}):e)})):(a=!0,u(),c.push(e))}),u(),i?(o&&a&&1==c.length&&((e=c[0])instanceof AST_ObjectProperty&&e.key instanceof AST_Number&&(e.key=""+e.key.value)),de(AST_Object,t,{properties:c})):t;function u(){f.each(function(e){if(1==e.length)return c.push(e[0]);i=!0;var n=s&&!a&&e.pop();c.push(1==e.length?e[0]:de(AST_ObjectKeyVal,t,{key:e[0].key,value:K(t,e.map(function(e){return e.value}))})),n&&c.push(n)}),f=new Dictionary}function l(e){var n=e.key;n instanceof AST_Node&&(o=!0,(n=n.evaluate(r))===e.key||"__proto__"===n?a=!0:n=e.key=""+n),Fn(e)?(e.value.has_side_effects(r)&&u(),f.add(n,e)):(u(),c.push(e)),o&&!a&&"string"==typeof n&&_.test(n)&&(a=!0,(e=f.has(n)?f.get(n)[0]:e).key=de(AST_Number,e,{value:+n}))}}),e(AST_Return,function(e,n){return n.option("side_effects")&&e.value&&ve(e.value,n)&&!N(n.find_parent(AST_Scope))&&(e.value=null),e})}(function(e,n){e.DEFMETHOD("optimize",function(e){if(this._optimized)return this;if(e.has_directive("use asm"))return this;e=n(this,e);return e._optimized=!0,e})}),function(){function e(e,n){e.DEFMETHOD("_codegen",n)}var a=!1;AST_Node.DEFMETHOD("print",function(e,n){var t=this;function r(){e.prepend_comments(t),t.add_source_map(e),t._codegen(e),e.append_comments(t)}e.push_node(t),n||t.needs_parens(e)?e.with_parens(r):r(),e.pop_node()});var n=OutputStream({inline_script:!1,shebang:!1,width:!1});function t(e,n){e.DEFMETHOD("needs_parens",n)}function r(e){var n=e.parent();return!e.has_parens()&&first_in_statement(e,!1,!0)?this.name||!(n instanceof AST_ExportDefault):!!(e.option("webkit")&&n instanceof AST_PropAccess&&n.expression===this)||(!!(e.option("wrap_iife")&&n instanceof AST_Call&&n.expression===this)||void 0)}function i(e){return!e.has_parens()&&first_in_statement(e,!0)}function o(e){e=e.parent();return e instanceof AST_Binary?"**"==e.operator&&e.left===this:e instanceof AST_Call?e.expression===this:e instanceof AST_Class||(e instanceof AST_PropAccess?e.expression===this:e instanceof AST_Template?e.tag===this:void 0)}function s(e,n){return!!e.terminal&&((n instanceof AST_Call||n instanceof AST_PropAccess)&&n.expression===e)}function f(e,n){n=n.parent();return n instanceof AST_Await||(n instanceof AST_Binary?!(n instanceof AST_Assign):n instanceof AST_Call?n.expression===e:n instanceof AST_Class||(n instanceof AST_Conditional?n.condition===e:n instanceof AST_PropAccess?n.expression===e:n instanceof AST_Template?n.tag===e:n instanceof AST_Unary||void 0))}function c(e,t,r,n){var i=e.length-1,o=n,n=a;e.forEach(function(e,n){o&&(e instanceof AST_Directive?"use asm"==e.value&&(a=!0):e instanceof AST_EmptyStatement||(e instanceof AST_SimpleStatement&&e.body instanceof AST_String&&r.force_semicolon(),o=!1)),e instanceof AST_EmptyStatement||(r.indent(),e.print(r),n==i&&t||(r.newline(),t&&r.newline()))}),a=n}function u(e,n){n.print("{"),n.with_indent(function(){n.append_comments(e,!0)}),n.print("}")}function l(e,n,t){0<e.body.length?n.with_block(function(){c(e.body,!1,n,t)}):u(e,n)}function _(t,r){return function(e){var n=this;e.print(t),e.space(),e.with_parens(function(){n.init.print(e),e.space(),e.print(r),e.space(),n.object.print(e)}),C(n.body,e)}}function p(e,t){t.with_parens(function(){e.argnames.forEach(function(e,n){n&&t.comma(),e.print(t)}),e.rest&&(e.argnames.length&&t.comma(),t.print("..."),e.rest.print(t))})}function S(e,n){var t=1==e.argnames.length&&!e.rest&&e.argnames[0];t instanceof AST_SymbolFunarg&&"yield"!=t.name?t.print(n):p(e,n),n.space(),n.print("=>"),n.space(),e.value?e.value.print(n):l(e,n,!0)}function d(e,n){e.name&&(n.space(),e.name.print(n)),p(e,n),n.space(),l(e,n,!0)}function A(e){e.print("async"),e.space(),e.print("function"),d(this,e)}function T(e){e.print("async"),e.space(),e.print("function*"),d(this,e)}function h(e){e.print("function*"),d(this,e)}function m(e,n){var t=e.value;is_async(t)&&(n.print("async"),n.space()),is_generator(t)&&n.print("*"),k(e,n),d(e.value,n)}function v(t,r){return function(e){e.print(t);var n=this[r];n&&(e.space(),n.print(e)),e.semicolon()}}function y(e,n){n.newline(),e.body.forEach(function(e){n.indent(),e.print(n),n.newline()})}function b(n){return function(t){t.print(n),t.space(),this.definitions.forEach(function(e,n){n&&t.comma(),e.print(t)});var e=t.parent();e instanceof AST_IterationStatement&&e.init===this||t.semicolon()}}function g(e,n,t){var r=!1;t&&e.walk(new TreeWalker(function(e){return!!r||(e instanceof AST_Binary&&"in"==e.operator?r=!0:e instanceof AST_Scope&&(!is_arrow(e)||!e.value)||void 0)})),e.print(n,r)}function w(e,n){if(n.option("annotations")&&e.pure){var t,r=0,i=e;do{if(t=i,(i=n.parent(r++))instanceof AST_Call&&i.expression===t)return}while(i instanceof AST_PropAccess&&i.expression===t);n.print("string"==typeof e.pure?"/*"+e.pure+"*/":"/*@__PURE__*/")}}function x(e,t){(e.expression instanceof AST_Call||e.expression instanceof AST_Lambda)&&t.add_mapping(e.start),t.with_parens(function(){e.args.forEach(function(e,n){n&&t.comma(),e.print(t)})})}function E(e,t,r){var n=e.properties;0<n.length?t.with_block(function(){n.forEach(function(e,n){n&&(r||t.print(","),t.newline()),t.indent(),e.print(t)}),t.newline()}):u(e,t)}function k(e,n){var t=e.key;if(t instanceof AST_Node)return n.with_square(function(){t.print(n)});var r=e.start&&e.start.quote;if(n.option("quote_keys")||r&&n.option("keep_quoted_props"))n.print_string(t,r);else if(""+ +t==t&&0<=t)n.print(F(t));else if(e.private)n.print_name(t);else{if(RESERVED_WORDS[t]?!n.option("ie"):is_identifier_string(t))return n.print_name(t),t;n.print_string(t,r)}}function D(n){return function(e){this.static&&(e.print("static"),e.space()),e.print(n),e.space(),k(this,e),d(this.value,e)}}function O(e){var n=e.definition();return n&&n.mangled_name||e.name}function C(e,n){n.option("braces")&&!(e instanceof AST_Const||e instanceof AST_Let)?P(e,n):e instanceof AST_EmptyStatement?n.force_semicolon():(n.space(),e.print(n))}function N(e,n){return 0<e.args.length||n.option("beautify")}function F(e){var n,t,r=e.toString(10).replace(/^0\./,".").replace("e+","e"),i=[r];return Math.floor(e)===e&&(e<0?i.push("-0x"+(-e).toString(16).toLowerCase()):i.push("0x"+e.toString(16).toLowerCase())),(n=/^\.0+/.exec(r))?(t=n[0].length,e=r.slice(t),i.push(e+"e-"+(e.length+t-1))):(n=/0+$/.exec(r))?(t=n[0].length,i.push(r.slice(0,-t)+"e"+t)):(n=/^(\d)\.(\d+)e(-?\d+)$/.exec(r))&&i.push(n[1]+n[2]+"e"+(n[3]-n[2].length)),function(e){for(var n=e[0],t=n.length,r=1;r<e.length;++r)e[r].length<t&&(t=(n=e[r]).length);return n}(i)}function P(e,n){n.space(),e instanceof AST_EmptyStatement?u(e,n):e instanceof AST_BlockStatement?e.print(n):n.with_block(function(){n.indent(),e.print(n),n.newline()})}function R(e,n){e.forEach(function(e){e.DEFMETHOD("add_source_map",n)})}AST_Node.DEFMETHOD("print_to_string",function(e){if(e){e=OutputStream(e);return this.print(e),e.get()}return this.print(n),n.reset()}),t(AST_Node,return_false),t(AST_AsyncFunction,r),t(AST_AsyncGeneratorFunction,r),t(AST_ClassExpression,r),t(AST_Function,r),t(AST_GeneratorFunction,r),t(AST_Object,i),t(AST_Await,o),t(AST_Unary,o),t(AST_Sequence,function(e){e=e.parent();return e instanceof AST_Array||is_arrow(e)&&e.value===this||e instanceof AST_Await||e instanceof AST_Binary||e instanceof AST_Call||e instanceof AST_Class||e instanceof AST_ClassProperty||e instanceof AST_Conditional||e instanceof AST_DefaultValue||e instanceof AST_DestructuredKeyVal||e instanceof AST_ExportDefault||e instanceof AST_ForOf||e instanceof AST_ObjectProperty||e instanceof AST_PropAccess&&e.expression===this||e instanceof AST_Spread||e instanceof AST_Template&&e.tag===this||e instanceof AST_Unary||e instanceof AST_VarDef||e instanceof AST_Yield}),t(AST_Binary,function(e){var n=e.parent();if(n instanceof AST_Await)return!0;if(n instanceof AST_Binary){var t=n.operator,r=PRECEDENCE[t],i=this.operator,e=PRECEDENCE[i];return e<r||"??"==t&&("&&"==i||"||"==i)||r==e&&this===n["**"==t?"left":"right"]}return n instanceof AST_Call?n.expression===this:n instanceof AST_Class||(n instanceof AST_PropAccess?n.expression===this:n instanceof AST_Template?n.tag===this:n instanceof AST_Unary||void 0)}),t(AST_PropAccess,function(e){e=e.parent();return e instanceof AST_New&&e.expression===this&&"Call"==root_expr(this).TYPE||s(this,e)}),t(AST_Call,function(e){var n=e.parent();if(n instanceof AST_New)return n.expression===this;if(e.option("webkit")&&this.expression instanceof AST_Function&&n instanceof AST_PropAccess&&n.expression===this){e=e.parent(1);if(e instanceof AST_Assign&&e.left===n)return!0}return s(this,n)}),t(AST_New,function(e){if(N(this,e))return!1;e=e.parent();return e instanceof AST_Call?e.expression===this:e instanceof AST_PropAccess||(e instanceof AST_Template?e.tag===this:void 0)}),t(AST_Number,function(e){if(!e.option("galio"))return!1;e=e.parent();return e instanceof AST_PropAccess&&e.expression===this&&/^0/.test(F(this.value))}),t(AST_Arrow,function(e){return f(this,e)}),t(AST_Assign,function(e){return!!f(this,e)||(e.option("v8")?this.left instanceof AST_Destructured:this.left instanceof AST_DestructuredObject?i(e):void 0)}),t(AST_AsyncArrow,function(e){return f(this,e)}),t(AST_Conditional,function(e){return f(this,e)}),t(AST_Yield,function(e){return f(this,e)}),e(AST_Directive,function(e){var n=this.quote,t=this.value;switch(e.option("quote_style")){case 0:case 2:-1==t.indexOf('"')&&(n='"');break;case 1:-1==t.indexOf("'")&&(n="'")}e.print(n+t+n),e.semicolon()}),e(AST_Debugger,function(e){e.print("debugger"),e.semicolon()}),e(AST_Toplevel,function(e){c(this.body,!0,e,!0),e.print("")}),e(AST_LabeledStatement,function(e){this.label.print(e),e.colon(),this.body.print(e)}),e(AST_SimpleStatement,function(e){this.body.print(e),e.semicolon()}),e(AST_BlockStatement,function(e){l(this,e)}),e(AST_EmptyStatement,function(e){e.semicolon()}),e(AST_Do,function(e){var n=this;e.print("do"),P(n.body,e),e.space(),e.print("while"),e.space(),e.with_parens(function(){n.condition.print(e)}),e.semicolon()}),e(AST_While,function(e){var n=this;e.print("while"),e.space(),e.with_parens(function(){n.condition.print(e)}),C(n.body,e)}),e(AST_For,function(e){var n=this;e.print("for"),e.space(),e.with_parens(function(){n.init?(n.init instanceof AST_Definitions?n.init.print(e):g(n.init,e,!0),e.print(";"),e.space()):e.print(";"),n.condition?(n.condition.print(e),e.print(";"),e.space()):e.print(";"),n.step&&n.step.print(e)}),C(n.body,e)}),e(AST_ForAwaitOf,_("for await","of")),e(AST_ForIn,_("for","in")),e(AST_ForOf,_("for","of")),e(AST_With,function(e){var n=this;e.print("with"),e.space(),e.with_parens(function(){n.expression.print(e)}),C(n.body,e)}),e(AST_ExportDeclaration,function(e){e.print("export"),e.space(),this.body.print(e)}),e(AST_ExportDefault,function(e){e.print("export"),e.space(),e.print("default"),e.space();var n=this.body;n.print(e),n instanceof AST_ClassExpression&&!n.name||n instanceof AST_DefClass||n instanceof AST_LambdaDefinition||n instanceof AST_LambdaExpression&&!n.name&&!is_arrow(n)||e.semicolon()}),e(AST_ExportForeign,function(t){var r=this;t.print("export"),t.space();var n=r.keys.length;function i(e){var n=r.aliases[e],e=r.keys[e];t.print_name(e),n!=e&&(t.space(),t.print("as"),t.space(),t.print_name(n))}0==n?u(r,t):"*"==r.keys[0]?i(0):t.with_block(function(){t.indent(),i(0);for(var e=1;e<n;e++)t.print(","),t.newline(),t.indent(),i(e);t.newline()}),t.space(),t.print("from"),t.space(),t.print_string(r.path,r.quote),t.semicolon()}),e(AST_ExportReferences,function(e){e.print("export"),e.space(),E(this,e),e.semicolon()}),e(AST_Import,function(e){var n=this;e.print("import"),e.space(),n.default&&n.default.print(e),n.all&&(n.default&&e.comma(),n.all.print(e)),n.properties&&(n.default&&e.comma(),E(n,e)),(n.all||n.default||n.properties)&&(e.space(),e.print("from"),e.space()),e.print_string(n.path,n.quote),e.semicolon()}),e(AST_Arrow,function(e){S(this,e)}),e(AST_AsyncArrow,function(e){e.print("async"),e.space(),S(this,e)}),e(AST_Lambda,function(e){e.print("function"),d(this,e)}),e(AST_AsyncDefun,A),e(AST_AsyncFunction,A),e(AST_AsyncGeneratorDefun,T),e(AST_AsyncGeneratorFunction,T),e(AST_GeneratorDefun,h),e(AST_GeneratorFunction,h),e(AST_Class,function(e){e.print("class"),this.name&&(e.space(),this.name.print(e)),this.extends&&(e.space(),e.print("extends"),e.space(),this.extends.print(e)),e.space(),E(this,e,!0)}),e(AST_ClassField,function(e){this.static&&(e.print("static"),e.space()),k(this,e),this.value&&(e.space(),e.print("="),e.space(),this.value.print(e)),e.semicolon()}),e(AST_ClassGetter,D("get")),e(AST_ClassSetter,D("set")),e(AST_ClassMethod,function(e){this.static&&(e.print("static"),e.space()),m(this,e)}),e(AST_Return,v("return","value")),e(AST_Throw,v("throw","value")),e(AST_Break,v("break","label")),e(AST_Continue,v("continue","label")),e(AST_If,function(e){var n=this;e.print("if"),e.space(),e.with_parens(function(){n.condition.print(e)}),n.alternative?(function(e,n){var t=e.body;if(n.option("braces")&&!(t instanceof AST_Const||t instanceof AST_Let)||n.option("ie")&&t instanceof AST_Do)return P(t,n);if(!t)return n.force_semicolon();for(;;)if(t instanceof AST_If){if(!t.alternative)return P(e.body,n);t=t.alternative}else{if(!(t instanceof AST_StatementWithBody))break;t=t.body}C(e.body,n)}(n,e),e.space(),e.print("else"),n.alternative instanceof AST_If?(e.space(),n.alternative.print(e)):C(n.alternative,e)):C(n.body,e)}),e(AST_Switch,function(t){var e=this;t.print("switch"),t.space(),t.with_parens(function(){e.expression.print(t)}),t.space();var r=e.body.length-1;r<0?u(e,t):t.with_block(function(){e.body.forEach(function(e,n){t.indent(!0),e.print(t),n<r&&0<e.body.length&&t.newline()})})}),e(AST_Default,function(e){e.print("default:"),y(this,e)}),e(AST_Case,function(e){e.print("case"),e.space(),this.expression.print(e),e.print(":"),y(this,e)}),e(AST_Try,function(e){e.print("try"),e.space(),l(this,e),this.bcatch&&(e.space(),this.bcatch.print(e)),this.bfinally&&(e.space(),this.bfinally.print(e))}),e(AST_Catch,function(e){var n=this;e.print("catch"),n.argname&&(e.space(),e.with_parens(function(){n.argname.print(e)})),e.space(),l(n,e)}),e(AST_Finally,function(e){e.print("finally"),e.space(),l(this,e)}),e(AST_Const,b("const")),e(AST_Let,b("let")),e(AST_Var,b("var")),e(AST_VarDef,function(e){var n;this.name.print(e),this.value&&(e.space(),e.print("="),e.space(),n=e.parent(1),g(this.value,e,n instanceof AST_For||n instanceof AST_ForEnumeration))}),e(AST_DefaultValue,function(e){this.name.print(e),e.space(),e.print("="),e.space(),this.value.print(e)}),e(AST_Call,function(e){w(this,e),this.expression.print(e),this.optional&&e.print("?."),x(this,e)}),e(AST_New,function(e){w(this,e),e.print("new"),e.space(),this.expression.print(e),N(this,e)&&x(this,e)}),e(AST_Sequence,function(t){this.expressions.forEach(function(e,n){0<n&&(t.comma(),t.should_break()&&(t.newline(),t.indent())),e.print(t)})}),e(AST_Dot,function(e){var n=this.expression;n.print(e);var t=this.property;e.option("ie")&&RESERVED_WORDS[t]?(e.print(this.optional?"?.[":"["),e.add_mapping(this.end),e.print_string(t),e.print("]")):(n instanceof AST_Number&&!/[ex.)]/i.test(e.last())&&e.print("."),e.print(this.optional?"?.":"."),e.add_mapping(this.end),e.print_name(t))}),e(AST_Sub,function(e){this.expression.print(e),e.print(this.optional?"?.[":"["),this.property.print(e),e.print("]")}),e(AST_Spread,function(e){e.print("..."),this.expression.print(e)}),e(AST_UnaryPrefix,function(e){var n=this.operator,t=this.expression;e.print(n),(/^[a-z]/i.test(n)||/[+-]$/.test(n)&&t instanceof AST_UnaryPrefix&&/^[+-]/.test(t.operator))&&e.space(),t.print(e)}),e(AST_UnaryPostfix,function(e){this.expression.print(e),e.print(this.operator)}),e(AST_Binary,function(e){this.left.print(e),e.space(),e.print(this.operator),e.space(),this.right.print(e)}),e(AST_Conditional,function(e){this.condition.print(e),e.space(),e.print("?"),e.space(),this.consequent.print(e),e.space(),e.colon(),this.alternative.print(e)}),e(AST_Await,function(e){e.print("await"),e.space(),this.expression.print(e)}),e(AST_Yield,function(e){e.print(this.nested?"yield*":"yield"),this.expression&&(e.space(),this.expression.print(e))}),e(AST_Array,function(t){var e=this.elements,r=e.length;t.with_square(0<r?function(){t.space(),e.forEach(function(e,n){n&&t.comma(),e.print(t),n===r-1&&e instanceof AST_Hole&&t.comma()}),t.space()}:noop)}),e(AST_DestructuredArray,function(t){var e=this.elements,n=e.length,r=this.rest;t.with_square(n||r?function(){t.space(),e.forEach(function(e,n){n&&t.comma(),e.print(t)}),r?(n&&t.comma(),t.print("..."),r.print(t)):e[n-1]instanceof AST_Hole&&t.comma(),t.space()}:noop)}),e(AST_DestructuredKeyVal,function(e){var n=k(this,e),t=this.value;if(n)if(t instanceof AST_DefaultValue){if(t.name instanceof AST_Symbol&&n==O(t.name))return e.space(),e.print("="),e.space(),void t.value.print(e)}else if(t instanceof AST_Symbol&&n==O(t))return;e.colon(),t.print(e)}),e(AST_DestructuredObject,function(t){var e=this.properties,n=e.length,r=this.rest;n||r?t.with_block(function(){e.forEach(function(e,n){n&&(t.print(","),t.newline()),t.indent(),e.print(t)}),r&&(n&&(t.print(","),t.newline()),t.indent(),t.print("..."),r.print(t)),t.newline()}):u(this,t)}),e(AST_Object,function(e){E(this,e)}),e(AST_ObjectKeyVal,function(e){k(this,e),e.colon(),this.value.print(e)}),e(AST_ObjectMethod,function(e){m(this,e)}),e(AST_ObjectGetter,D("get")),e(AST_ObjectSetter,D("set")),e(AST_Symbol,function(e){e.print_name(O(this))}),e(AST_SymbolExport,function(e){var n=O(this);e.print_name(n);var t=this.alias;t!=n&&(e.space(),e.print("as"),e.space(),e.print_name(t))}),e(AST_SymbolImport,function(e){var n=O(this),t=this.key;t&&t!=n&&(e.print_name(t),e.space(),e.print("as"),e.space()),e.print_name(n)}),e(AST_Hole,noop),e(AST_Template,function(e){this.tag&&this.tag.print(e),e.print("`");for(var n=0;n<this.expressions.length;n++)e.print(this.strings[n]),e.print("${"),this.expressions[n].print(e),e.print("}");e.print(this.strings[n]),e.print("`")}),e(AST_Constant,function(e){e.print(""+this.value)}),e(AST_String,function(e){e.print_string(this.value,this.quote)}),e(AST_Number,function(e){var n=this.start;a&&n&&null!=n.raw?e.print(n.raw):e.print(F(this.value))}),e(AST_RegExp,function(e){var n=this.value,t=n.toString(),r=t.lastIndexOf("/");n.raw_source?t="/"+n.raw_source+t.slice(r):1==r?t="/(?:)"+t.slice(r):t.indexOf("/",1)<r&&(t="/"+t.slice(1,r).replace(/\\\\|[^/]?\//g,function(e){return"\\"==e[0]?e:e.slice(0,-1)+"\\/"})+t.slice(r)),e.print(e.to_utf8(t).replace(/\\(?:\0(?![0-9])|[^\0])/g,function(e){switch(e[1]){case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\t";case"\b":return"\b";case"\f":return"\f";case"\0":return"\0";case"\v":return"\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}}).replace(/[\n\r\u2028\u2029]/g,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}));t=e.parent();t instanceof AST_Binary&&/^in/.test(t.operator)&&t.left===this&&e.print(" ")}),R([AST_Node,AST_LabeledStatement],noop),R([AST_Array,AST_BlockStatement,AST_Catch,AST_Constant,AST_Debugger,AST_Definitions,AST_Destructured,AST_Finally,AST_Jump,AST_Lambda,AST_New,AST_Object,AST_StatementWithBody,AST_Symbol,AST_Switch,AST_SwitchBranch,AST_Try],function(e){e.add_mapping(this.start)}),R([AST_ClassProperty,AST_DestructuredKeyVal,AST_ObjectProperty],function(e){"string"==typeof this.key&&e.add_mapping(this.start,this.key)})}();var vlq_char=characters("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),vlq_bits=vlq_char.reduce(function(e,n,t){return e[n]=t,e},Object.create(null));function vlq_decode(e,n){for(var t=0,r=0,i=0,o=0;i<n.length;i++){var a=vlq_bits[n[i]];t+=(31&a)<<r,32&a?r+=5:(e[o++]+=1&t?2147483648|-(t>>1):t>>1,t=r=0)}return o}function vlq_encode(e){var n="";e=Math.abs(e)<<1|e>>>31;do{var t=31&e}while((e>>>=5)&&(t|=32),n+=vlq_char[t],e);return n}function create_array_map(){var n=Object.create(null),t=[];return t.index=function(e){return HOP(n,e)||(n[e]=t.length,t.push(e)),n[e]},t}function SourceMap(l){var a,s=create_array_map(),o=l.includeSources&&Object.create(null),f=create_array_map(),c="";l.orig&&Object.keys(l.orig).forEach(function(e){var n=l.orig[e],t=[0,0,1,0,0];if(l.orig[e]={names:n.names,mappings:n.mappings.split(/;/).map(function(e){return t[0]=0,e.split(/,/).map(function(e){return t.slice(0,vlq_decode(t,e))})}),sources:n.sources},o&&n.sourcesContent)for(var r=0;r<n.sources.length;r++){var i=n.sourcesContent[r];i&&(o[n.sources[r]]=i)}});var u=1,_=0,p=0,S=1,d=0,A=0;return{add:l.orig?function(e,n,t,r,i,o){var a=l.orig[e];if(a){var s,f=a.mappings[r-1];if(!f)return;for(var c=0;c<f.length;c++){var u=f[c][0];if(u<=i&&(s=f[c]),i<=u)break}!s||s.length<4?e=null:(e=a.sources[s[1]],r=s[2],i=s[3],4<s.length&&(o=a.names[s[4]]))}T(e,n,t,r,i,o)}:T,setSourceContent:o?function(e,n){e in o||(o[e]=n)}:noop,toString:function(){return JSON.stringify({version:3,file:l.filename||void 0,sourceRoot:l.root||void 0,sources:s,sourcesContent:o?s.map(function(e){return o[e]||null}):void 0,names:f,mappings:c})}};function T(e,n,t,r,i,o){if(null!=a||null!=e){if(a=e,u<n)for(_=0;c+=";",++u<n;);else c&&(c+=",");c+=vlq_encode(t-_),_=t,null!=e&&(e=s.index(e),c+=vlq_encode(e-p),p=e,c+=vlq_encode(r-S),S=r,c+=vlq_encode(i-d),d=i,l.names&&null!=o&&(o=f.index(o),c+=vlq_encode(o-A),A=o))}}}!function(){var r={Program:function(e){return new AST_Toplevel({start:s(e),end:f(e),body:i(e.body.map(l))})},ArrowFunctionExpression:function(e){var n=[],t=null;e.params.forEach(function(e){"RestElement"==e.type?t=l(e.argument):n.push(l(e))});var r=new(e.async?AST_AsyncArrow:AST_Arrow)({start:s(e),end:f(e),argnames:n,rest:t}),e=l(e.body);return e instanceof AST_BlockStatement?(r.body=i(e.body),r.value=null):(r.body=[],r.value=e),r},FunctionDeclaration:function(e){var n=e.async?e.generator?AST_AsyncGeneratorDefun:AST_AsyncDefun:e.generator?AST_GeneratorDefun:AST_Defun,t=[],r=null;return e.params.forEach(function(e){"RestElement"==e.type?r=l(e.argument):t.push(l(e))}),new n({start:s(e),end:f(e),name:l(e.id),argnames:t,rest:r,body:i(l(e.body).body)})},FunctionExpression:function(e){var n=e.async?e.generator?AST_AsyncGeneratorFunction:AST_AsyncFunction:e.generator?AST_GeneratorFunction:AST_Function,t=[],r=null;return e.params.forEach(function(e){"RestElement"==e.type?r=l(e.argument):t.push(l(e))}),new n({start:s(e),end:f(e),name:l(e.id),argnames:t,rest:r,body:i(l(e.body).body)})},ClassDeclaration:function(e){return new AST_DefClass({start:s(e),end:f(e),name:l(e.id),extends:l(e.superClass),properties:e.body.body.map(l)})},ClassExpression:function(e){return new AST_ClassExpression({start:s(e),end:f(e),name:l(e.id),extends:l(e.superClass),properties:e.body.body.map(l)})},MethodDefinition:function(e){var n=e.key,t=!1,n=e.computed?l(n):"PrivateIdentifier"==n.type?(t=!0,"#"+n.name):a(n),r=AST_ClassMethod,i=l(e.value);switch(e.kind){case"get":r=AST_ClassGetter,i=new AST_Accessor(i);break;case"set":r=AST_ClassSetter,i=new AST_Accessor(i)}return new r({start:s(e),end:f(e),key:n,private:t,static:e.static,value:i})},PropertyDefinition:function(e){var n=e.key,t=!1,n=e.computed?l(n):"PrivateIdentifier"==n.type?(t=!0,"#"+n.name):a(n);return new AST_ClassField({start:s(e),end:f(e),key:n,private:t,static:e.static,value:l(e.value)})},ForOfStatement:function(e){return new(e.await?AST_ForAwaitOf:AST_ForOf)({start:s(e),end:f(e),init:l(e.left),object:l(e.right),body:l(e.body)})},TryStatement:function(e){var n=e.handlers||[e.handler];if(1<n.length||e.guardedHandlers&&e.guardedHandlers.length)throw new Error("Multiple catch clauses are not supported.");return new AST_Try({start:s(e),end:f(e),body:l(e.block).body,bcatch:l(n[0]),bfinally:e.finalizer?new AST_Finally(l(e.finalizer)):null})},Property:function(e){var n=(e.computed?l:a)(e.key),n={start:s(e),end:f(e),key:n,value:l(e.value)};return"init"==e.kind?new(e.method?AST_ObjectMethod:AST_ObjectKeyVal)(n):(n.value=new AST_Accessor(n.value),"get"==e.kind?new AST_ObjectGetter(n):"set"==e.kind?new AST_ObjectSetter(n):void 0)},ArrayExpression:function(e){return new AST_Array({start:s(e),end:f(e),elements:e.elements.map(function(e){return null===e?new AST_Hole:l(e)})})},ArrayPattern:function(e){var n=[],t=null;return e.elements.forEach(function(e){null===e?n.push(new AST_Hole):"RestElement"==e.type?t=l(e.argument):n.push(l(e))}),new AST_DestructuredArray({start:s(e),end:f(e),elements:n,rest:t})},ObjectPattern:function(e){var n=[],t=null;return e.properties.forEach(function(e){"RestElement"==e.type?t=l(e.argument):n.push(new AST_DestructuredKeyVal(l(e)))}),new AST_DestructuredObject({start:s(e),end:f(e),properties:n,rest:t})},MemberExpression:function(e){return new(e.computed?AST_Sub:AST_Dot)({start:s(e),end:f(e),optional:e.optional,expression:l(e.object),property:e.computed?l(e.property):e.property.name})},MetaProperty:function(e){var n=l(e.meta),t=a(e.property);return"new"==n.name&&"target"==t?new AST_NewTarget({start:s(e),end:f(e),name:"new.target"}):new AST_Dot({start:s(e),end:f(e),expression:n,property:t})},SwitchCase:function(e){return new(e.test?AST_Case:AST_Default)({start:s(e),end:f(e),expression:l(e.test),body:e.consequent.map(l)})},ExportAllDeclaration:function(e){var n=e.exported?a(e.exported):"*";return new AST_ExportForeign({start:s(e),end:f(e),aliases:[n],keys:["*"],path:e.source.value})},ExportDefaultDeclaration:function(e){var n=l(e.declaration);if(!n.name)switch(n.CTOR){case AST_AsyncDefun:n=new AST_AsyncFunction(n);break;case AST_AsyncGeneratorDefun:n=new AST_AsyncGeneratorFunction(n);break;case AST_DefClass:n=new AST_ClassExpression(n);break;case AST_Defun:n=new AST_Function(n);break;case AST_GeneratorDefun:n=new AST_GeneratorFunction(n)}return new AST_ExportDefault({start:s(e),end:f(e),body:n})},ExportNamedDeclaration:function(e){if(e.declaration)return new AST_ExportDeclaration({start:s(e),end:f(e),body:l(e.declaration)});if(e.source){var n=[],t=[];return e.specifiers.forEach(function(e){n.push(a(e.exported)),t.push(a(e.local))}),new AST_ExportForeign({start:s(e),end:f(e),aliases:n,keys:t,path:e.source.value})}return new AST_ExportReferences({start:s(e),end:f(e),properties:e.specifiers.map(function(e){var n=new AST_SymbolExport(l(e.local));return n.alias=a(e.exported),n})})},ImportDeclaration:function(e){var t=null,r=null,i=null;return e.specifiers.forEach(function(e){var n=new AST_SymbolImport(l(e.local));switch(e.type){case"ImportDefaultSpecifier":(r=n).key="";break;case"ImportNamespaceSpecifier":(t=n).key="*";break;default:n.key=e.imported.name||syn.name,(i=i||[]).push(n)}}),new AST_Import({start:s(e),end:f(e),all:t,default:r,properties:i,path:e.source.value})},ImportExpression:function(e){var n=s(e),t=l(e.source);return new AST_Call({start:n,end:f(e),expression:new AST_SymbolRef({start:n,end:t.start,name:"import"}),args:[t]})},VariableDeclaration:function(e){return new({const:AST_Const,let:AST_Let}[e.kind]||AST_Var)({start:s(e),end:f(e),definitions:e.declarations.map(l)})},Literal:function(e){var n={start:s(e),end:f(e)};if(e.bigint)return n.value=e.bigint.toLowerCase()+"n",new AST_BigInt(n);var t=e.value;if(null===t)return new AST_Null(n);var r=e.regex;if(r&&r.pattern)return n.value=new RegExp(r.pattern,r.flags),n.value.raw_source=r.pattern,new AST_RegExp(n);if(r)return n.value=e.regex&&e.raw?e.raw:t,new AST_RegExp(n);switch(typeof t){case"string":return n.value=t,new AST_String(n);case"number":if(isNaN(t))return new AST_NaN(n);var i,o=isFinite(t)?(n.value=(i=1/t<0)?-t:t,new AST_Number(n)):(i=t<0,new AST_Infinity(n));return i?new AST_UnaryPrefix({start:n.start,end:n.end,operator:"-",expression:o}):o;case"boolean":return new(t?AST_True:AST_False)(n)}},TemplateLiteral:function(e){return new AST_Template({start:s(e),end:f(e),expressions:e.expressions.map(l),strings:e.quasis.map(function(e){return e.value.raw})})},TaggedTemplateExpression:function(e){var n=l(e.quasi);return n.start=s(e),n.end=f(e),n.tag=l(e.tag),n},Identifier:function(e){for(var n,t=u.length-1;"ArrayPattern"==(n=u[--t]).type||"AssignmentPattern"==n.type&&n.left===u[t+1]||"ObjectPattern"==n.type||"Property"==n.type&&n.value===u[t+1]||"VariableDeclarator"==n.type&&n.id===u[t+1];);var r=AST_SymbolRef;switch(n.type){case"ArrowFunctionExpression":n.body!==u[t+1]&&(r=AST_SymbolFunarg);break;case"BreakStatement":case"ContinueStatement":r=AST_LabelRef;break;case"CatchClause":r=AST_SymbolCatch;break;case"ClassDeclaration":n.id===u[t+1]&&(r=AST_SymbolDefClass);break;case"ClassExpression":n.id===u[t+1]&&(r=AST_SymbolClass);break;case"FunctionDeclaration":r=n.id===u[t+1]?AST_SymbolDefun:AST_SymbolFunarg;break;case"FunctionExpression":r=n.id===u[t+1]?AST_SymbolLambda:AST_SymbolFunarg;break;case"LabeledStatement":r=AST_Label;break;case"VariableDeclaration":r={const:AST_SymbolConst,let:AST_SymbolLet}[n.kind]||AST_SymbolVar}return new r({start:s(e),end:f(e),name:e.name})},Super:function(e){return new AST_Super({start:s(e),end:f(e),name:"super"})},ThisExpression:function(e){return new AST_This({start:s(e),end:f(e),name:"this"})},ParenthesizedExpression:function(e){var n=l(e.expression);return n.start.parens||(n.start.parens=[]),n.start.parens.push(s(e)),n.end.parens||(n.end.parens=[]),n.end.parens.push(f(e)),n},ChainExpression:function(e){e=l(e.expression);return e.terminal=!0,e}};function e(r){return function(e){var n=e.key instanceof AST_Node,t=n?S(e.key):e.private?{type:"PrivateIdentifier",name:e.key.slice(1)}:{type:"Literal",value:e.key};return{type:"MethodDefinition",kind:r,computed:n,key:t,static:e.static,value:S(e.value)}}}function n(n){return function(e){return{type:"ForOfStatement",await:n,left:S(e.init),right:S(e.object),body:S(e.body)}}}function t(e){var n=e.value;return"number"==typeof n&&(n<0||0===n&&1/n<0)?{type:"UnaryExpression",operator:"-",prefix:!0,argument:{type:"Literal",value:-n,raw:e.start.raw}}:{type:"Literal",value:n,raw:e.start.raw}}function i(e){for(var n=0;n<e.length;n++){var t=e[n];if(!(t instanceof AST_SimpleStatement))break;var r=t.body;if(!(r instanceof AST_String))break;if(t.start.pos!==r.start.pos)break;e[n]=new AST_Directive(r)}return e}function o(e){if("Literal"==e.type)return null!=e.raw?e.raw:e.value+""}function s(e){var n=e.loc,t=n&&n.start,r=e.range;return new AST_Token({file:n&&n.source,line:t&&t.line,col:t&&t.column,pos:r?r[0]:e.start,endline:t&&t.line,endcol:t&&t.column,endpos:r?r[0]:e.start,raw:o(e)})}function f(e){var n=e.loc,t=n&&n.end,r=e.range;return new AST_Token({file:n&&n.source,line:t&&t.line,col:t&&t.column,pos:r?r[1]:e.end,endline:t&&t.line,endcol:t&&t.column,endpos:r?r[1]:e.end,raw:o(e)})}function a(e){return""+e["Identifier"==e.type?"name":"value"]}function c(e,n,t){var o=["start: my_start_token(M)","end: my_end_token(M)"],a=["type: "+JSON.stringify(e)];t&&t.split(/\s*,\s*/).forEach(function(e){var n=/([a-z0-9$_]+)(=|@|>|%)([a-z0-9$_]+)/i.exec(e);if(!n)throw new Error("Can't understand property map: "+e);var t=n[1],r=n[2],i=n[3];switch(r){case"@":o.push(i+": M."+t+".map(from_moz)"),a.push(t+": M."+i+".map(to_moz)");break;case">":o.push(i+": from_moz(M."+t+")"),a.push(t+": to_moz(M."+i+")");break;case"=":o.push(i+": M."+t),a.push(t+": M."+i);break;case"%":o.push(i+": from_moz(M."+t+").body"),a.push(t+": to_moz_block(M)");break;default:throw new Error("Can't understand operator in propmap: "+e)}}),r[e]=new Function("U2","my_start_token","my_end_token","from_moz",["return function From_Moz_"+e+"(M) {","    return new U2.AST_"+n.TYPE+"({",o.join(",\n"),"    });","};"].join("\n"))(exports,s,f,l),p(n,new Function("to_moz","to_moz_block","to_moz_scope",["return function To_Moz_"+e+"(M) {","    return {",a.join(",\n"),"    };","};"].join("\n"))(S,d,A))}r.UpdateExpression=r.UnaryExpression=function(e){return new(("prefix"in e?e.prefix:"UnaryExpression"==e.type)?AST_UnaryPrefix:AST_UnaryPostfix)({start:s(e),end:f(e),operator:e.operator,expression:l(e.argument)})},c("EmptyStatement",AST_EmptyStatement),c("ExpressionStatement",AST_SimpleStatement,"expression>body"),c("BlockStatement",AST_BlockStatement,"body@body"),c("IfStatement",AST_If,"test>condition, consequent>body, alternate>alternative"),c("LabeledStatement",AST_LabeledStatement,"label>label, body>body"),c("BreakStatement",AST_Break,"label>label"),c("ContinueStatement",AST_Continue,"label>label"),c("WithStatement",AST_With,"object>expression, body>body"),c("SwitchStatement",AST_Switch,"discriminant>expression, cases@body"),c("ReturnStatement",AST_Return,"argument>value"),c("ThrowStatement",AST_Throw,"argument>value"),c("WhileStatement",AST_While,"test>condition, body>body"),c("DoWhileStatement",AST_Do,"test>condition, body>body"),c("ForStatement",AST_For,"init>init, test>condition, update>step, body>body"),c("ForInStatement",AST_ForIn,"left>init, right>object, body>body"),c("DebuggerStatement",AST_Debugger),c("VariableDeclarator",AST_VarDef,"id>name, init>value"),c("CatchClause",AST_Catch,"param>argname, body%body"),c("BinaryExpression",AST_Binary,"operator=operator, left>left, right>right"),c("LogicalExpression",AST_Binary,"operator=operator, left>left, right>right"),c("AssignmentExpression",AST_Assign,"operator=operator, left>left, right>right"),c("AssignmentPattern",AST_DefaultValue,"left>name, right>value"),c("ConditionalExpression",AST_Conditional,"test>condition, consequent>consequent, alternate>alternative"),c("NewExpression",AST_New,"callee>expression, arguments@args, pure=pure"),c("CallExpression",AST_Call,"callee>expression, arguments@args, optional=optional, pure=pure"),c("SequenceExpression",AST_Sequence,"expressions@expressions"),c("SpreadElement",AST_Spread,"argument>expression"),c("ObjectExpression",AST_Object,"properties@properties"),c("AwaitExpression",AST_Await,"argument>expression"),c("YieldExpression",AST_Yield,"argument>expression, delegate=nested"),p(AST_Toplevel,function(e){return A("Program",e)}),p(AST_LambdaDefinition,function(e){var n=e.argnames.map(S);return e.rest&&n.push({type:"RestElement",argument:S(e.rest)}),{type:"FunctionDeclaration",id:S(e.name),async:is_async(e),generator:is_generator(e),params:n,body:A("BlockStatement",e)}}),p(AST_Lambda,function(e){var n=e.argnames.map(S);return e.rest&&n.push({type:"RestElement",argument:S(e.rest)}),is_arrow(e)?{type:"ArrowFunctionExpression",async:is_async(e),params:n,body:e.value?S(e.value):A("BlockStatement",e)}:{type:"FunctionExpression",id:S(e.name),async:is_async(e),generator:is_generator(e),params:n,body:A("BlockStatement",e)}}),p(AST_DefClass,function(e){return{type:"ClassDeclaration",id:S(e.name),superClass:S(e.extends),body:{type:"ClassBody",body:e.properties.map(S)}}}),p(AST_ClassExpression,function(e){return{type:"ClassExpression",id:S(e.name),superClass:S(e.extends),body:{type:"ClassBody",body:e.properties.map(S)}}}),p(AST_ClassGetter,e("get")),p(AST_ClassSetter,e("set")),p(AST_ClassMethod,e("method")),p(AST_ClassField,function(e){var n=e.key instanceof AST_Node;return{type:"PropertyDefinition",computed:n,key:n?S(e.key):e.private?{type:"PrivateIdentifier",name:e.key.slice(1)}:{type:"Literal",value:e.key},static:e.static,value:S(e.value)}}),p(AST_ForAwaitOf,n(!0)),p(AST_ForOf,n(!1)),p(AST_Directive,function(e){return{type:"ExpressionStatement",expression:_(e,{type:"Literal",value:e.value})}}),p(AST_SwitchBranch,function(e){return{type:"SwitchCase",test:S(e.expression),consequent:e.body.map(S)}}),p(AST_Try,function(e){return{type:"TryStatement",block:d(e),handler:S(e.bcatch),guardedHandlers:[],finalizer:S(e.bfinally)}}),p(AST_Catch,function(e){return{type:"CatchClause",param:S(e.argname),guard:null,body:d(e)}}),p(AST_ExportDeclaration,function(e){return{type:"ExportNamedDeclaration",declaration:S(e.body)}}),p(AST_ExportDefault,function(e){return{type:"ExportDefaultDeclaration",declaration:S(e.body)}}),p(AST_ExportForeign,function(e){if("*"==e.keys[0])return{type:"ExportAllDeclaration",exported:"*"==e.aliases[0]?null:{type:"Identifier",name:e.aliases[0]},source:{type:"Literal",value:e.path}};for(var n=[],t=0;t<e.aliases.length;t++)n.push({type:"ExportSpecifier",exported:{type:"Identifier",name:e.aliases[t]},local:{type:"Identifier",name:e.keys[t]}});return{type:"ExportNamedDeclaration",specifiers:n,source:{type:"Literal",value:e.path}}}),p(AST_ExportReferences,function(e){return{type:"ExportNamedDeclaration",specifiers:e.properties.map(function(e){return{type:"ExportSpecifier",local:S(e),exported:{type:"Identifier",name:e.alias}}})}}),p(AST_Import,function(e){var n=e.properties?e.properties.map(function(e){return{type:"ImportSpecifier",local:S(e),imported:{type:"Identifier",name:e.key}}}):[];return e.all&&n.unshift({type:"ImportNamespaceSpecifier",local:S(e.all)}),e.default&&n.unshift({type:"ImportDefaultSpecifier",local:S(e.default)}),{type:"ImportDeclaration",specifiers:n,source:{type:"Literal",value:e.path}}}),p(AST_Definitions,function(e){return{type:"VariableDeclaration",kind:e.TYPE.toLowerCase(),declarations:e.definitions.map(S)}}),p(AST_PropAccess,function(e){var n=e instanceof AST_Sub,n={type:"MemberExpression",object:S(e.expression),computed:n,optional:e.optional,property:n?S(e.property):{type:"Identifier",name:e.property}};return e.terminal?{type:"ChainExpression",expression:n}:n}),p(AST_Unary,function(e){return{type:"++"==e.operator||"--"==e.operator?"UpdateExpression":"UnaryExpression",operator:e.operator,prefix:e instanceof AST_UnaryPrefix,argument:S(e.expression)}}),p(AST_Binary,function(e){return{type:"&&"==e.operator||"||"==e.operator?"LogicalExpression":"BinaryExpression",left:S(e.left),operator:e.operator,right:S(e.right)}}),p(AST_Array,function(e){return{type:"ArrayExpression",elements:e.elements.map(S)}}),p(AST_DestructuredArray,function(e){var n=e.elements.map(S);return e.rest&&n.push({type:"RestElement",argument:S(e.rest)}),{type:"ArrayPattern",elements:n}}),p(AST_DestructuredKeyVal,function(e){var n=e.key instanceof AST_Node;return{type:"Property",kind:"init",computed:n,key:n?S(e.key):{type:"Literal",value:e.key},value:S(e.value)}}),p(AST_DestructuredObject,function(e){var n=e.properties.map(S);return e.rest&&n.push({type:"RestElement",argument:S(e.rest)}),{type:"ObjectPattern",properties:n}}),p(AST_ObjectProperty,function(e){var n,t=e.key instanceof AST_Node,r=t?S(e.key):{type:"Literal",value:e.key};return e instanceof AST_ObjectKeyVal?n="init":e instanceof AST_ObjectGetter?n="get":e instanceof AST_ObjectSetter&&(n="set"),{type:"Property",kind:n,computed:t,method:e instanceof AST_ObjectMethod,key:r,value:S(e.value)}}),p(AST_Symbol,function(e){var n=e.definition();return{type:"Identifier",name:n&&n.mangled_name||e.name}}),p(AST_Super,function(){return{type:"Super"}}),p(AST_This,function(){return{type:"ThisExpression"}}),p(AST_NewTarget,function(){return{type:"MetaProperty",meta:{type:"Identifier",name:"new"},property:{type:"Identifier",name:"target"}}}),p(AST_RegExp,function(e){var n=e.value.toString().match(/[gimuy]*$/)[0],t="/"+e.value.raw_source+"/"+n;return{type:"Literal",value:t,raw:t,regex:{pattern:e.value.raw_source,flags:n}}}),p(AST_BigInt,function(e){e=e.value;return{type:"Literal",bigint:e.slice(0,-1),raw:e}}),p(AST_Boolean,t),p(AST_Constant,t),p(AST_Null,t),p(AST_Atom,function(e){return{type:"Identifier",name:String(e.value)}}),p(AST_Template,function(e){var t=e.strings.length-1,n={type:"TemplateLiteral",expressions:e.expressions.map(S),quasis:e.strings.map(function(e,n){return{type:"TemplateElement",tail:n==t,value:{raw:e}}})};return e.tag?{type:"TaggedTemplateExpression",tag:S(e.tag),quasi:n}:n}),AST_Block.DEFMETHOD("to_mozilla_ast",AST_BlockStatement.prototype.to_mozilla_ast),AST_Hole.DEFMETHOD("to_mozilla_ast",return_null),AST_Node.DEFMETHOD("to_mozilla_ast",function(){throw new Error("Cannot convert AST_"+this.TYPE)});var u=null;function l(e){u.push(e);var n=null;if(e){if(!HOP(r,e.type))throw new Error("Unsupported type: "+e.type);n=r[e.type](e)}return u.pop(),n}function _(e,n){var t=e.start,e=e.end;return null!=t.pos&&null!=e.endpos&&(n.range=[t.pos,e.endpos]),t.line&&(n.loc={start:{line:t.line,column:t.col},end:e.endline?{line:e.endline,column:e.endcol}:null},t.file&&(n.loc.source=t.file)),n}function p(e,n){e.DEFMETHOD("to_mozilla_ast",function(){return _(this,n(this))})}function S(e){return null!=e?e.to_mozilla_ast():null}function d(e){return{type:"BlockStatement",body:e.body.map(S)}}function A(e,n){var t=n.body.map(S);return n.body[0]instanceof AST_SimpleStatement&&n.body[0].body instanceof AST_String&&t.unshift(S(new AST_EmptyStatement(n.body[0]))),{type:e,body:t}}AST_Node.from_mozilla_ast=function(e){var n=u;u=[];e=l(e);return u=n,e.walk(new TreeWalker(function(e){if(e instanceof AST_LabelRef){for(var n,t,r=0;(n=this.parent(r))&&!(n instanceof AST_Scope);r++)if(n instanceof AST_LabeledStatement&&n.label.name==e.name){e.thedef=n.label;break}e.thedef||(t=e.start,js_error("Undefined label "+e.name,t.file,t.line,t.col,t.pos))}})),e}}();var to_ascii,to_base64,builtins=function(){var n=[];return["null","true","false","Infinity","-Infinity","undefined"].forEach(t),[Array,Boolean,Date,Error,Function,Math,Number,Object,RegExp,String].forEach(function(e){Object.getOwnPropertyNames(e).map(t),e.prototype&&(Object.getOwnPropertyNames(new e).map(t),Object.getOwnPropertyNames(e.prototype).map(t))}),makePredicate(n);function t(e){n.push(e)}}();function reserve_quoted_keys(e,n){function t(e){push_uniq(n,e)}e.walk(new TreeWalker(function(e){e instanceof AST_ClassProperty||e instanceof AST_ObjectProperty?e.start&&e.start.quote&&t(e.key):e instanceof AST_Sub&&addStrings(e.property,t)}))}function addStrings(e,n){e instanceof AST_Conditional?(addStrings(e.consequent,n),addStrings(e.alternative,n)):e instanceof AST_Sequence?addStrings(e.tail_node(),n):e instanceof AST_String&&n(e.value)}function mangle_properties(e,t){t=defaults(t,{builtins:!1,cache:null,debug:!1,keep_quoted:!1,regex:null,reserved:null},!0);var n=Object.create(t.builtins?null:builtins);Array.isArray(t.reserved)&&t.reserved.forEach(function(e){n[e]=!0});var r,i=-1;t.cache?(r=t.cache.props).each(function(e){n[e]=!0}):r=new Dictionary;var o,a=t.regex,s=!1!==t.debug;s&&(o=!0===t.debug?"":t.debug);var f=Object.create(null),c=Object.create(n);function u(e){return!c[e]&&!/^-?[0-9]+(\.[0-9]+)?(e[+-][0-9]+)?$/.test(e)}function l(e){return!n[e]&&((!a||a.test(e))&&(r.has(e)||f[e]))}function _(e){u(e)&&(f[e]=!0),l(e)||(c[e]=!0)}function p(e){if(!l(e))return e;var n,t=r.get(e);if(!t){if(!s||u(n="_$"+e+"$"+o+"_")&&(t=n),!t)for(;!u(t=base54(++i)););/^#/.test(e)&&(t="#"+t),r.set(e,t)}return t}function S(e){e instanceof AST_Sequence?S(e.expressions.tail_node()):e instanceof AST_String?e.value=p(e.value):e instanceof AST_Conditional&&(S(e.consequent),S(e.alternative))}e.walk(new TreeWalker(function(e){if(e instanceof AST_Binary)"in"==e.operator&&addStrings(e.left,_);else if("Call"==e.TYPE){var n=e.expression;if(n instanceof AST_Dot)switch(n.property){case"defineProperty":case"getOwnPropertyDescriptor":if(e.args.length<2)break;if(!((n=n.expression)instanceof AST_SymbolRef))break;if("Object"!=n.name)break;if(!n.definition().undeclared)break;addStrings(e.args[1],_);break;case"hasOwnProperty":if(e.args.length<1)break;addStrings(e.args[0],_)}}else e instanceof AST_ClassProperty?"string"==typeof e.key&&_(e.key):e instanceof AST_Dot?_(e.property):e instanceof AST_ObjectProperty?"string"==typeof e.key&&_(e.key):e instanceof AST_Sub&&addStrings(e.property,_)})),e.walk(new TreeWalker(function(e){if(e instanceof AST_Binary)"in"==e.operator&&S(e.left);else if("Call"==e.TYPE){var n=e.expression;if(n instanceof AST_Dot)switch(n.property){case"defineProperty":case"getOwnPropertyDescriptor":if(e.args.length<2)break;if(!((n=n.expression)instanceof AST_SymbolRef))break;if("Object"!=n.name)break;if(!n.definition().undeclared)break;S(e.args[1]);break;case"hasOwnProperty":if(e.args.length<1)break;S(e.args[0])}}else e instanceof AST_ClassProperty?"string"==typeof e.key&&(e.key=p(e.key)):e instanceof AST_Dot?e.property=p(e.property):e instanceof AST_ObjectProperty?"string"==typeof e.key&&(e.key=p(e.key)):e instanceof AST_Sub&&(t.keep_quoted||S(e.property))}))}function read_source_map(e,n){for(var t=n.end.comments_after,r=t.length;0<=--r;){var i=t[r];if("comment1"!=i.type)break;i=/^# ([^\s=]+)=(\S+)\s*$/.exec(i.value);if(!i)break;if("sourceMappingURL"==i[1]){if(!(i=/^data:application\/json(;.*?)?;base64,(\S+)$/.exec(i[2])))break;return to_ascii(i[2])}}AST_Node.warn("inline source map not found: {name}",{name:e})}function parse_source_map(n){try{return JSON.parse(n)}catch(e){throw new Error("invalid input source map: "+n)}}function set_shorthand(n,t,e){e.forEach(function(e){t[e]&&("object"!=typeof t[e]&&(t[e]={}),n in t[e]||(t[e][n]=t[n]))})}function init_cache(e){e&&("props"in e?e.props instanceof Dictionary||(e.props=Dictionary.fromObject(e.props)):e.props=new Dictionary)}function to_json(e){return{props:e.props.toObject()}}function minify(r,i){try{(i=defaults(i,{annotations:void 0,compress:{},enclose:!1,ie:!1,ie8:!1,keep_fnames:!1,mangle:{},nameCache:null,output:{},parse:{},rename:void 0,sourceMap:!1,timings:!1,toplevel:!1,v8:!1,validate:!1,warnings:!1,webkit:!1,wrap:!1},!0)).validate&&AST_Node.enable_validation();var e,n=i.timings&&{start:Date.now()};void 0===i.rename&&(i.rename=i.compress&&i.mangle),void 0!==i.annotations&&set_shorthand("annotations",i,["compress","output"]),i.ie8&&(i.ie=i.ie||i.ie8),i.ie&&set_shorthand("ie",i,["compress","mangle","output"]),i.keep_fnames&&set_shorthand("keep_fnames",i,["compress","mangle"]),i.toplevel&&set_shorthand("toplevel",i,["compress","mangle"]),i.v8&&set_shorthand("v8",i,["mangle","output"]),i.webkit&&set_shorthand("webkit",i,["compress","mangle","output"]),i.mangle&&(i.mangle=defaults(i.mangle,{cache:i.nameCache&&(i.nameCache.vars||{}),eval:!1,ie:!1,keep_fnames:!1,properties:!1,reserved:[],toplevel:!1,v8:!1,webkit:!1},!0),i.mangle.properties&&("object"!=typeof i.mangle.properties&&(i.mangle.properties={}),i.mangle.properties.keep_quoted&&(e=i.mangle.properties.reserved,Array.isArray(e)||(e=[]),i.mangle.properties.reserved=e),!i.nameCache||"cache"in i.mangle.properties||(i.mangle.properties.cache=i.nameCache.props||{})),init_cache(i.mangle.cache),init_cache(i.mangle.properties.cache)),i.sourceMap&&(i.sourceMap=defaults(i.sourceMap,{content:null,filename:null,includeSources:!1,names:!0,root:null,url:null},!0));var o,t=[];if(i.warnings&&AST_Node.log_function(function(e){t.push(e)},"verbose"==i.warnings),n&&(n.parse=Date.now()),r instanceof AST_Toplevel)o=r;else{"string"==typeof r&&(r=[r]),i.parse=i.parse||{},i.parse.toplevel=null;var a,s=i.sourceMap&&i.sourceMap.content;for(u in(s="string"==typeof s&&"inline"!=s?parse_source_map(s):s)&&(i.sourceMap.orig=Object.create(null)),r)HOP(r,u)&&(i.parse.filename=u,i.parse.toplevel=o=parse(r[u],i.parse),"inline"==s?(a=read_source_map(u,o))&&(i.sourceMap.orig[u]=parse_source_map(a)):s&&(i.sourceMap.orig[u]=s))}e&&reserve_quoted_keys(o,e),["enclose","wrap"].forEach(function(e){var n,t=i[e];t&&(n=o.print_to_string().slice(0,-1),o=o[e](t),r[o.start.file]=o.print_to_string().replace(n,""))}),i.validate&&o.validate_ast(),n&&(n.rename=Date.now()),i.rename&&(o.figure_out_scope(i.mangle),o.expand_names(i.mangle)),n&&(n.compress=Date.now()),i.compress&&(o=new Compressor(i.compress).compress(o),i.validate&&o.validate_ast()),n&&(n.scope=Date.now()),i.mangle&&o.figure_out_scope(i.mangle),n&&(n.mangle=Date.now()),i.mangle&&(o.compute_char_frequency(i.mangle),o.mangle_names(i.mangle)),n&&(n.properties=Date.now()),i.mangle&&i.mangle.properties&&mangle_properties(o,i.mangle.properties),n&&(n.output=Date.now());var f={},c=defaults(i.output,{ast:!1,code:!0});if(c.ast&&(f.ast=o),c.code){if(i.sourceMap&&(c.source_map=SourceMap(i.sourceMap),i.sourceMap.includeSources)){if(r instanceof AST_Toplevel)throw new Error("original source content unavailable");for(var u in r)HOP(r,u)&&c.source_map.setSourceContent(u,r[u])}delete c.ast,delete c.code;var l,_=OutputStream(c);o.print(_),f.code=_.get(),i.sourceMap&&(f.map=c.source_map.toString(),(l=i.sourceMap.url)&&(f.code=f.code.replace(/\n\/\/# sourceMappingURL=\S+\s*$/,""),f.code+="inline"==l?"\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,"+to_base64(f.map):"\n//# sourceMappingURL="+l))}return i.nameCache&&i.mangle&&(i.mangle.cache&&(i.nameCache.vars=to_json(i.mangle.cache)),i.mangle.properties&&i.mangle.properties.cache&&(i.nameCache.props=to_json(i.mangle.properties.cache))),n&&(n.end=Date.now(),f.timings={parse:.001*(n.rename-n.parse),rename:.001*(n.compress-n.rename),compress:.001*(n.scope-n.compress),scope:.001*(n.mangle-n.scope),mangle:.001*(n.properties-n.mangle),properties:.001*(n.output-n.properties),output:.001*(n.end-n.output),total:.001*(n.end-n.start)}),t.length&&(f.warnings=t),f}catch(e){return{error:e}}finally{AST_Node.log_function(),AST_Node.disable_validation()}}to_base64="undefined"==typeof Buffer?(to_ascii=atob,btoa):void 0===Buffer.alloc?(to_ascii=function(e){return new Buffer(e,"base64").toString()},function(e){return new Buffer(e).toString("base64")}):(to_ascii=function(e){return Buffer.from(e,"base64").toString()},function(e){return Buffer.from(e).toString("base64")});